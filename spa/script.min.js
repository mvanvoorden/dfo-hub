"use strict";function _typeof(e){return e&&typeof Symbol!="undefined"&&e.constructor===Symbol?"symbol":typeof e}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,s){try{var o=t[i](s),u=o.value}catch(a){n(a);return}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/asyncValue.jsx','spa/bigLoader.jsx','spa/dapp/controller.jsx','spa/dapp/style.min.css','spa/dapp/view.jsx','spa/defi/controller.jsx','spa/defi/style.min.css','spa/defi/view.jsx','spa/deploy/controller.jsx','spa/deploy/deployDFO.jsx','spa/deploy/deployDFOMetadata.jsx','spa/deploy/governanceRulesData.jsx','spa/deploy/style.min.css','spa/deploy/subdomain.jsx','spa/deploy/view.jsx','spa/deploy/votingTokenData.jsx','spa/dFOElement/controller.jsx','spa/dFOElement/style.min.css','spa/dFOElement/view.jsx','spa/dFOList/controller.jsx','spa/dFOList/style.min.css','spa/dFOList/view.jsx','spa/dFOMetadata/controller.jsx','spa/dFOMetadata/edit.jsx','spa/dFOMetadata/style.min.css','spa/dFOMetadata/view.jsx','spa/drafts/controller.jsx','spa/drafts/style.min.css','spa/drafts/view.jsx','spa/editor/controller.jsx','spa/editor/style.min.css','spa/editor/view.jsx','spa/farming/controller.jsx','spa/farming/fixedInflation/edit.jsx','spa/farming/fixedInflation/view.jsx','spa/farming/staking/edit.jsx','spa/farming/staking/view.jsx','spa/farming/style.min.css','spa/farming/view.jsx','spa/functions/controller.jsx','spa/functions/style.min.css','spa/functions/view.jsx','spa/ghostLoader.jsx','spa/globalCatcher.jsx','spa/governance/controller.jsx','spa/governance/style.min.css','spa/governance/view.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/loader.jsx','spa/loaderMini.jsx','spa/loaderMinimino.jsx','spa/messages.jsx','spa/newProposal/controller.jsx','spa/newProposal/style.min.css','spa/newProposal/view.jsx','spa/noWeb3Loader.jsx','spa/okBoomer.jsx','spa/overview/controller.jsx','spa/overview/style.min.css','spa/overview/view.jsx','spa/proposal/controller.jsx','spa/proposal/style.min.css','spa/proposal/view.jsx','spa/proposals/controller.jsx','spa/proposals/style.min.css','spa/proposals/view.jsx','spa/rules/controller.jsx','spa/rules/style.min.css','spa/rules/view.jsx','spa/sequentialOps.jsx','spa/stake/controller.jsx','spa/stake/style.min.css','spa/stake/view.jsx','spa/stakingInfo/controller.jsx','spa/stakingInfo/style.min.css','spa/stakingInfo/view.jsx','spa/state/controller.jsx','spa/state/style.min.css','spa/state/view.jsx','spa/token/controller.jsx','spa/token/style.min.css','spa/token/view.jsx','spa/tokenPicker/controller.jsx','spa/tokenPicker/style.min.css','spa/tokenPicker/view.jsx','spa/uniswapTokenPicker.jsx','spa/wallet/controller.jsx','spa/wallet/style.min.css','spa/wallet/view.jsx','spa/walletEnablerButton.jsx']);var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AsyncValue=React.createClass({displayName:"AsyncValue",requiredScripts:["spa/loaderMinimino.jsx"],render:function(){if(!this.props.children)return React.createElement(LoaderMinimino,null);try{var t=_typeof(this.props.children).toLowerCase();if(t==="number"||t==="string")return React.createElement("span",null,this.props.children);if(this.props.children.props.children)return this.props.children;if(this.props.children.props.src)return this.props.children}catch(n){return React.createElement(LoaderMinimino,null)}return React.createElement(LoaderMinimino,null)}});var BigLoader=React.createClass({displayName:"BigLoader",getDefaultSubscriptions:function(){var t=this;return{"loader/show":function(){return t.setState({propagate:!1,transaction:0,chunks:0},function(){return t.domRoot.css("display","block")})},"loader/propagate":this.propagate,"loader/hide":this.hideLoader,"loader/transaction":this.transaction,"loader/chunks":function(n){return t.setState({propagate:!1,transaction:0,chunks:n},function(){return t.domRoot.css("display","block")})}}},getInitialState:function(){return{counter:60}},propagate:function(t,n){var r=this;t&&t.forEach(function(e){return window.AJAXRequest(e.split("ipfs://").join("//gateway.ipfs.io/"))});var i=function(){if(r.state.counter===0)return r.interval&&clearInterval(r.interval),n&&n();r.setState({counter:r.state.counter-1,chunks:0})};r.interval&&clearInterval(r.interval),r.setState({counter:60,propagate:!0,transaction:0,chunks:0},function(){r.domRoot.css("display","block"),r.interval=setInterval(i,1e3)})},hideLoader:function(){this.interval&&clearInterval(this.interval),this.domRoot.css("display","none"),this.setState({propagate:!1,transaction:0,chunks:0})},transaction:function(t,n){this.interval&&clearInterval(this.interval),this.setState({transaction:t,transactions:n,propagate:!1,chunks:0})},render:function(){return React.createElement("section",{className:"UPLOADBANNER"},this.state.chunks&&React.createElement("h1",null,"Generating ",this.state.chunks," chunks..."),!this.state.chunks&&!this.state.propagate&&!this.state.transaction&&React.createElement("h1",null,this.props.message!==undefined&&this.props.message!==null?this.props.message:"Loading..."),!this.state.chunks&&this.state.propagate&&React.createElement("h1",null,this.state.counter),!this.state.chunks&&this.state.propagate&&React.createElement("h2",null,"Waiting for Propagation"),!this.state.chunks&&this.state.transaction&&React.createElement("h2",null,"Transaction ",this.state.transaction," ",this.state.transactions>1&&React.createElement("span",null,"of ",this.state.transactions)),React.createElement("div",{"class":"loadingio-spinner-disk-bluuznaj8"},React.createElement("div",{"class":"ldio-2w6250r221a"},React.createElement("div",null,React.createElement("div",null),React.createElement("div",null)))))}});var DappController=function(t){var n=this;n.view=t};var Dapp=React.createClass({displayName:"Dapp",requiredModules:["spa/functions"],getInitialState:function(){return{section:"Functions",voices:["Functions","State"]}},onClick:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.sectionChange(t.target.innerHTML)},sectionChange:function(t,n){this.domRoot.children().find("a").each(function(e,n){((n=$(n).removeClass("selected")).html()===t||n.data("alternatives")&&n.data("alternatives").indexOf(t)!==-1)&&n.addClass("selected")});var r=t.split(" ").join(""),i=this;ReactModuleLoader.load({modules:["spa/"+r.firstLetterToLowerCase()],callback:function(){return i.setState({section:r,props:n||null})}})},render:function(){var t=this,n={};return this.props&&Object.entries(this.props).forEach(function(e){return n[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return n[e[0]]=e[1]}),n.section=n.subSection||n.section,React.createElement("section",{className:"DFOOpened"},React.createElement("ul",{className:"DFONavigator DFOSubNavigator DFONavigatorAfter"},n.voices.map(function(e){return React.createElement("li",{key:e},React.createElement("a",{href:"javascript:;",onClick:t.onClick,className:n.section===e?"selected":""},e))})),React.createElement(window[n.section],n))}});var DeFiController=function(t){var n=this;n.view=t};var DeFi=React.createClass({displayName:"DeFi",requiredModules:["spa/wallet"],getInitialState:function(){return{section:"Wallet"}},onClick:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.sectionChange(t.target.innerHTML)},sectionChange:function(t,n){this.domRoot.children().find("a").each(function(e,n){((n=$(n).removeClass("selected")).html()===t||n.data("alternatives")&&n.data("alternatives").indexOf(t)!==-1)&&n.addClass("selected")});var r=t.split(" ").join(""),i=this;ReactModuleLoader.load({modules:["spa/"+r.firstLetterToLowerCase()],callback:function(){return i.setState({section:r,props:n||null})}})},render:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.section=t.subSection||t.section,React.createElement("section",{className:"DFOOpened"},React.createElement("ul",{className:"DFONavigator DFOSubNavigator DFONavigatorAfter"},React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.onClick,className:"selected"},"Wallet")),React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.onClick},"Token")),React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.onClick},"Farming"))),React.createElement(window[t.section],t))}});var DeployController=function(t){var n=this;n.view=t,n.retrieveCurrentStepData=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e&&e.preventDefault&&e.preventDefault(!0)&&e.stopPropagation&&e.stopPropagation(!0),n.view.emit("message"),s.prev=2,i=n.view.currentElement.getData&&n.view.currentElement.getData()||{},s.t0=i.then;if(!s.t0){s.next=9;break}return s.next=8,i;case 8:i=s.sent;case 9:return s.abrupt("return",n.view.data[n.view.state.step]=i||{});case 12:s.prev=12,s.t1=s["catch"](2);if(!t){s.next=16;break}return s.abrupt("return");case 16:n.view.emit("message",s.t1,"error");case 17:case"end":return s.stop()}},r,this,[[2,12]])}));return t}(),n.getData=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.retrieveCurrentStepData(e,t);case 2:if(s.sent){s.next=4;break}return s.abrupt("return");case 4:return i={},n.view.data.map(function(e){return e&&Object.keys(e).map(function(t){return i[t]=e[t]})}),s.abrupt("return",i);case 7:case"end":return s.stop()}},r,this)}));return t}(),n.next=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.getData(e);case 2:t=i.sent;if(n.view.state.step!==n.view.steps.length&&!!t){i.next=5;break}return i.abrupt("return");case 5:n.view.setState({allData:t,step:++n.view.state.step});case 6:case"end":return i.stop()}},r,this)}));return t}(),n.back=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n.view.state.step!==0){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,n.retrieveCurrentStepData(e,!0);case 4:n.view.setState({step:--n.view.state.step});case 5:case"end":return r.stop()}},r,this)}));return t}()};var DeployDFO=React.createClass({displayName:"DeployDFO",requiredScripts:["spa/sequentialOps.jsx"],render:function(){var t=this,n=this;return React.createElement("span",null,React.createElement(SequentialOps,{ref:function(n){return t.sequentialOps=n},initialContext:n.props.allData,auto:"true"},[{name:"Data Integrity Validation",call:function(t){return new Promise(function(e,r){var i=[];!t.tokenName&&i.push("Insert a valid Token Name"),!t.tokenSymbol&&i.push("Insert a valid Token Symbol"),(isNaN(t.tokenTotalSupply)||t.tokenTotalSupply<=0)&&i.push("Token Total Supply must be greater than 0"),!t.ensDomain&&i.push("ENS Domain is mandatory"),(isNaN(t.surveyLength)||t.surveyLength<=0)&&i.push("Survey Length must be a number greater than 0"),(isNaN(t.emergencySurveyLength)||t.emergencySurveyLength<=0)&&i.push("Emergency Survey Length must be a number greater than 0");var s=parseFloat(window.fromDecimals(t.availableSupply,18).split(",").join("")),o=function(t,r,i,s,o,u){if(!t[s+"Check"]&&!u)return;var a=parseFloat(t[s].split(",").join("")),f=u?a<0:a<=0;(isNaN(a)||f||a>r)&&i.push((o||n[s+"Label"].innerHTML.split(":").join(""))+" must be a valid, positive number "+(u?"between 0 and":"less than")+" "+window.formatMoney(r))};return o(t,s,i,"emergencySurveyStaking","Penalty Fee",!0),o(t,s,i,"surveyQuorum","Survey Quorum"),o(t,s,i,"surveyMaxCap","Max Cap"),o(t,s,i,"surveyMinStake","Min Staking"),o(t,s,i,"surveyCommunityStake","DFO Locked Supply"),o(t,s,i,"surveySingleReward","Activity Reward"),i.length>0?r(i):e()})}},{name:"Deploy Voting Token | "+n.props.allData.tokenTotalSupply+" "+n.props.allData.tokenSymbol,call:function(t){var n=window.web3.eth.abi.encodeParameters(["address","uint256","string","string","uint256","uint256"],[window.voidEthereumAddress,0,t.tokenName,t.tokenSymbol,t.tokenTotalSupply,t.surveyCommunityStake?window.toDecimals(t.surveyCommunityStake,18):0]);return window.blockchainCall(window.dfoHub.dFO.methods.submit,"deployVotingToken",n).then(function(e){e=window.formatDFOLogs(e.events.Event,"DFOCollateralContractsCloned(address_indexed,address,address,address)").raw.data,t.votingToken=e[0],t.stateHolder=e[1],t.functionaltyModelsManagerAddress=e[2]})},onTransaction:function(t,n){return new Promise(function(e){var r=window.formatDFOLogs(n.logs,"DFOCollateralContractsCloned(address_indexed,address,address,address)")[0].data;t.votingToken=r[0],t.stateHolder=r[1],t.functionaltyModelsManagerAddress=r[2],e()})}},{name:"Deploy Proposals Manager",call:function(t){var n=window.web3.eth.abi.encodeParameters(["address","uint256"],[window.voidEthereumAddress,0]);return window.blockchainCall(window.dfoHub.dFO.methods.submit,"deployProposalsManager",n).then(function(e){e=window.formatDFOLogs(e.events.Event,"DFOCollateralContractsCloned(address_indexed,address,address,address)").raw.data,t.mvdFunctionalityProposalManagerAddress=e[0],t.mvdWalletAddress=e[1],t.doubleProxyAddress=e[2]})},onTransaction:function(t,n){return new Promise(function(e){var r=window.formatDFOLogs(n.logs,"DFOCollateralContractsCloned(address_indexed,address,address,address)")[0].data;t.mvdFunctionalityProposalManagerAddress=r[0],t.mvdWalletAddress=r[1],t.doubleProxyAddress=r[2],e()})}},{name:"Deploy Governance Rules",call:function(t){var n=["address","uint256","uint256","uint256","uint256","uint256","uint256","uint256","uint256"],r=[window.voidEthereumAddress,0,t.surveyLength,t.emergencySurveyLength,window.toDecimals(t.emergencySurveyStaking,18),t.surveyQuorum?window.toDecimals(t.surveyQuorum,18):0,t.surveyMaxCap?window.toDecimals(t.surveyMaxCap,18):0,t.surveyMinStake?window.toDecimals(t.surveyMinStake,18):0,t.surveySingleReward?window.toDecimals(t.surveySingleReward,18):0],i=window.web3.eth.abi.encodeParameters(n,r);return window.blockchainCall(window.dfoHub.dFO.methods.submit,"deployGovernanceRules",i).then(function(e){t.functionalitiesManagerAddress=window.formatDFOLogs(e.events.Event,"DFOCollateralContractsCloned(address_indexed,address)").raw.data[0]})},onTransaction:function(t,n){return new Promise(function(e){e(t.functionalitiesManagerAddress=window.formatDFOLogs(n.logs,"DFOCollateralContractsCloned(address_indexed,address)")[0].data[0])})}},{name:"Deploy Metadata",call:function(t){var n={};return Object.entries(t.metadata).forEach(function(e){return n[e[0]]=e[1]}),window.deployMetadataLink(n,t.functionalitiesManagerAddress)}},{name:"Deploy New DFO",call:function(t){var r=window.web3.eth.abi.encodeParameters(["address","uint256","address","address","address","address","address","address","address","string"],[window.voidEthereumAddress,0,t.votingToken,t.mvdFunctionalityProposalManagerAddress,t.stateHolder,t.functionaltyModelsManagerAddress,t.functionalitiesManagerAddress,t.mvdWalletAddress,t.doubleProxyAddress,t.ensDomain.toLowerCase()]);return window.blockchainCall(window.dfoHub.dFO.methods.submit,"deployDFO",r).then(function(e){t.response=window.formatDFOLogs(e.events.Event,"DFODeployed(address_indexed,address_indexed,address,address)").raw.data[0]}).then(function(){return n.emit("dfo/deploy",window.newContract(window.context.proxyAbi,t.response))})},actionName:"Deploy"}]))}});var DeployDFOMetadata=React.createClass({displayName:"DeployDFOMetadata",requiredScripts:["spa/dFOMetadata/edit.jsx"],getData:function(){return this.dFOMetadataEdit.getData().then(function(e){return{metadata:e}})},setData:function(t){var n=this;t&&setTimeout(function(){return n.dFOMetadataEdit.setData(t.metadata)},250)},render:function(){var t=this;return React.createElement("section",null,React.createElement("p",null,React.createElement("span",null,"2 of 4 | Metadata"),React.createElement("br",null),"What this brand new DFO is about?"),React.createElement(DFOMetadataEdit,{ref:function(n){return t.dFOMetadataEdit=n}}))}});var GovernanceRulesData=React.createClass({displayName:"GovernanceRulesData",requiredScripts:["spa/okBoomer.jsx"],getData:function(){var t=this,n=window.getData(this.domRoot),r=[];(isNaN(n.surveyLength)||n.surveyLength<=0)&&r.push("Survey Length must be a number greater than 0"),(isNaN(n.emergencySurveyLength)||n.emergencySurveyLength<=0)&&r.push("Emergency Survey Length must be a number greater than 0");var i=parseFloat(window.fromDecimals(this.props.allData.availableSupply,18).split(",").join("")),s=function(n,r,i,s,o,u){if(!n[s+"Check"]&&!u)return;var a=parseFloat(n[s].split(",").join("")),f=u?a<0:a<=0;(isNaN(a)||f||a>r)&&i.push((o||t[s+"Label"].innerHTML.split(":").join(""))+" must be a valid, positive number "+(u?"between 0 and":"less than")+" "+window.formatMoney(r))};s(n,i,r,"emergencySurveyStaking",undefined,!0),s(n,i,r,"surveyQuorum"),s(n,i,r,"surveyMaxCap"),s(n,i,r,"surveyMinStake"),s(n,i,r,"surveyCommunityStake"),s(n,i,r,"surveySingleReward");if(r.length>0)throw r;return n},renderSurveyLength:function(){return this.renderInput("InsertSurveyLength","","surveyLength","Survey Length","","number","Blocks",!1,"Every survey has a length expressed in Blocks. Here you can set the duration of Surveys for this DFO.")},renderSurveyEmergencyLength:function(){return this.renderInput("InsertSurveyEmergencyLength","","emergencySurveyLength","Emergency Length","","number","Blocks",!1,"Emergency Proposals are designed as a Faster Proposal System for bug fixing. To ensure that users have economic disincentives to use it to fraud the community, we advise setting a High Penalty Fee, because if the Proposal Fails, the Proposer will lose it.")},renderSurveyEmergencyPenalty:function(){return this.renderInput("InsertSurveyEmergencyPenalty","","emergencySurveyStaking","Penalty Fee","","text",this.props.allData.tokenSymbol,!0,"The Fee that Emergency Proposal Issuer must stake to propose it and lost if the Proposal fails.")},renderSurveyQuorum:function(){return this.renderInput("InsertSurveyQuorum","SurveyQuorumYN","surveyQuorum","Survey Quorum","SurveyQuorumHow","text",this.props.allData.tokenSymbol,!0,"The Quorum is minimum token Staken by voters in a survey to reach the success status.")},renderSurveyMaxCap:function(){return this.renderInput("InsertSurveyQuorum","SurveyQuorumYN","surveyMaxCap","Max Cap","SurveyQuorumHow","text",this.props.allData.tokenSymbol,!0,"Reaching the Max Cap, the proposal passes independently from the Survey Lenght.")},renderSurveyMinStake:function(){return this.renderInput("InsertSurveyQuorum","SurveyQuorumYN","surveyMinStake","Min Staking","","text",this.props.allData.tokenSymbol+" to Propose Updates",!0,"The minimum of Token Staked needed to create a new Proposal.")},renderSurveyCommunityStake:function(){return this.renderInput("InsertSurveyQuorum","SurveyQuorumYN","surveyCommunityStake","DFO Locked Supply","","text",this.props.allData.tokenSymbol,!0,"The amount of Voting Tokens locked in the DFO wallet (For Fixed Inflation, Liquidity Mining, Rewards and other Community Features).")},renderSurveySingleReward:function(){return this.renderInput("InsertSurveyQuorum","SurveyQuorumYN","surveySingleReward","Activity Reward","","text",this.props.allData.tokenSymbol+" of staked tokens",!0,"The amount of Voting Tokens set as a reward to the issuer for every Accepted Proposal paid automatically by the DFO Wallet.")},onCheck:function(t){var n=t.currentTarget.dataset.id,r=t.currentTarget.dataset.type;this[n].value=t.currentTarget.checked?"0":"",t.target.checked&&r==="text"&&(this[n].value+=".00"),this[n].disabled=!t.target.checked,this.calculatePercentage({currentTarget:this[n]}),t.target.checked&&this[n].focus()},inputRef:function(t,n,r,i){this[n]=t;if(!t)return;var s=this.props.allData||{};t.disabled=r?!s[n+"Check"]:!1,t.value=s[n]||"",i&&(t.onkeyup=this.calculatePercentage)},percentageRef:function(t,n){this[n+"Percentage"]=t;if(!t)return;this.calculatePercentage({currentTarget:{id:n,value:this.props&&this.props.allData&&this.props.allData[n]||""}})},calculatePercentage:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this[t.currentTarget.id+"Percentage"].innerHTML="";var n=t.currentTarget.value.split(",").join("").trim();if(n==="")return;var n=parseFloat(n);n=isNaN(n)?0:n,n=n*100/parseFloat(window.fromDecimals(this.props.allData.availableSupply,18).split(",").join("")),n=window.formatMoney(n),this[t.currentTarget.id+"Percentage"].innerHTML="("+n+"% of total "+this.props.allData.tokenSymbol+" supply)"},renderInput:function(t,n,r,i,s,o,u,a,f){var l=this,c=this;return React.createElement("div",{className:t+" GovernSelectorPage"},n&&React.createElement("input",{className:n,id:r+"Check","data-id":r,"data-type":o||"text",type:"checkbox",onChange:this.onCheck}),React.createElement("label",{htmlFor:r,ref:function(t){return c[r+"Label"]=t}},i,":"),React.createElement("input",{id:r,className:s||"GigiImputabene",ref:function(t){return c.inputRef(t,r,n,a)},type:o||"text",placeholder:"Amount",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",min:"0"}),u&&React.createElement("span",null,u),a&&React.createElement("span",{ref:function(t){return l.percentageRef(t,r)}}),React.createElement("p",{className:"OkBoomer"},f," ",React.createElement("div",{className:"BoomerTriangle"})))},renderSuite:function(t){var n=[React.createElement("p",{className:"WOWDescription"},t)];if(arguments.length>1)for(var r=1;r<arguments.length;r++)n.push(this["render"+arguments[r].firstLetterToUpperCase()]());return n},renderBasicSuite:function(){return this.renderSuite("Basic Governance Rules","surveyLength","surveyMinStake","surveyCommunityStake")},renderAdvancedSuite:function(){return this.renderSuite("Advanced Governance Rules","surveyQuorum","surveyMaxCap","surveySingleReward")},renderEmergencySuite:function(){return this.renderSuite("Emergency Governance Rules","surveyEmergencyLength","surveyEmergencyPenalty")},render:function(){return React.createElement("section",null,React.createElement("p",null,React.createElement("span",null,"3 of 3 | Governance"),React.createElement("br",null),"Its time to choose the Governance Rules! All Governance Rules can be changed anytime via proposals."),React.createElement("section",{className:"DFOGovernanceSelector"},React.createElement("ul",{className:"DFOGovernanceType"},React.createElement("section",{className:"DeployNewWhat"},this.renderBasicSuite(),this.renderAdvancedSuite(),this.renderEmergencySuite()))))}});var Subdomain=React.createClass({displayName:"Subdomain",getData:function(){var t=this;return(new Promise(function(e,n){var r=window.getData(t.domRoot),i=[];return!r.ensDomain&&i.push("ENS Domain is mandatory"),i.length>0?n(i):e(r)})).then(t.checkENS)},checkENS:function(t){var n=this;t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var r=t.target,i=(r?r.value:t.ensDomain).toLowerCase();t.ensDomain&&(t.ensDomain=i);var s=function(){return new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function s(e,o){var u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u=!1,a.prev=1,a.next=4,window.blockchainCall(window.ENSController.methods.recordExists,nameHash.hash(nameHash.normalize(i+".dfohub.eth")));case 4:u=a.sent,a.next=9;break;case 7:a.prev=7,a.t0=a["catch"](1);case 9:if(!n.ensCheck){a.next=14;break}r&&(r.value=i),n.ensCheck.innerHTML="&#"+(u?"9940":"9989")+";";if(!!t.preventDefault||!u){a.next=14;break}return a.abrupt("return",o(["ENS Name already taken"]));case 14:return a.abrupt("return",e(t));case 15:case"end":return a.stop()}},s,this,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}())};if(!r)return s();this.checkTimeout&&window.clearTimeout(this.checkTimeout),this.checkTimeout=window.setTimeout(s,700)},render:function(){var t=this;return React.createElement("section",null,React.createElement("p",null,React.createElement("span",null,"1 of 4 | Subdomain"),React.createElement("br",null),"Fist of all, Redeem your ENS subdomain. The .dfohub.eth subdomain will redirect users to the DFO's front-end persistently as long as the ethereum network exists."),React.createElement("section",{className:"DeployNewWhat"},React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"ensDomain"},"Subdomain:"),React.createElement("input",{id:"ensDomain",type:"text",onChange:this.checkENS})," ",React.createElement("span",null,".dfohub.eth")," ",React.createElement("span",{className:"SubDomainFree",ref:function(n){return t.ensCheck=n}}))))}});var Deploy=React.createClass({displayName:"Deploy",requiredScripts:["spa/deploy/subdomain.jsx","spa/deploy/votingTokenData.jsx","spa/deploy/governanceRulesData.jsx","spa/deploy/deployDFOMetadata.jsx","spa/deploy/deployDFO.jsx"],steps:["Subdomain","VotingTokenData","GovernanceRulesData","DeployDFOMetadata","DeployDFO"],getInitialState:function(){return{step:0}},deploy:function(t){this.currentElement.sequentialOps.go(t)},render:function(){var t=this;return this.data=this.data||this.steps.map(function(){}),React.createElement("section",{className:"Nav"},React.createElement("div",{className:"NavAll"},React.createElement("div",{className:"NavDeploy"},React.createElement("h2",null,"Incorporate a new ",React.createElement("b",null,"Decentralized Flexible Organization")),React.createElement(window[this.steps[this.state.step]],{allData:this.state&&this.state.allData||{},data:this.data[this.state.step],ref:function(n){return(t.currentElement=n)&&(n.setData?n.setData(t.data[t.state.step]):window.setData(n.domRoot,t.data[t.state.step]))}}),React.createElement("div",{className:"DeployActions"},this.state.step!==0&&React.createElement("a",{className:"DeployNextPrev DeployOLNYPrev",href:"javascript:;",onClick:this.controller.back},"Back"),this.state.step<this.steps.length-1&&React.createElement("a",{className:"DeployNextPrev",href:"javascript:;",onClick:this.controller.next},"Next")))))}});var VotingTokenData=React.createClass({displayName:"VotingTokenData",getData:function(){var t=this,n=window.getData(t.domRoot);return new Promise(function(e,r){var i=[];!n.tokenName&&i.push("Insert a valid Token Name"),!n.tokenSymbol&&i.push("Insert a valid Token Symbol"),(isNaN(n.tokenTotalSupply)||n.tokenTotalSupply<=0)&&i.push("Token Total Supply must be greater than 0");if(i.length>0)return r(i);n.totalSupplyWei=window.toDecimals(n.tokenTotalSupply,18),t.retrieveVotingTokensAmountForHub(n.tokenTotalSupply).then(function(t){return n.availableSupply=t.available,e(n)})})},retrieveVotingTokensAmountForHub:function(t){var n=window.toDecimals(t,18);return window.blockchainCall(window.dfoHub.dFO.methods.read,"getVotingTokenAmountForHub",window.web3.eth.abi.encodeParameter("uint256",n)).then(function(e){return e=window.web3.eth.abi.decodeParameter("uint256",e),{result:e,available:window.web3.utils.toBN(n).sub(window.web3.utils.toBN(e)).toString()}})},onChange:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this;n.tokenSymbolLabel.innerHTML=n.tokenSymbol.value;var r=parseFloat(n.totalSupply.value.split(",").join(""));r=isNaN(r)?0:r,n.retrieveVotingTokensAmountForHub(r).then(function(e){n.amountForHub.innerHTML=window.fromDecimals(e.result,18)})},retrieveAmountPercentage:function(t){t&&this.retrieveVotingTokensAmountForHub(100).then(function(e){return t.innerHTML=window.fromDecimals(e.result,18)})},render:function(){var t=this;return React.createElement("section",null,React.createElement("p",null,React.createElement("span",null,"2 of 3 | Voting Token"),React.createElement("br",null),"The Voting Token of a DFO is an ERC20 Token. The Voting Token is the key to rule the DFO functionalities and its assets. If you lose your voting tokens, there is no way to be part of the future DFO's decisions."),React.createElement("section",{className:"DeployNewWhat"},React.createElement("div",{className:"InsertDfoName"},React.createElement("label",{htmlFor:"tokenName"},"Name:"),React.createElement("input",{autocomplete:"off",id:"tokenName",type:"text"})),React.createElement("div",{className:"InsertTokenName"},React.createElement("label",{htmlFor:"tokenSymbol"},"Symbol:"),React.createElement("input",{ref:function(n){return t.tokenSymbol=n},autocomplete:"off",id:"tokenSymbol",type:"text",onChange:this.onChange})),React.createElement("div",{className:"InsertTokenSupply"},React.createElement("label",{htmlFor:"tokenTotalSupply"},"Supply:"),React.createElement("input",{id:"tokenTotalSupply",type:"number",min:"1",ref:function(n){return t.totalSupply=n},onChange:this.onChange}),React.createElement("aside",null,React.createElement("b",null,"Generation Fee:")," ",React.createElement("span",{ref:this.retrieveAmountPercentage}),"% ",React.createElement("span",null,"(",React.createElement("span",{ref:function(n){return t.amountForHub=n}},"0")," ",React.createElement("span",{ref:function(n){return t.tokenSymbolLabel=n}}),")")))))}});var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DFOElementController=function(t){var n=this;n.view=t,n.loadMenu=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,fetch("data/menuOrganization.json");case 2:return o.next=4,o.sent.json();case 4:e=o.sent,t={},s=function u(e,n){n=(typeof n=="undefined"?"undefined":_typeof(n)).toLowerCase()==="number"?null:n,i=i||!e.organization&&e.name,t[e.name]={parent:n,organization:e.organization,name:e.name,element:e.element||e.name.split(" ").join(""),scripts:e.scripts,modules:e.modules||["spa/"+(e.element||e.name).split(" ").join("").firstLetterToLowerCase()]},e.organization&&e.organization.forEach(function(t){return u(t,e)})},e.forEach(s),n.view.setState({menu:e,sections:t},function(){n.view.sectionChange(i)});case 9:case"end":return o.stop()}},r,this)}));return t}(),n.buildMenu=function(t,r){r=r||[];var i=t.parent||n.view.state.menu;return r.unshift((i.organization||i).map(function(e){return{name:e.name,selected:e.name===t.name}})),i.organization?n.buildMenu(i,r):r},n.getVoiceOrOrganizationFirstVoice=function(t){return t.organization?n.getVoiceOrOrganizationFirstVoice(n.view.state.sections[t.organization[0].name]):t}};var DFOElement=React.createClass({displayName:"DFOElement",requiredScripts:["spa/loaderMinimino.jsx"],getDefaultSubscriptions:function(){return{"section/change":this.sectionChange}},onClick:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.sectionChange(t.target.innerHTML)},sectionChange:function(t,n){var r=this.controller.getVoiceOrOrganizationFirstVoice(this.state.sections[t]),i=this;ReactModuleLoader.load({modules:r.modules,scripts:r.scripts,callback:function(){return i.setState({section:r.element,props:n||null,builtMenu:i.controller.buildMenu(r)},function(){i.forceUpdate()})}})},componentDidMount:function(){this.controller.loadMenu(),window.setHomepageLink("?addr="+this.props.element.dFO.options.address)},componentWillUnmount:function(){window.setHomepageLink()},render:function(){var t=this,n={};return this.props&&Object.entries(this.props).forEach(function(e){return n[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return n[e[0]]=e[1]}),n.props&&Object.entries(n.props).forEach(function(e){return n[e[0]]=e[1]}),delete n.props,React.createElement("section",{className:"DFOOpened"},n.builtMenu&&n.builtMenu.map(function(e,n){return React.createElement("ul",{key:n,className:"DFONavigator DFONavigatorAfter"+(n==0?"":" DFOSubNavigator")},e.map(function(e){return React.createElement("li",{key:e.name},React.createElement("a",{href:"javascript:;",onClick:t.onClick,className:e.selected?"selected":null},e.name))}))}),n.section&&React.createElement(window[n.section],n),!n.section&&React.createElement(LoaderMinimino,null))}});var DFOListController=function(t){var n=this;n.view=t,n.blockSearchSize=4e4,n.dfoDeployedEvent="DFODeployed(address_indexed,address)",n.newDfoDeployedEvent="DFODeployed(address_indexed,address_indexed,address,address)",n.loadList=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.alreadyLoaded={},(n.running=!0)&&n.loadEvents();case 2:case"end":return t.stop()}},r,this)}));return t}(),n.loadEvents=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o,u,a;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!!n.running&&t!==window.getNetworkElement("deploySearchStart")){f.next=3;break}return delete n.running,f.abrupt("return",n.view.forceUpdate());case 3:f.t0=i;if(f.t0){f.next=8;break}return f.next=7,web3.eth.getBlockNumber();case 7:f.t0=f.sent;case 8:return i=f.t0,t=t||i,s=t-n.blockSearchSize,o=window.getNetworkElement("deploySearchStart"),s=s>o?o:t,f.next=15,n.getLogs(s,t,n.newDfoDeployedEvent);case 15:return u=f.sent,f.next=18,n.getLogs(s,t,n.dfoDeployedEvent);case 18:a=f.sent,(u.length>0||a.length>0)&&setTimeout(function(){try{n.view.forceUpdate()}catch(e){}}),setTimeout(function(){return n.loadEvents(e,s,i)});case 21:case"end":return f.stop()}},r,this)}));return t}(),n.getLogs=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o,u,a,f,l,c;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,window.getDFOLogs({address:window.dfoHub.dFO.options.allAddresses,event:i,fromBlock:""+e,toBlock:""+t});case 2:s=h.sent,o=s,u=Array.isArray(o),a=0,o=u?o:o[Symbol.iterator]();case 4:if(!u){h.next=10;break}if(!(a>=o.length)){h.next=7;break}return h.abrupt("break",29);case 7:f=o[a++],h.next=14;break;case 10:a=o.next();if(!a.done){h.next=13;break}return h.abrupt("break",29);case 13:f=a.value;case 14:l=f;if(!n.alreadyLoaded[l.data[0].toLowerCase()]){h.next=17;break}return h.abrupt("continue",27);case 17:n.alreadyLoaded[l.data[0].toLowerCase()]=!0,c=l.blockNumber+"_"+l.id,h.t0=!window.list[c];if(!h.t0){h.next=27;break}return h.t1=c,h.t2=l.blockNumber,h.next=25,window.loadDFO(l.data[0]);case 25:h.t3=h.sent,window.list[c]={key:h.t1,startBlock:h.t2,dFO:h.t3};case 27:h.next=4;break;case 29:return h.abrupt("return",s);case 30:case"end":return h.stop()}},r,this)}));return t}(),n.getLatestSearchBlock=function(){return window.list&&Object.keys(window.list).length>0&&Math.max.apply(Math,Object.keys(window.list).map(function(e){return parseInt(e.split("_")[0])}))||window.getNetworkElement("deploySearchStart")}};var DFOList=React.createClass({displayName:"DFOList",requiredModules:["spa/dFOElement"],requiredScripts:["spa/loaderMini.jsx","spa/asyncValue.jsx"],getDefaultSubscriptions:function(){var t=this,n=this;return{"ethereum/update":function(){return t.forceUpdate(t.controller.loadList)},"ethereum/ping":this.refreshUserBalance,search:function(n){return t.setState({search:n,key:null})},"element/update":this.updateElement,"balances/refresh":function(){return window.refreshBalances(t,t.props.element)},"okBommer/toggle":this.toggleOkBoomer,"edit/toggle":function(r,i){return t.dfoElement.setState({edit:r},n.forceUpdate(i))}}},getInitialState:function(){return{orderByMetadata:window.localStorage.dfoListOrderByMetadata==="false"?!1:!0,order:window.localStorage.dfoListOrderMode||"sortByUnlockedMarketCap",orders:{sortByUnlockedMarketCap:"Circ. Supply",sortByLockedMarketCap:"Locked Supply",sortByTotalMarketCap:"Market Cap",sortFromLast:"Newest",sortFromFirst:"Oldest"}}},setOrder:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),window.localStorage.setItem("dfoListOrderMode",t.currentTarget.value),this.setState({order:window.localStorage.dfoListOrderMode})},setCheckOrderByMetadata:function(t){window.localStorage.setItem("dfoListOrderByMetadata",t.currentTarget.checked),this.setState({orderByMetadata:t.currentTarget.checked})},toggleOkBoomer:function(){var t=this;this.dfoElement.setState({okBoomer:!this.dfoElement.state||!this.dfoElement.state.okBoomer},function(){return t.forceUpdate()})},updateElement:function(t){delete t.updating,window.updateInfo(this,t)},componentDidMount:function(){this.controller.loadList()},componentDidUnmount:function(){this.controller.running=!1},getList:function(){try{var t=Object.keys(window.list).reverse().map(function(e){return window.list[e]}),n=0;while(n<t.length){var r=t[n];r.updating?n++:(t.splice(n,1),window.updateInfo(this,r))}t.length>1&&t.unshift(t.splice(t.length-1,1)[0]);if(this.state&&this.state.search){var i=this.state.search.toLowerCase().trim();for(var n=0;n<t.length;n++){var r=t[n];r.name&&r.name.toLowerCase().indexOf(i)===0||r.dFO.options.address.toLowerCase().indexOf(i)===0||(t.splice(n,1),n--)}t.length===1&&window.isEthereumAddress(i)&&this.setState({search:null,key:t[0].key})}return this.sortList(t)}catch(s){return[]}},sortList:function(t){var n=this[this.state.order](t);if(this.state.orderByMetadata){var r=n.filter(function(e){return e.dFO.metadataLink!==undefined&&e.dFO.metadataLink!==null});r.push.apply(r,n.filter(function(e){return e.dFO.metadataLink===undefined||e.dFO.metadataLink===null})),n=r}return n},sortFromLast:function(t){var n=Object.values(t).sort(function(e,t){var n=parseInt(e.key.substring(0,e.key.indexOf("_"))),r=t?parseInt(t.key.substring(0,t.key.indexOf("_"))):0;return n<r?1:n>r?-1:0}),r=n.indexOf(window.dfoHub);return n.splice(r,1),n.push(window.dfoHub),n},sortFromFirst:function(t){return Object.values(t).sort(function(e,t){var n=parseInt(e.key.substring(0,e.key.indexOf("_"))),r=t?parseInt(t.key.substring(0,t.key.indexOf("_"))):0;return n<r?-1:n>r?1:0})},sortByUnlockedMarketCap:function(t){return this.sortByMarketCap(t,"unlockedMarketCapDollar")},sortByLockedMarketCap:function(t){return this.sortByMarketCap(t,"lockedMarketCapDollar")},sortByTotalMarketCap:function(t){return this.sortByMarketCap(t,"totalMarketCapDollar")},sortByMarketCap:function(t,n){var r=function(t,r){var i=t[n],s=r?r[n]:0;return i<s?1:i>s?-1:0};return Object.values(t).sort(r)},componentDidUpdate:function(){this.emit("index/fullscreen",this.state&&this.state.key!==undefined&&this.state.key!==null)},refreshUserBalance:function(){var t=this;t.state&&t.state.key&&window.refreshBalances(undefined,window.list[t.state.key],!0).then(function(){return t.forceUpdate()})},render:function(){var t=this,n=this,r=this.getList();return React.createElement("section",{className:"DFOList"+(this.state&&this.state.key?" DFOListOpenAfter":"")},(!this.state||!this.state.key)&&React.createElement("section",{className:"ListOrderPanel"},React.createElement("label",{className:"ORDERINFOOOOOO"},React.createElement("p",null,"Sort by"),React.createElement("select",{onChange:this.setOrder},Object.entries(this.state.orders).map(function(e){return React.createElement("option",{key:e[0],value:e[0],selected:n.state.order===e[0]},e[1])}))),React.createElement("label",{className:"METADATAINFOOOOOO"},React.createElement("span",null,"Metadata First"),React.createElement("input",{type:"checkbox",checked:this.state.orderByMetadata,onChange:this.setCheckOrderByMetadata})),React.createElement("br",null)),React.createElement("ul",{className:"DFOLister"},r.map(function(e){return(!n.state||!n.state.key||n.state.key===e.key)&&React.createElement("li",{key:e.key,className:"DFOInfo"},React.createElement("section",{className:"DFOMAinNav"+(t.state&&t.state.key?" DFOMAinNavAfter":"")},React.createElement("section",{className:"DFOMAinNavBox"},React.createElement("a",{href:"javascript:;",onClick:function(){delete e.functionalities,n.setState({key:n.state&&n.state.key===e.key?null:e.key},n.refreshUserBalance)},className:"DFOOpener"},React.createElement("section",{className:"DFOIcon"},React.createElement(AsyncValue,null,React.createElement("img",{src:e.brandUri?window.formatLink(e.brandUri):e.icon}))),React.createElement("section",{className:"DFOName"},React.createElement(AsyncValue,null,React.createElement("h5",null,e.name))),React.createElement("section",{className:"DFOMinInfo DFOMinInfoOp"},React.createElement("h6",null,"Functions"),React.createElement(AsyncValue,null,React.createElement("h5",null,e.functionalitiesAmount))),React.createElement("section",{className:"DFOMinInfo DFOMinInfoOp"},React.createElement("h6",null,"Start Block"),React.createElement(AsyncValue,null,React.createElement("h5",null,e.startBlock))),n.state&&n.state.key===e.key&&window.walletAddress&&React.createElement("section",{className:"DFOMinInfo"},React.createElement("figure",null,React.createElement("img",{src:window.walletAvatar})),React.createElement("section",null,React.createElement("h6",null,window.walletAddress.substring(0,20),"..."),React.createElement("h5",null,React.createElement("aside",null,"Balance: ",React.createElement(AsyncValue,null,window.fromDecimals(e.myBalanceOf,e.decimals))," ",e.symbol))))),React.createElement("a",{className:"DFOENSOpener",target:"_blank",href:"https://"+(e.ens&&e.ens.toLowerCase()+"."||"")+"dfohub.eth?ensd="+(e.ens&&e.ens.toLowerCase()+"."||"")+"dfohub.eth"},React.createElement("section",{className:"DFOMinInfo"},React.createElement("h6",null,"ENS"),React.createElement(AsyncValue,null,e.ens!==undefined&&React.createElement("h5",null,e.ens&&e.ens.toLowerCase()+"."||"","dfohub.eth")))),React.createElement("a",{className:"DFOAddressOpener"},React.createElement("section",{className:"DFOMinInfo"},React.createElement("h6",null,"Token"),React.createElement(AsyncValue,null,React.createElement("h5",null,e.symbol)))),React.createElement("a",{className:"DFOAddressOpener DFOAddressOpener2",href:window.getNetworkElement("etherscanURL")+"address/"+e.dFO.options.address,target:"_blank"},React.createElement("section",{className:"DFOMinInfo"},React.createElement("h6",null,"Address"),React.createElement(AsyncValue,null,React.createElement("h5",null,e.dFO.options.address.substring(0,9)+"...")))),n.state&&n.state.key===e.key&&React.createElement("section",{className:"DFOEditKill"},React.createElement(WalletEnablerButton,{href:"javascript:;",className:"EditDFOYo"+(n.dfoElement&&n.dfoElement.state&&n.dfoElement.state.edit?" Editing":""),onClick:function(){return n.dfoElement.setState({edit:!n.dfoElement.state||!n.dfoElement.state.edit},function(){return n.forceUpdate()})}},"Edit"),React.createElement("a",{href:"javascript:;",className:"CloseDFOYo",onClick:function(){delete e.functionalities,n.setState({key:null})}},"☒")))),n.state&&n.state.key===e.key&&React.createElement(DFOElement,{element:e,ref:function(t){return n.dfoElement=t}}))}),r.length===1&&(!n.controller||n.controller.running)&&React.createElement(LoaderMini,{message:"Loading DFOs"})))}});var DFOMetadataController=function(t){var n=this;n.view=t};var DFOMetadataEdit=React.createClass({displayName:"DFOMetadataEdit",extractData:function(){var t=window.getData(this.domRoot);return t},getData:function(){return window.validateDFOMetadata(this.extractData(),!0)},setData:function(t){if(!t)return;var n={};Object.entries(t).forEach(function(e){return n[e[0]]=e[1]}),window.setData(this.domRoot,n)},proposeChange:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this;n.setState({performing:"propose"},function(){window.proposeNewMetadataLink(n.props.element,n.extractData()).then(function(){return n.emit("metadata/edit/close")}).catch(function(e){return n.emit("message",e.message||e,"error")}).finally(function(){n.setState({performing:null})})})},back:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.emit("metadata/edit/close")},componentDidMount:function(){this.setData(this.props.data)},render:function(){return React.createElement("section",{className:"DeployNewWhat "+this.props.className},React.createElement("section",{className:"DeployNewWhat3"},React.createElement("h2",{className:"METADATACHANGE"},"Propose Metadata Change"),React.createElement("a",{className:"METADATACHANGECLOSE",href:"javascript:;",onClick:this.back},"Back"),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{className:"LabelSPEC",htmlFor:"shortDescription"},"BIO:"),React.createElement("textarea",{className:"LabelSPECWRITE",id:"shortDescription",type:"text"})),React.createElement("p",{className:"OkBoomer"},"A brief description of the organization ",React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoName"},React.createElement("label",{htmlFor:"name"},"DFO Name:"),React.createElement("input",{autocomplete:"off",id:"name",type:"text"})),React.createElement("p",{className:"OkBoomer"},"The name of the organization",React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"brandUri"},"DFO Logo:"),React.createElement("input",{id:"brandUri",type:"text"})),React.createElement("p",{className:"OkBoomer"},"IPFS link to the logo of the organization (must be a .png 320 x 320 pixels)",React.createElement("a",{href:"https://docs.ipfs.io/",target:"_blank"},"IPFS Guide"),React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"logoUri"},"Token Logo:"),React.createElement("input",{id:"logoUri",type:"text"})),React.createElement("p",{className:"OkBoomer"},"IPFS link to the logo of the Voting Token (must be a .png 320 x 320 pixels)",React.createElement("a",{href:"https://docs.ipfs.io/",target:"_blank"},"IPFS Guide"),React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"discussionUri"},"Chat Link:"),React.createElement("input",{id:"discussionUri",type:"text"})),React.createElement("p",{className:"OkBoomer"},"A link to the official community of the organization (ex. Riot, Discord, Telegram)",React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"repoUri"},"Repo link:"),React.createElement("input",{id:"repoUri",type:"text"})),React.createElement("p",{className:"OkBoomer"},"A link to the official R&D repository",React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"wpUri"},"Explainer link:"),React.createElement("input",{id:"wpUri",type:"text"})),React.createElement("p",{className:"OkBoomer"},"A link to an external source that explain the plan of the organization",React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"roadmapUri"},"Roadmap link:"),React.createElement("input",{id:"roadmapUri",type:"text"})),React.createElement("p",{className:"OkBoomer"},"A link to an external source that provide the roadmap of the project",React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"externalDNS"},"External link:"),React.createElement("input",{id:"externalDNS",type:"text"})),React.createElement("p",{className:"OkBoomer"},"A link to an external webpage to use the application (if any).",React.createElement("div",{className:"BoomerTriangle"})),React.createElement("div",{className:"InsertDfoSubdomain"},React.createElement("label",{htmlFor:"externalENS"},"External ENS link:"),React.createElement("input",{id:"externalENS",type:"text"})),React.createElement("p",{className:"OkBoomer"},"A link to an external ENS webpage to use the application (if any).",React.createElement("div",{className:"BoomerTriangle"}))),this.props.showCommands&&React.createElement("section",{className:"PROPOSEmetadata"},React.createElement("br",null),(!this.state||this.state.performing!=="propose")&&React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB",href:"javascript:;",onClick:this.proposeChange},"Propose"),this.state&&this.state.performing==="propose"&&React.createElement("section",{className:"loaderMinimino"})))}});var DFOMetadata=React.createClass({displayName:"DFOMetadata",requiredScripts:["spa/dFOMetadata/edit.jsx"],getDefaultSubscriptions:function(){var t=this;return{"metadata/edit/close":function(){return t.setState({change:null})}}},renderBio:function(t){if(!t)return;var n=this,r=this.state&&this.state.more,i=window.shortenWord(n.props.element.shortDescription,300),s=r?n.props.element.shortDescription:i;t.innerHTML=s.split("\n").join("<br/>"),i.length!==n.props.element.shortDescription.length&&$(t).append($('<a href="javascript:;" class="MOREINFOSOON">'+(r?"Less":"More")+"</a>").click(function(){n.setState({more:r?!1:!0},function(){n.renderBio(t)})}))},render:function(){var t=this;return t.state&&t.state.change==="edit"?React.createElement(DFOMetadataEdit,{className:"DeployNewWhat2",element:t.props.element,data:t.props.element.metadata,showCommands:!0}):t.props.element.metadataLink?React.createElement("ul",{className:"DFOHosting"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Organization Info ",t.props.edit&&React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB"+(t.state&&t.state.change===name?" Editing":""),href:"javascript:;",onClick:function(){return t.setState({change:t.state&&t.state.change==="edit"?null:"edit"})}},"Change"))),React.createElement("li",{className:"TheDappInfo05 TheDappInfo1B"},t.props.element.brandUri&&React.createElement("img",{className:"DFObrandICON",src:window.formatLink(t.props.element.brandUri)})),t.props.element.shortDescription&&React.createElement("li",{className:"TheDappInfo2"},React.createElement("h5",{className:"DFOHostingTitle"},"BIO"),React.createElement("section",{className:"DFOTitleSection"},React.createElement("p",{className:"DFOLabelTitleInfo DFOLabelTitleInfo4",ref:this.renderBio}))),React.createElement("li",{className:"TheDappInfo1 TheDappInfo1B"},React.createElement("h5",{className:"DFOHostingTitle"},"More"),React.createElement("section",{className:"DFOTitleSection DFOTitleSectionB"},t.props.element.wpUri&&React.createElement("a",{href:window.formatLink(t.props.element.wpUri),target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"Explainer"),t.props.element.roadmapUri&&React.createElement("a",{href:window.formatLink(t.props.element.roadmapUri),target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"Roadmap"),t.props.element.repoUri&&React.createElement("a",{href:window.formatLink(t.props.element.repoUri),target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"Ext. Repo"),t.props.element.discussionUri&&React.createElement("a",{href:window.formatLink(t.props.element.discussionUri),target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"Discussion"),React.createElement("h5",{className:"DFOHostingTitle DFOHostingTitleB"},"Secure Domain"),React.createElement(AsyncValue,null,t.props.element.ens!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan LinkVisualEthscam",target:"_blank",href:"https://"+(t.props.element.ens&&t.props.element.ens.toLowerCase()+"."||"")+"dfohub.eth?ensd="+(t.props.element.ens&&t.props.element.ens.toLowerCase()+"."||"")+"dfohub.eth"},t.props.element.ens&&t.props.element.ens.toLowerCase()+"."||"","dfohub.eth"))),React.createElement("h5",{className:"DFOHostingTitle DFOHostingTitleB"},"External Domains"),t.props.element.externalDNS&&React.createElement("a",{href:window.formatLink(t.props.element.externalDNS),target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"DNS Link"),t.props.element.externalENS&&React.createElement("a",{href:window.formatLink(t.props.element.externalENS),target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"ENS Link")))):React.createElement("ul",{className:"DFOHosting"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Organization Info")),React.createElement("section",{className:"HostingCategoryTitle HostingCategoryTitle25"},React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB SpecialMetadataBTN"+(t.state&&t.state.change===name?" Editing":""),href:"javascript:;",onClick:function(){return t.setState({change:t.state&&t.state.change==="edit"?null:"edit"})}},"Add Metadata")))}});var DraftsController=function(t){var n=this;n.view=t};var Drafts=React.createClass({displayName:"Drafts",requiredModules:["spa/editor"],render:function(){return React.createElement("section",{className:"DraftsIndex"},React.createElement("section",{className:"DraftsActiveIndex"},React.createElement("h4",null,"Active Drafts"),React.createElement("ul",null,React.createElement("li",null,React.createElement("section",{className:"DraftBio"},React.createElement("h5",null,"Add New | ",React.createElement("span",null,"DAI Ceck Information")),React.createElement("p",null,"Deploy, BUIDL and Govern Decentralized Flexible Organizations, for a new Censorship-Resilient wave of Unstoppable dapps. DFOs are based on a new Microservices Style Developing, upgradable by voting, without needs to fork it. Basically, without points of failure and an entity to trust")),React.createElement("section",{className:"DraftAction"},React.createElement("a",{href:"javascript:;",className:"LinkVisualButton DraftActionTransaction"},"Deprecate"),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton DraftActionTransaction"},"Update"),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton DraftActionTransaction"},"Propose")),React.createElement("section",{className:"DraftAction"},React.createElement("a",{className:"LinkVisualButton",href:"javascript:;"},"Discussion"),React.createElement("a",{className:"LinkVisualButton",href:"javascript:;"},"Code"))))),React.createElement("section",{className:"DraftsOldIndex"},React.createElement("h4",null,"Deprecated Drafts"),React.createElement("ul",null,React.createElement("li",null,React.createElement("section",{className:"DraftBio"},React.createElement("h5",null,"Add New | ",React.createElement("span",null,"DAI Ceck Information")),React.createElement("p",null,"Deploy, BUIDL and Govern Decentralized Flexible Organizations, for a new Censorship-Resilient wave of Unstoppable dapps. DFOs are based on a new Microservices Style Developing, upgradable by voting, without needs to fork it. Basically, without points of failure and an entity to trust")),React.createElement("section",{className:"DraftAction"},React.createElement("p",null,"Deprecated Block:",React.createElement("br",null),"43865295"),React.createElement("a",{className:"LinkVisualButton",href:"javascript:;"},"Code"))))))}});var EditorController=function(t){var n=this;n.view=t,n.loadContent=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,n.view.emit("message","Retrieving Content Token..."),u.next=4,window.loadContent(e,t);case 4:s=u.sent,!n.view.props.secondCode&&!n.view.props.second&&n.view.editor.setValue(s);if(n.view.props.secondCode||n.view.props.second)o=n.view.editor.getModel(),o[i?"modified":"original"]=monaco.editor.createModel(s,"sol"),n.view.editor.setModel(o);n.view.contentTokenInput&&setTimeout(function(){return n.view.contentTokenInput.value=e}),n.view.emit("message"),u.next=14;break;case 11:u.prev=11,u.t0=u["catch"](0),n.view.emit("message",u.t0.message||u.t0,"error");case 14:case"end":return u.stop()}},r,this,[[0,11]])}));return t}(),n.tryCompile=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n.view.emit("smartContract/compilation",undefined),n.view.emit("smartContract/compiling"),a.prev=2,i=n.view.editor.getValue(),s=window.extractComment(i),Object.keys(s).map(function(e){return n.view.emit("comment/changed",s[e],e)});if(i){a.next=15;break}if(!window.isEthereumAddress(n.view.functionalityAddressValue)){a.next=13;break}return t!==!0&&n.view.emit("message","Retrieving Solidity version..."),a.next=11,window.SolidityUtilities.getSolcVersion(n.view.functionalityAddressValue);case 11:n.view.solidityVersion.value=a.sent,t!==!0&&n.view.emit("message");case 13:return n.view.emit("smartContract/compilation",undefined),a.abrupt("return");case 15:if(!window.getCompleteCode){a.next=21;break}return a.next=18,window.getCompleteCode(i);case 18:a.t0=a.sent,a.next=22;break;case 21:a.t0=i;case 22:i=a.t0;if(window.isEthereumAddress(n.view.functionalityAddressValue)){a.next=31;break}return t!==!0&&n.view.emit("message","Compiling SmartContract..."),a.next=27,SolidityUtilities.compile(i,n.view.solidityVersion.value,e);case 27:return o=a.sent,t!==!0&&n.view.emit("message"),n.view.emit("smartContract/compilation",o),a.abrupt("return",o);case 31:return t!==!0&&n.view.emit("message","Comparing SmartContracts..."),a.next=34,window.SolidityUtilities.compare(n.view.functionalityAddressValue,i);case 34:return u=a.sent,u&&(n.view.solidityVersion.value=u.solcVersion),t!==!0&&n.view.emit("message"),n.view.emit("smartContract/compilation",u),a.abrupt("return",u);case 41:a.prev=41,a.t1=a["catch"](2),n.view.emit("smartContract/compilation",undefined),t!==!0&&n.view.emit("message",a.t1.message||a.t1,"error");case 45:case"end":return a.stop()}},r,this,[[2,41]])}));return t}()};var Editor=React.createClass({displayName:"Editor",requiredScripts:["assets/plugins/monaco.editor/monaco.editor.min.js"],getDefaultSubscriptions:function(){return{"solc/version/change":this.changeSolcVersion,"editor/compile":this.tryCompile}},onEditor:function(t){var n=this,r=this;if(!window.monaco)return setTimeout(function(){return r.onEditor(t)},300);t&&(r.props.secondCode===undefined||r.props.secondCode===null)&&(r.props.second===undefined||r.props.second===null)&&(r.editor=window.monaco.editor.create(t,{language:r.props.lang||"sol",theme:"vs-dark",minimap:{enabled:!1},readOnly:r.props.readonly==="true"||r.props.firstCode!==undefined&&r.props.firstCode!==null||r.props.first!==undefined&&r.props.first!==null||r.props.link!==undefined&&r.props.link!==null,value:r.props.firstCode||""})).onDidChangeModelContent(function(){try{r.contentTokenInput&&(r.contentTokenInput.value=""),delete r.contentTokenValue}catch(e){}r.loadContentButton&&$(r.loadContentButton).removeClass("disabled");if(r.oneWay){delete r.oneWay;return}n.emit("smartContract/compilation",undefined)}),t&&(r.props.secondCode!==undefined&&r.props.secondCode!==null||r.props.second!==undefined&&r.props.second!==null)&&(r.editor=window.monaco.editor.createDiffEditor(t,{language:r.props.lang||"sol",theme:"vs-dark",minimap:{enabled:!1},readOnly:!0})).setModel({original:monaco.editor.createModel(r.props.firstCode||"","sol"),modified:monaco.editor.createModel(r.props.secondCode||"","sol")}),t&&r.props.link&&window.fetch(r.props.link,{mode:"no-cors"}).then(function(e){return e.text()}).then(function(e){return r.editor&&r.editor.setValue(e)}).catch(function(){return r.editor.setValue("Unable to show the code... Something shady is happening here.")}),t&&r.props.compileAtStart&&r.enqueue(r.tryCompile,500),t&&r.props.sourceLocationId&&r.loadContent(r.props.sourceLocationId,r.props.sourceLocation)},commentChanged:function(t,n){var r=window.putComment(this.editor.getValue(),n,t);r=window.putComment(r);var i=this;i.oneWay=!0,i.editor.setValue(r),setTimeout(function(){delete i.oneWay},300)},uploadFile:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=t.target.files[0],r=this,i=new FileReader;i.addEventListener("load",function(){r.editor.setValue(Base64.decode(i.result.substring(i.result.indexOf(","))))},!1),i.readAsDataURL(n)},onChange:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=t.target;n.dataset.change==="loadContent"&&delete this.contentTokenValue,n.dataset.change==="loadContent"&&this.loadContentButton&&$(this.loadContentButton).removeClass("disabled")},onKeyUp:function(t){if(!t||t.keyCode!==13)return this.onChange(t);t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if($(this[t.currentTarget.dataset.change+"Button"]).hasClass("disabled"))return;this[t.currentTarget.dataset.change]&&this[t.currentTarget.dataset.change](t),this.emit("editor/compile")},loadContent:function(t,n){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if(t&&t.target&&$(t.target).hasClass("disabled"))return;delete this.contentTokenValue;var r=!t||t.target?this.contentTokenInput:t,i=isNaN(r)?parseInt(r.value):r;if(isNaN(i))return;var s=this;s.controller.loadContent(i,n).then(function(){s.contentTokenValue=i,s.loadContentButton&&$(s.loadContentButton).addClass("disabled"),s.contentTokenInput&&!isNaN(r)&&s.enqueue(function(){return s.contentTokenInput.value=""}),s.tryCompile()})},tryCompile:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.controller.tryCompile(200,t)},onSolidityVersion:function(t){var n=this;if(!(n.solidityVersion=t))return;window.SolidityUtilities.getCompilers().then(function(e){return n.solidityVersion&&(n.solidityVersion.innerHTML=Object.keys(e.releases).map(function(t){return'<option value="'+e.releases[t]+'">'+t+"</option>"}).join(""))})},changeSolcVersion:function(t){this.solidityVersion.value=t},recoverData:function(){var t=this;return new Promise(function(e,n){var r=parseInt(t.contentTokenInput&&t.contentTokenInput.value||0),i=function s(){var i=t.functionalityAddress.value;if(window.isEthereumAddress(i))return e([r,i]);t.controller.deploy().then(s).catch(n)};return isNaN(r)?i():t.controller.mint().then(i).catch(n)})},componentDidMount:function(){window.editorShortcut=window.editorShortcut||$(window).bind("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e&&e.preventDefault&&e.preventDefault(!0)&&e.stopPropagation&&e.stopPropagation(!0),$.publish("editor/compile")}}),!this.props.firstCode&&this.props.first&&this.controller.loadContent(this.props.first,this.props.firstLocation),!this.props.secondCode&&this.props.second&&this.controller.loadContent(this.props.second,this.props.secondLocation,!0)},render:function(){return React.createElement("section",{className:this.props.className},!this.props.readonly&&!this.props.firstCode&&!this.props.first&&!this.props.secondCode&&!this.props.second&&React.createElement("div",{className:"CodeEditorOptionsFrom"},React.createElement("p",{className:"CodeEditorOptionsWhat"},"Load from File: "),React.createElement("input",{className:"CodeEditorOptionsLoad",type:"file",onChange:this.uploadFile,accept:this.props.lang&&"."+this.props.lang||".sol"})),(this.props.readonly&&this.props.compileAtStart||!this.props.readonly&&!this.props.firstCode&&!this.props.first&&!this.props.secondCode&&!this.props.second)&&React.createElement("div",{className:"CodeEditorOptionsCoding"},React.createElement("p",{className:"CodeEditorOptionsWhat"},"Solidity: "),React.createElement("select",{id:"selectedSolidityVersion",className:"CodeEditorOptionsSelect",ref:this.onSolidityVersion})),React.createElement("section",{className:"NewProposaleditor",ref:this.onEditor}))}});var FarmingController=function(t){var n=this;n.view=t,n.loadFixedInflationData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.view.setState({fixedInflationData:null}),e={},t=window.newContract(window.context.uniSwapV2FactoryAbi,window.context.uniSwapV2FactoryAddress),a.prev=3,a.t0=parseInt,a.next=7,window.blockchainCall(n.view.props.element.stateHolder.methods.getUint256,"fixedInflation.blockLimit");case 7:return a.t1=a.sent,e.blockLimit=(0,a.t0)(a.t1),a.t2=parseInt,a.next=12,window.blockchainCall(n.view.props.element.stateHolder.methods.getUint256,"fixedInflation.lastBlock");case 12:return a.t3=a.sent,e.lastBlock=(0,a.t2)(a.t3),e.nextBlock=e.blockLimit+e.lastBlock,a.t4=parseInt,a.next=18,window.web3.eth.getBlockNumber();case 18:return a.t5=a.sent,i=(0,a.t4)(a.t5),e.canRun=i>=e.nextBlock,e.swapCouples=[],a.t6=parseInt,a.next=25,window.blockchainCall(n.view.props.element.stateHolder.methods.getUint256,"fixedInflation.swapCouples.length");case 25:a.t7=a.sent,s=(0,a.t6)(a.t7),o=0;case 28:if(!(o<s)){a.next=110;break}return a.t8=window.web3.utils,a.next=32,window.blockchainCall(n.view.props.element.stateHolder.methods.getAddress,"fixedInflation.swapCouples["+o+"].from");case 32:return a.t9=a.sent,a.t10=a.t8.toChecksumAddress.call(a.t8,a.t9),a.t11=window.web3.utils,a.next=37,window.blockchainCall(n.view.props.element.stateHolder.methods.getAddress,"fixedInflation.swapCouples["+o+"].to");case 37:return a.t12=a.sent,a.t13=a.t11.toChecksumAddress.call(a.t11,a.t12),a.next=41,window.blockchainCall(n.view.props.element.stateHolder.methods.getUint256,"fixedInflation.swapCouples["+o+"].amount");case 41:return a.t14=a.sent,u={from:a.t10,to:a.t13,amount:a.t14},a.next=45,window.blockchainCall(t.methods.getPair,u.from,u.to);case 45:return u.pairAddress=a.sent,a.t15=u.from,a.t16=window.newContract(window.context.votingTokenAbi,u.from),a.next=50,window.loadLogo(u.from===window.wethAddress?window.voidEthereumAddress:u.from);case 50:a.t17=a.sent,u.from={address:a.t15,token:a.t16,logo:a.t17};if(u.from.address!==window.wethAddress){a.next=56;break}a.t18=18,a.next=59;break;case 56:return a.next=58,window.blockchainCall(u.from.token.methods.decimals);case 58:a.t18=a.sent;case 59:u.from.decimals=a.t18;if(u.from.address!==window.wethAddress){a.next=64;break}a.t19="Ethereum",a.next=67;break;case 64:return a.next=66,window.blockchainCall(u.from.token.methods.name);case 66:a.t19=a.sent;case 67:u.from.name=a.t19;if(u.from.address!==window.wethAddress){a.next=72;break}a.t20="ETH",a.next=75;break;case 72:return a.next=74,window.blockchainCall(u.from.token.methods.symbol);case 74:a.t20=a.sent;case 75:return u.from.symbol=a.t20,a.t21=u.to,a.t22=window.newContract(window.context.votingTokenAbi,u.to),a.next=80,window.loadLogo(u.to===window.wethAddress?window.voidEthereumAddress:u.to);case 80:a.t23=a.sent,u.to={address:a.t21,token:a.t22,logo:a.t23};if(u.to.address!==window.wethAddress){a.next=86;break}a.t24=18,a.next=89;break;case 86:return a.next=88,window.blockchainCall(u.to.token.methods.decimals);case 88:a.t24=a.sent;case 89:u.to.decimals=a.t24;if(u.to.address!==window.wethAddress){a.next=94;break}a.t25="Ethereum",a.next=97;break;case 94:return a.next=96,window.blockchainCall(u.to.token.methods.name);case 96:a.t25=a.sent;case 97:u.to.name=a.t25;if(u.to.address!==window.wethAddress){a.next=102;break}a.t26="ETH",a.next=105;break;case 102:return a.next=104,window.blockchainCall(u.to.token.methods.symbol);case 104:a.t26=a.sent;case 105:u.to.symbol=a.t26,e.swapCouples.push(u);case 107:o++,a.next=28;break;case 110:a.next=115;break;case 112:a.prev=112,a.t27=a["catch"](3),console.error(a.t27);case 115:n.view.setState({fixedInflationData:e});case 116:case"end":return a.stop()}},r,this,[[3,112]])}));return t}(),n.loadStakingData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.view.setState({stakingData:null}),t.t0=n.view,t.next=4,window.loadStakingData(n.view.props.element);case 4:t.t1=t.sent,t.t0.setState.call(t.t0,t.t1);case 6:case"end":return t.stop()}},r,this)}));return t}()};var FixedInflationEdit=React.createClass({displayName:"FixedInflationEdit",getInitialState:function(){var t={swapCouples:[],blockLimit:this.props&&this.props.fixedInflationData&&this.props.fixedInflationData.blockLimit||Object.values(window.context.blockTiers)[0].averages[1]};return this.props&&this.props.fixedInflationData&&this.props.fixedInflationData.swapCouples&&this.props.fixedInflationData.swapCouples.forEach(function(e){return t.swapCouples.push(e)}),t},deleteSwapCouple:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=parseInt(t.currentTarget.dataset.key),r=this.state.swapCouples[n];this.state.swapCouples.splice(n,1);var i=this;this.setState({swapCouples:this.state.swapCouples},function(){i.swapCoupleAmount.value=window.fromDecimals(r.amount,r.from.decimals),i.tokenPickerA.setState({selected:r.from},function(){window.loadUniswapPairs(i.tokenPickerB,r.from.address),i.tokenPickerB.setState({selected:r.to}),i.tokenPickerBLabel.style.display="block"})})},onTierChange:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=window.context.blockTiers[t.currentTarget.value].averages[1];this.setState({blockLimit:n,tier:t.currentTarget.value})},onBlockLimitChange:function(t){this.setState({blockLimit:parseInt(t.currentTarget.dataset.value)})},addSwapCouple:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.emit("message");var n=this.tokenPickerA.state&&this.tokenPickerA.state.selected;if(!n)return this.emit("message","You must select a source token","error");var r=this.tokenPickerB.state&&this.tokenPickerB.state.selected;if(!r)return this.emit("message","You must select a destination token","error");var i=this.swapCoupleAmount.value.split(",").join("");if(isNaN(parseFloat(i))||parseFloat(i)<=0)return this.emit("message","You must insert a valid positive amount","error");i=window.toDecimals(i,n.decimals);var s=this.state&&this.state.swapCouples||[],o=this;s.push({from:n,to:r,amount:i}),this.setState({swapCouples:s},function(){o.swapCoupleAmount.value="",o.tokenPickerA.setState({selected:null},function(){o.tokenPickerB.setState({selected:null}),o.tokenPickerBLabel.style.display="none"})})},proposeNewFixedInflation:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.emit("message");var n=parseInt(this.customBlockLimit&&this.customBlockLimit.value||this.state&&this.state.blockLimit);if(isNaN(n)||n<=0)return this.emit("message","You must choose a block limit","error");var r=this.state&&this.state.swapCouples||[];if(r.length===0)return this.emit("message","You must insert at least a swap couple","error");var i={blockLimit:this.state.blockLimit,swapCouples:r.map(function(e){return{from:e.from.address,to:e.to.address,amount:e.amount}})};window.fixedInflation(this,i)},render:function(){var t=this,n=this;return React.createElement("section",null,React.createElement("p",{className:"WOWDescription2"},'Before creating a Fixed Inflation Mechanism, be sure there are already existing Uniswap V2 Liquidity pools for the DFO Voting Token. Be also assured that the DFO wallet has enough funds to cover it. The min Stake is a critical feature to ensure that the maximum number of open positions are supported by the Ethereum Virtual Machine without receiving a general "Out Of Gas" error and makes it impossible for stakers to redeem their funds.'),React.createElement("section",{className:"TheDappInfo05"},React.createElement("section",{className:"BravPicciot"},React.createElement("h5",null,"Inflate:"),React.createElement("select",{onChange:this.onTierChange},Object.keys(window.context.blockTiers).map(function(e){return React.createElement("option",{key:e,value:e},e)}),React.createElement("option",{value:"Custom"},"Custom")),(!this.state||this.state.tier!=="Custom")&&React.createElement("ul",null,React.createElement("p",null,"Blocks:"),window.context.blockTiers[this.state&&this.state.tier||Object.keys(window.context.blockTiers)[0]].averages.map(function(e){return React.createElement("li",{key:e},React.createElement("label",null,React.createElement("input",{className:"AMeMoPiach",type:"radio","data-value":e,name:"blockLimit",onChange:t.onBlockLimitChange,ref:function(r){return r&&(r.checked=t.state.blockLimit===e)}}),React.createElement("span",null,React.createElement("b",null,e))))})),this.state&&this.state.tier==="Custom"&&React.createElement("section",null,React.createElement("label",null,React.createElement("p",null,"Value:"),React.createElement("input",{type:"number",min:"1",placeholder:"Custom block number...",ref:function(n){return t.customBlockLimit=n}}))))),React.createElement("section",{className:"TheDappInfo1"},React.createElement("section",{className:"BravPicciot"},React.createElement("h5",null,"Add pair:"),React.createElement("label",null,React.createElement("input",{ref:function(n){return t.swapCoupleAmount=n},type:"text",placeholder:"Amount",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$"})),React.createElement("label",null,React.createElement("p",null,"From:"),React.createElement(TokenPicker,{ref:function(n){return t.tokenPickerA=n},element:this.props.element,onChange:function(r){return(t.tokenPickerBLabel.style.display=r?"block":"none")&&window.loadUniswapPairs(n.tokenPickerB,r.address)}})),React.createElement("label",{ref:function(n){return(t.tokenPickerBLabel=n)&&(n.style.display=t.tokenPickerA&&t.tokenPickerA.state&&t.tokenPickerA.state.selected?"block":"none")}},React.createElement("p",null,"To:"),React.createElement(TokenPicker,{ref:function(n){return t.tokenPickerB=n}})),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualPropose LinkVisualButtonG LinkVisualButtonBIGGA",onClick:this.addSwapCouple},"Add Pair"))),React.createElement("ul",{className:"TheDappInfo1"},this.state.swapCouples.map(function(e,n){return React.createElement("li",{key:n,className:"TheDappInfo1 TheDappInfoSub"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle TorginiOpenCode"},React.createElement("img",{src:e.from.logo}),React.createElement("b",null,window.fromDecimals(e.amount,e.from.decimals)," ",e.from.symbol)," for ",React.createElement("img",{src:e.to.logo}),e.to.symbol),React.createElement("a",{href:"javascript;","data-key":n,onClick:t.deleteSwapCouple},React.createElement("aside",{className:"ChiudiQuella"},"X"))))})),React.createElement("section",{className:"TheDappInfo1"},React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB LinkVisualButtonBIGGAMaNNTROP",onClick:this.proposeNewFixedInflation},"Propose new Fixed Inflation")))}});var FixedInflationView=React.createClass({displayName:"FixedInflationView",requiredScripts:["spa/loaderMinimino.jsx","spa/farming/fixedInflation/edit.jsx"],calculateTimeTier:function(){return!this.props||!this.props.fixedInflationData||!this.props.fixedInflationData.blockLimit?"":window.calculateTimeTier(this.props.fixedInflationData.blockLimit)},runFixedInflation:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this;this.emit("message"),window.blockchainCall(this.props.element.dFO.methods.submit,"fixedInflation","0x").then(function(){return n.emit("fixedInflation/refresh")}).catch(function(e){return n.emit("message",e.message||e,"error")})},render:function(){var t=this,n=this.calculateTimeTier(),r=this,i={};return this.props&&Object.entries(this.props).forEach(function(e){return i[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return i[e[0]]=e[1]}),React.createElement("ul",{className:"DFOHosting DFOHostingBBBB"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Fixed Inflation"),this.props.edit&&React.createElement("a",{href:"javascript:;",onClick:function(){return r.setState({edit:!r.state||!r.state.edit})},className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"+(r.state&&r.state.edit?"EditDFOYo Editing":"")},"Edit")),(!this.state||!this.state.edit)&&(!this.props||!this.props.fixedInflationData)&&React.createElement(LoaderMinimino,null),(!this.state||!this.state.edit)&&this.props&&this.props.fixedInflationData&&this.props.fixedInflationData.swapCouples.length===0&&React.createElement("h4",null,"No Fixed inflation data ",React.createElement("a",{href:"javascript:;",onClick:function(){return r.emit("edit/toggle",!0,function(){return r.setState({edit:!0})})},className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"},"Create")),(!this.state||!this.state.edit)&&this.props&&this.props.fixedInflationData&&this.props.fixedInflationData.swapCouples&&this.props.fixedInflationData.swapCouples.length>0&&this.props.fixedInflationData.swapCouples.map(function(e){return React.createElement("li",{className:"TheDappInfo1 TheDappInfoYY TheDappInfoSub"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("span",{className:"DFOLabelTitleInfosmall"},n),React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("img",{src:e.from.logo}),React.createElement("b",null,window.fromDecimals(e.amount,e.from.decimals)," ",e.from.symbol)," for ",React.createElement("img",{src:e.to.logo}),e.to.symbol),React.createElement("span",{className:"DFOLabelTitleInfosmall"},"🦄 ",React.createElement("b",null,"V2")," ",React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"address/"+e.pairAddress,target:"_blank"},window.shortenWord(e.pairAddress,16))),t.props.fixedInflationData&&t.props.fixedInflationData.nextBlock&&React.createElement("span",null,"Next Block: ",React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"block/countdown/"+t.props.fixedInflationData.nextBlock,target:"_blank"},"#",t.props.fixedInflationData.nextBlock)),t.props.fixedInflationData&&t.props.fixedInflationData.canRun&&React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualButtonB",onClick:t.runFixedInflation},"Execute")))}),this.props&&this.props.edit&&this.state&&this.state.edit&&React.createElement(FixedInflationEdit,i))}});var StakingEdit=React.createClass({displayName:"StakingEdit",requiredScripts:["spa/loaderMinimino.jsx","spa/uniswapTokenPicker.jsx"],getInitialState:function(){var t={tiers:[],pairs:[],blockNumber:this.props.blockTiers&&Object.values(this.props.blockTiers)[0].averages[1]||null};return t},deleteTier:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=parseInt(t.currentTarget.dataset.index),r=this.state.tiers[n];this.state.tiers.splice(n,1);var i=this;this.setState({tiers:this.state.tiers,tier:r.tierKey,blockNumber:r.tierKey==="Custom"?r.blockNumber:null},function(){i.customBlockNumber&&(i.customBlockNumber.value=r.blockNumber),i.rewardSplitTranchesInput&&(i.rewardSplitTranchesInput.value=r.rewardSplitTranche),!i.customBlockNumber&&(i.domRoot.children().find('input[type="radio"][data-value="'+r.blockNumber+'"]')[0].checked=!0),i.hardCapInput.value=window.fromDecimals(r.hardCap,i.props.element.decimals),i.minCapInput.value=window.fromDecimals(r.minCap,i.props.element.decimals),i.rewardPercentageInput.value=window.formatMoney(r.percentage)})},addTier:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.emit("message");var n="0";try{n=window.toDecimals(this.hardCapInput.value.split(",").join(""),this.props.element.decimals)}catch(t){}if(isNaN(parseInt(n))||parseInt(n)<=0)return this.emit("message","Hard Cap must be a valid positive number","error");var r="0";try{r=window.toDecimals(this.minCapInput.value.split(",").join(""),this.props.element.decimals)}catch(t){}if(isNaN(parseInt(r))||parseInt(r)<=0)return this.emit("message","Min Cap must be a valid positive number","error");var i="0";try{i=(this.customBlockNumber?this.customBlockNumber.value:this.domRoot.children().find('input[type="radio"]:checked')[0].dataset.value).split(",").join("")}catch(t){}if(isNaN(parseInt(i))||parseInt(i)<=0)return this.emit("message","Block Limit must be a valid positive number","error");var s=0;try{s=this.rewardSplitTranchesInput?this.rewardSplitTranchesInput.value:this.props.blockTiers[this.state.tier].weeks}catch(t){}if(this.rewardSplitTranchesInput&&(isNaN(parseInt(s))||parseInt(s)<=0))return this.emit("message","Split amount must be a valid positive number","error");var o=0;try{o=parseFloat(this.rewardPercentageInput.value.split(",").join(""))}catch(t){}if(isNaN(o)||o<=0)return this.emit("message","Percentage must be a positive number","error");var u=this.state&&this.state.tiers||[];u.push({hardCap:n,minCap:r,blockNumber:i,percentage:o,time:window.calculateTimeTier(i),tierKey:window.getTierKey(i),rewardSplitTranche:s});var a=this;this.setState({tiers:u,blockNumber:null,tier:null},function(){a.customBlockNumber&&(a.customBlockNumber.value=""),a.rewardSplitTranchesInput&&(a.rewardSplitTranchesInput.value=""),a.hardCapInput.value="",a.minCapInput.value="",a.rewardPercentageInput.value="",a.onTierChange({currentTarget:{value:Object.keys(a.props.blockTiers)[0]}})})},onTierChange:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this.props.blockTiers[t.currentTarget.value].averages[1];this.setState({blockNumber:n,tier:t.currentTarget.value})},onBlockLimitChange:function(t){this.setState({blockNumber:parseInt(t.currentTarget.dataset.value)})},onNewPair:function(t){if(!t)return;this.pairPicker&&this.pairPicker.setState({selected:null});var n=this.state&&this.state.pairs||[];for(var r=n,i=Array.isArray(r),s=0,r=i?r:r[Symbol.iterator]();;){var o;if(i){if(s>=r.length)break;o=r[s++]}else{s=r.next();if(s.done)break;o=s.value}var u=o;if(u.address===t.address)return}n.push(t),this.setState({pairs:n})},deletePair:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.state.pairs.splice(parseInt(t.currentTarget.dataset.index),1),this.setState({pairs:this.state.pairs})},proposeNewStaking:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.emit("message");var n=parseInt(this.startBlockInput.value);if(isNaN(n)||n<0)return this.emit("message","Start Block must be a number greater than 0","error");var r=this.state&&this.state.pairs||[];if(r.length===0)return this.emit("message","Please select at least a pair","error");var i=this.state&&this.state.tiers||[];if(i.length===0)return this.emit("message","You must add at least a tier","error");for(var s=i,o=Array.isArray(s),u=0,s=o?s:s[Symbol.iterator]();;){var a;if(o){if(u>=s.length)break;a=s[u++]}else{u=s.next();if(u.done)break;a=u.value}var f=a;f.timeWindow=f.blockNumber;var l=window.calculateMultiplierAndDivider(f.percentage);f.rewardMultiplier=l[0],f.rewardDivider=l[1]}window.stake(this,n,r.map(function(e){return e.address}),i)},onHardCapChange:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.hardCapChangeTimeout&&window.clearTimeout(this.hardCapChangeTimeout);var n=this;this.hardCapChangeTimeout=window.setTimeout(function(){var e=window.formatMoney(parseFloat(n.hardCapInput.value.split(",").join())/1e3);isNaN(parseFloat(e.split(",").join("")))&&(e="0.00"),n.minCapInput.value=e},300)},componentDidMount:function(){var t=this;window.loadOffChainWallets().then(function(e){return t.setState({tokensList:e})}),this.onTierChange({currentTarget:{value:Object.keys(this.props.blockTiers)[0]}})},render:function(){var t=this,n=this;return n.props.stakingData?React.createElement("section",null,React.createElement("p",{className:"WOWDescription2"},'Before creating a Liquidity Mining Mechanism, be sure there are already existing Uniswap V2 Liquidity pools for the DFO Voting Token. Be also assured that the DFO wallet has enough funds to cover the rewards. The min Stake is a critical feature to ensure that the maximum number of open positions are supported by the Ethereum Virtual Machine without receiving a general "Out Of Gas" error and makes it impossible for stakers to redeem their funds.'),React.createElement("section",{className:"TheDappInfo1"},React.createElement("section",{className:"DFOTitleSection BravPicciot"},React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("b",null,"Start Block:")),React.createElement("input",{type:"number",ref:function(r){return(t.startBlockInput=r)&&!n.firstTime&&(n.firstTime=!0)&&(r.value="0")},min:"0"}),React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("b",null,"Pairs:")),this.state.pairs.map(function(e,t){return React.createElement("a",{key:e.address,href:"javascript:;",className:"DFOHostingTag"},React.createElement("img",{src:e.logo}),e.symbol,React.createElement("a",{className:"ChiudiQuella ChiudiQuellaGigi",href:"javascript:;","data-index":t,onClick:n.deletePair},"X"))}),!1,React.createElement(UniswapTokenPicker,{exceptFor:this.props.element.token.options.address,ref:function(n){return t.pairPicker=n},tokensList:this.state.tokensList,onChange:this.onNewPair}))),React.createElement("section",{className:"TheDappInfo2"},React.createElement("section",{className:"DFOTitleSection BravPicciot"},React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("b",null,"Tiers:")),React.createElement("section",{className:"OVaglio"},React.createElement("p",null,"Locking Period:"),React.createElement("select",{onChange:this.onTierChange},Object.keys(n.props.blockTiers).map(function(e){return React.createElement("option",{key:e,value:e,selected:n.state.tier===e},e)}),React.createElement("option",{value:"Custom",selected:n.state.tier==="Custom"},"Custom")),(!this.state||this.state.tier!=="Custom")&&React.createElement("ul",null,React.createElement("p",null,"Blocks:"),n.props.blockTiers[this.state&&this.state.tier||Object.keys(n.props.blockTiers)[0]].averages.map(function(e){return React.createElement("li",{key:e},React.createElement("label",null,React.createElement("input",{className:"AMeMoPiach",type:"radio","data-value":e,name:"blockNumber",onChange:t.onBlockLimitChange,ref:function(r){return r&&(r.checked=t.state.blockNumber===e)}}),React.createElement("span",null,React.createElement("b",null,e))))})),this.state&&this.state.tier==="Custom"&&React.createElement("section",null,React.createElement("label",null,React.createElement("p",null,"Value:"),React.createElement("input",{type:"number",min:"1",placeholder:"Custom block number...",ref:function(n){return t.customBlockNumber=n}})),React.createElement("label",null,React.createElement("p",null,"Tranches amount:"),React.createElement("input",{type:"number",min:"1",ref:function(n){return t.rewardSplitTranchesInput=n}}))),this.state&&this.state.tier&&this.state.tier!=="Custom"&&React.createElement("p",null,n.props.blockTiers[this.state.tier].weeks," Tranches (Weeks)")),React.createElement("section",{className:"OVaglio"},React.createElement("label",null,React.createElement("p",null,"Max Simultaneous Stake:"),React.createElement("input",{ref:function(n){return t.hardCapInput=n},type:"text",placeholder:"Amount",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",onKeyUp:this.onHardCapChange})),React.createElement("label",null,React.createElement("p",null,"Min to Stake:"),React.createElement("input",{ref:function(n){return t.minCapInput=n},type:"text",placeholder:"Amount",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",disabled:!0})),React.createElement("label",null,React.createElement("p",null,"Reward Percentage:"),React.createElement("aside",null,React.createElement("input",{ref:function(n){return t.rewardPercentageInput=n},type:"number",min:"0",placeHoder:"Insert a percentage"})," %"))),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualPropose LinkVisualButtonG LinkVisualButtonBIGGA",onClick:this.addTier},"Add"))),this.state&&this.state.tiers&&React.createElement("ul",null,this.state.tiers.map(function(e,t){return React.createElement("li",{key:e.blockNumber,className:"TheDappInfoAll TheDappInfoSub"},React.createElement("section",{className:"TheDappInfo1"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("img",{src:n.props.element.logo}),React.createElement("b",null,n.props.element.symbol)," for ",e.time),React.createElement("h5",{className:"DFOHostingTitle"},"Reward: ",React.createElement("b",{className:"DFOHostingTitleG"},window.formatMoney(e.percentage),"%")),React.createElement("p",{className:"DFOHostingTitle"},"Distribution: ",React.createElement("b",null,"Weekly")),React.createElement("p",{className:"DFOLabelTitleInfosmall"},"DEX: 🦄 V2 "))),n.state&&n.state.pairs&&React.createElement("section",{className:"TheDappInfo1"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("b",null,"Pairs:")),n.state.pairs.map(function(e){return React.createElement("a",{key:e.address,href:window.getNetworkElement("etherscanURL")+"token/"+e.address,target:"_blank",className:"DFOHostingTag"},React.createElement("img",{src:e.logo}),e.symbol)}))),React.createElement("section",{className:"TheDappInfo05"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("span",{className:"DFOHostingTitleS"},"Min Cap:"),React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("b",null,window.fromDecimals(e.minCap,n.props.element.decimals))),React.createElement("span",{className:"DFOHostingTitleS DFOHostingTitleG"},"Hard Cap:"),React.createElement("h5",{className:"DFOHostingTitle DFOHostingTitleG"},React.createElement("b",null,window.fromDecimals(e.hardCap,n.props.element.decimals))))),React.createElement("a",{className:"ChiudiQuella ChiudiQuellaGigi","data-index":t,onClick:n.deleteTier},"X"))})),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB LinkVisualButtonBIGGAMaNNTROPAAAA",onClick:this.proposeNewStaking},"Propose New Liquidity Mining")):React.createElement(LoaderMinimino,null)}});var StakingView=React.createClass({displayName:"StakingView",requiredScripts:["spa/loaderMinimino.jsx","spa/farming/staking/edit.jsx"],requiredModules:["spa/stake"],getDefaultSubscriptions:function(){var t=this;return{"stake/close":function(){return t.setState({stakeToShow:null})}}},showStake:function(t,n){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.setState({stakeToShow:n})},stopStake:function(t,n){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),window.stopStake(this,n.stakingManager.options.address)},componentDidMount:function(){var t=this,n=!t.props.element.logo;t.props.element.logo=t.props.element.logo||t.props.element.logoUri||t.props.element.logoURI,t.props.element.logo&&n&&t.forceUpdate(),!t.props.element.logo&&window.loadLogo(t.props.element.token.options.address).then(function(e){t.props.element.logo=e,t.forceUpdate()})},render:function(){var t=this,n=this,r={};return this.props&&Object.entries(this.props).forEach(function(e){return r[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return r[e[0]]=e[1]}),r.stakeToShow?React.createElement(Stake,{element:r.element,stakingData:r.stakeToShow}):React.createElement("ul",{className:"DFOHosting HostingCategoryTitleYYY"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Liquidity Mining"),this.props.edit&&React.createElement("a",{href:"javascript:;",onClick:function(){return n.setState({edit:!n.state||!n.state.edit})},className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"+(n.state&&n.state.edit?"EditDFOYo Editing":"")},n.state&&n.state.edit?"Close":"New")),(!this.state||!this.state.edit)&&(!this.props||!this.props.stakingData)&&React.createElement(LoaderMinimino,null),(!this.state||!this.state.edit)&&this.props&&this.props.stakingData&&this.props.stakingData.length===0&&React.createElement("h4",null,"No Staking data ",React.createElement("a",{href:"javascript:;",onClick:function(){return n.emit("edit/toggle",!0,function(){return n.setState({edit:!0})})},className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"},"Create")),(!this.state||!this.state.edit)&&this.props&&this.props.stakingData&&this.props.stakingData.map(function(e){var r=[];return r.push.apply(r,e.tiers.map(function(r){return React.createElement("li",{key:r.blockNumber,className:"TheDappInfoAll TheDappInfoSub KingJulianAlwaysWatchingYou"},React.createElement("section",{className:"TheDappInfo1 TheDappInfoYY"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("img",{src:window.formatLink(n.props.element.logo)}),React.createElement("b",null,n.props.element.symbol)," for ~",r.tierKey),React.createElement("h5",{className:"DFOHostingTitle"},"Reward: ",React.createElement("b",{className:"DFOHostingTitleG"},window.formatMoney(r.percentage),"%")),React.createElement("p",{className:"DFOHostingTitle TheDappInfoX"},"Distribution: ",React.createElement("b",null,"Weekly")),React.createElement("p",{className:"DFOHostingTitle TheDappInfoX"},"Total Lock: ",React.createElement("b",null,r.blockNumber)," Blocks"),React.createElement("p",{className:"DFOLabelTitleInfosmall TheDappInfoX"},"DEX: 🦄 V2 "))),React.createElement("section",{className:"TheDappInfo1 TheDappInfoYY"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("b",null,"Pairs:")),e.pairs.map(function(e){return React.createElement("a",{key:e.address,href:window.getNetworkElement("etherscanURL")+"token/"+e.address,target:"_blank",className:"DFOHostingTag"},React.createElement("img",{src:window.formatLink(e.logo)}),e.symbol)}))),React.createElement("section",{className:"TheDappInfo1 TheDappInfoYY"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("span",{className:"DFOHostingTitleS"},"Staked:"),React.createElement("h5",{className:"DFOHostingTitle"},React.createElement("b",null,window.fromDecimals(r.staked,n.props.element.decimals))),React.createElement("span",{className:"DFOHostingTitleS DFOHostingTitleG"},"Available:"),React.createElement("h5",{className:"DFOHostingTitle DFOHostingTitleG"},React.createElement("b",null,window.fromDecimals(r.remainingToStake,n.props.element.decimals))),React.createElement("a",{href:"javascript:;",onClick:function(r){return t.showStake(r,e)},className:"LinkVisualButton LinkVisualPropose LinkVisualButtonG"},"🥩 ",e.active?"Stake":"Redeem"),t.props&&t.props.edit&&e.active&&React.createElement("a",{href:"javascript:;",onClick:function(r){return t.stopStake(r,e)},className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"},"Stop"))))})),r}),this.props&&this.props.edit&&this.state&&this.state.edit&&React.createElement(StakingEdit,r))}});var Farming=React.createClass({displayName:"Farming",requiredScripts:["spa/loaderMini.jsx","spa/okBoomer.jsx","spa/loaderMinimino.jsx","spa/farming/fixedInflation/view.jsx","spa/farming/staking/view.jsx","spa/loaderMini.jsx"],getDefaultSubscriptions:function(){return{"staking/refresh":this.controller.loadStakingData,"fixedInflation/refresh":this.controller.loadFixedInflationData}},componentDidMount:function(){var t=this;t.setState({cumulativeLoading:!0},function(){Promise.all([t.controller.loadFixedInflationData(),t.controller.loadStakingData()]).then(function(){t.setState({cumulativeLoading:!1})})})},render:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),React.createElement("section",{className:"DFOOverview"},(!this.state||this.state.cumulativeLoading)&&[React.createElement("br",null),React.createElement("br",null),React.createElement(LoaderMini,null)],this.state&&this.state.cumulativeLoading===!1&&React.createElement(StakingView,t),this.state&&this.state.cumulativeLoading===!1&&React.createElement(FixedInflationView,t))}});var FunctionsController=function(t){var n=this;n.view=t,n.loadFunctionalities=function(){var t=n.view.props.element;if(!n.view||!n.view.mountDate)return;var r=n.view.mountDate,i=function(){function i(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function s(e){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=JSON,o.next=3,window.blockchainCall(n.view.props.element.functionalitiesManager.methods.functionalityToJSON,e);case 3:o.t1=o.sent,i=n.view.state.functionalities[e]=o.t0.parse.call(o.t0,o.t1);if(!!n.view&&n.view.mountDate===r&&t===n.view.props.element){o.next=7;break}return o.abrupt("return");case 7:return o.prev=7,o.t2=window,o.next=11,window.blockchainCall(window.newContract(window.context.IFunctionalityAbi,i.location).methods.getMetadataLink);case 11:o.t3=o.sent,i.metadataLink=o.t2.formatLink.call(o.t2,o.t3);if(!!n.view&&n.view.mountDate===r&&t===n.view.props.element){o.next=15;break}return o.abrupt("return");case 15:return o.next=17,window.AJAXRequest(i.metadataLink);case 17:i.metadata=o.sent;if(!!n.view&&n.view.mountDate===r&&t===n.view.props.element){o.next=20;break}return o.abrupt("return");case 20:Object.entries(i.metadata).forEach(function(e){return i[e[0]]=e[1]}),i.description=window.extractHTMLDescription(i.description||i.code),o.next=26;break;case 24:o.prev=24,o.t4=o["catch"](7);case 26:i.inputParameters=[];try{i.inputParameters=i.methodSignature.split(i.methodSignature.substring(0,i.methodSignature.indexOf("(")+1)).join("").split(")").join(""),i.inputParameters=i.inputParameters?i.inputParameters.split(","):[]}catch(u){}o.prev=28;if(i.code){o.next=40;break}o.t5=i.code;if(o.t5){o.next=35;break}return o.next=34,window.loadContent(i.sourceLocationId,i.sourceLocation);case 34:o.t5=o.sent;case 35:i.code=o.t5;if(!!n.view&&n.view.mountDate===r&&t===n.view.props.element){o.next=38;break}return o.abrupt("return");case 38:i.codeName!=="getEmergencySurveyStaking"&&i.sourceLocationId===0&&delete i.code,i.description=window.extractHTMLDescription(i.code);case 40:o.next=44;break;case 42:o.prev=42,o.t6=o["catch"](28);case 44:return o.next=46,window.searchForCodeErrors(i.location,i.code,i.codeName,i.methodSignature,i.replaces,!0);case 46:i.compareErrors=o.sent,i.compareErrors&&i.compareErrors.length>0&&console.log(i.name,i.compareErrors.join(" - "));if(!!n.view&&n.view.mountDate===r&&t===n.view.props.element){o.next=50;break}return o.abrupt("return");case 50:n.view.setState({functionalities:n.view.state.functionalities}),setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!!n.view&&n.view.mountDate===r&&t===n.view.props.element){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,window.searchForCodeErrors(i.location,i.code,i.codeName,i.methodSignature,i.replaces,!0);case 4:i.compareErrors=s.sent,i.compareErrors&&i.compareErrors.length>0&&console.log(i.codeName,i.sourceLocation,i.sourceLocationId,i.compareErrors.join(" - "));if(!!n.view&&n.view.mountDate===r&&t===n.view.props.element){s.next=8;break}return s.abrupt("return");case 8:n.view.setState({functionalities:n.view.state.functionalities});case 9:case"end":return s.stop()}},a,this)})),300);case 52:case"end":return o.stop()}},s,this,[[7,24],[28,42]])}));return i}();n.view.state.functionalityNames.forEach(i)},n.call=function(){function t(t,n,r,i,s,o){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i,s,o,u){var a;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i&&u&&e!=="read"&&s.unshift(0),i&&u&&s.unshift(window.voidEthereumAddress),i&&(s=window.web3.eth.abi.encodeParameters(i,s)),f.next=5,window.blockchainCall(n.view.props.element.dFO.methods[e],t,s);case 5:return a=f.sent,f.abrupt("return",e==="read"?n.stringifyParameters(window.web3.eth.abi.decodeParameters(o,a)):"");case 7:case"end":return f.stop()}},r,this)}));return t}(),n.stringifyParameters=function(t){var n=[],r=parseInt(t.__length__);for(var i=0;i<r;i++)n.push(t[i+""]);return JSON.stringify(n)},n.deleteFunction=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e&&e.preventDefault&&e.preventDefault(!0)&&e.stopPropagation&&e.stopPropagation(!0),t=[{name:"Publishing Proposal...",call:function(t){var r=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.blockchainCall(t.element.dFO.methods.newProposal,"",t.emergency||!1,window.voidEthereumAddress,0,window.voidEthereumAddress,!1,"","",!1,!1,t.codeName);case 2:t.transaction=r.sent,t.element.minimumStaking||(n.view.emit("loader/toggle",!1),n.view.emit("message","Proposal Sent!","info"),n.view.emit("section/change","Proposals"));case 4:case"end":return r.stop()}},i,r)}))()}}],!isNaN(parseInt(n.view.props.element.minimumStaking))&&parseInt(n.view.props.element.minimumStaking)>0&&t.push({name:"Sending Initial "+window.fromDecimals(n.view.props.element.minimumStaking,n.view.props.element.decimals)+" "+n.view.props.element.symbol+" for Staking",call:function(t){var r=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.blockchainCall(t.element.token.methods.transfer,t.transaction.events.Proposal.returnValues.proposal,window.numberToString(t.element.minimumStaking));case 2:n.view.emit("loader/toggle",!1),n.view.emit("message","Proposal Sent!","info"),n.view.emit("section/change","Proposals");case 5:case"end":return r.stop()}},i,r)}))()}}),i.abrupt("return",n.view.emit("loader/toggle",!0,t,{title:'Propose to delete Functionalty "'+e.currentTarget.dataset.codename+'"',element:n.view.props.element,codeName:e.currentTarget.dataset.codename}));case 4:case"end":return i.stop()}},r,this)}));return t}()};var Functions=React.createClass({displayName:"Functions",requiredModules:["spa/editor"],requiredScripts:["spa/loaderMini.jsx"],getInitialState:function(){return{functionalities:{},functionalityNames:[]}},change:function e(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.target,r=this,e=function i(){if(!r.state.functionalities[n.dataset.codename].sourceLocationId===undefined)return setTimeout(i,100);r.emit("section/change","New Proposal",{codeName:n.dataset.codename,sourceLocation:r.state.functionalities[n.dataset.codename].sourceLocation,sourceLocationId:r.state.functionalities[n.dataset.codename].sourceLocationId,"delete":n.dataset.delete})};e()},componentDidMount:function(){var t=this;t.mountDate=(new Date).getTime()+"_"+Math.random();try{window.loadFunctionalityNames(t.props.element).then(function(e){return t.setState({functionalityNames:t.props.element.functionalityNames=e},t.controller.loadFunctionalities)}).catch(function(e){return window.loadFunctionalities(t.props.element,function(){return t.setState({functionalityNames:t.props.element.functionalityNames,functionalities:t.props.element.functionalities})}).then(function(){return t.forceUpdate()})})}catch(n){window.loadFunctionalities(t.props.element,function(){return t.setState({functionalities:t.props.element.functionalities})}).then(function(){return t.forceUpdate()})}},componentWillUnmount:function(){delete this.mountDate},onClick:function(t,n){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var r=$(t.target).hasClass("RwWrite")?"submit":"read",i=[],s=this;this[n.codeName+"Input"]&&this[n.codeName+"Input"].children().each(function(e,t){var n=$($(t).children()[0]),r=n.val();n.is('input[type="number"]')&&(r=parseInt(r)),n.is("select")&&(r=r==="true"),r!==undefined&&i.push(r)});var s=this,o=s.state&&s.state.response||[];delete o[n.codeName],this.emit("message"),s.setState({response:o},function(){s.controller.call(r,n.codeName,n.inputParameters,i,n.returnAbiParametersArray,n.needsSender).then(function(e){var t=s.state&&s.state.response||{};t[n.codeName]=e,s.setState({response:t})}).catch(function(e){return s.emit("message",e.message||e,"error")})})},renderInput:function(t){var n=this;if(t.isInternal||!t.methodSignature)return;return React.createElement("ul",{ref:function(r){return t.inputParameters&&t.inputParameters.length>0&&(n[t.codeName+"Input"]=$(r))}},t.inputParameters.map(function(e,n){return(!t.needsSender||n>(t.submitable?1:0))&&React.createElement("li",{key:e.codeName},(e==="bytes32"||e==="address"||e==="string"||e.indexOf("uint")==0)&&React.createElement("input",{type:e.indexOf("uint")==0?"number":"text",min:"0",placeholder:e==="address"?"address":""}),e==="bool"&&React.createElement("select",null,React.createElement("option",{value:"false",selected:!0},"false"),React.createElement("option",{value:"true"},"true")))}))},render:function(){var t=this,n=this;return React.createElement("section",{className:"DFOOverview"},n.state.functionalityNames&&React.createElement("ul",{className:"DFOFunctionList"},Object.keys(n.state.functionalities).map(function(e){var r=n.state.functionalities[e];if(!r)return null;var i=0,s=!0;r.description=r.description||(r.methodSignature||r.code?"Loading Description...":"No description available");try{i=r.description.length>window.descriptionWordLimit?window.descriptionWordLimit:r.description.length,s=t.state&&t.state.more===r.codeName}catch(o){}return React.createElement("li",{key:r.codeName},React.createElement("section",{className:"DFOFunctionEmoji"},r.compareErrors===undefined&&React.createElement(LoaderMinimino,null),r.compareErrors&&React.createElement("h4",{title:!r.compareErrors||r.compareErrors.length===0?"":(r.compareErrors[0].indexOf("data not available")!==-1?"":"There are some problems in this functionality:\n")+r.compareErrors.join(";\n").trim(),ref:function(t){return t&&(t.innerHTML=!r.compareErrors||r.compareErrors.length===0?"&#128736;&#65039;":"&#9763;&#65039;")}})),React.createElement("section",{className:"DFOFunctionTitle"},React.createElement("h5",null,r.codeName)),React.createElement("section",{className:"DFOFunctionDescription"},r.description&&React.createElement("p",null,React.createElement("span",{ref:function(t){return t&&(t.innerHTML=r.description.substring(0,s?r.description.length:i))}}),!s&&i<r.description.length&&["... ",React.createElement("a",{href:"javascript:;",onClick:function(){return t.setState({more:r.codeName})}},"More")],s&&i<r.description.length&&[" ",React.createElement("a",{href:"javascript:;",onClick:function(){return t.setState({more:null})}},"Less")])),React.createElement("section",{className:"DFOBtnViewSection"},React.createElement("section",{className:"DFOFxTools"},r.code&&React.createElement("a",{className:"LinkVisualButton"+(t.state&&t.state.opened==="code_"+r.codeName?" Editing":""),href:"javascript:;",onClick:function(){return n.setState({opened:n.state&&n.state.opened==="code_"+r.codeName?null:"code_"+r.codeName})}},"Code"),r.methodSignature&&React.createElement("a",{className:"LinkVisualButton"+(t.state&&t.state.opened==="query_"+r.codeName?" Editing":""),href:"javascript:;",onClick:function(){return n.setState({opened:n.state&&n.state.opened==="query_"+r.codeName?null:"query_"+r.codeName})}},"Query")),r.methodSignature&&n.props.edit&&React.createElement("section",{className:"DFOFxTools"},React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB",href:"javascript:;","data-codename":r.codeName,onClick:t.change},"Change"),r.codeName!=="getMinimumBlockNumberForSurvey"&&r.codeName!=="getMinimumBlockNumberForEmergencySurvey"&&r.codeName!=="getEmergencySurveyStaking"&&r.codeName!=="checkSurveyResult"&&React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB",href:"javascript:;","data-codename":r.codeName,onClick:t.controller.deleteFunction},"Delete")),r.location&&React.createElement("a",{className:"LinkVisualClassic",href:window.getNetworkElement("etherscanURL")+"address/"+r.location,target:"_blank"},"Contract")),t.state&&t.state.opened==="code_"+r.codeName&&React.createElement("section",{className:"DFOFunctionQuery"},React.createElement(Editor,{firstCode:r.code})),t.state&&t.state.opened==="query_"+r.codeName&&React.createElement("section",{className:"DFOFunctionQuery"},React.createElement("section",{className:"DFOFunctionQueryFX"},React.createElement("section",{className:"DFOFunctionMethod"},React.createElement("h6",null,r.methodSignature)),React.createElement("section",{className:"DFOBtnReadSection"},t.renderInput(r),!r.isInternal&&r.submitable&&React.createElement("a",{href:"javascript:;",className:"LinkVisualButton RwWrite",onClick:function(t){return n.onClick(t,r)}},"Submit"),!r.isInternal&&!r.submitable&&React.createElement("a",{href:"javascript:;",className:"LinkVisualButton RwRead",onClick:function(t){return n.onClick(t,r)}},"Read"),r.isInternal&&React.createElement("span",{className:"RwIntern"},"Internal")),n.state&&n.state.response&&n.state.response[r.codeName]&&React.createElement("section",{className:"DFOBtnResultSection"},React.createElement("h6",null,n.state.response[r.codeName])))))})),(!n.state.functionalityNames||n.state.functionalityNames.length===0)&&(!this.props.element.functionalities||Object.keys(this.props.element.functionalities).length!==this.props.element.functionalitiesAmount)&&React.createElement(LoaderMini,{message:"Loading Functionalities"}))}});var GhostLoader=React.createClass({displayName:"GhostLoader",render:function(){return React.createElement("img",{src:"assets/img/ghostload.gif"})}});var GlobalCatcher=React.createClass({displayName:"GlobalCatcher",render:function(){return React.createElement("div",null,React.createElement("div",{style:{"text-align":"center",width:"100%","margin-top":"150px"}},React.createElement("span",{style:{display:"inline-block","font-size":"250px"}},"😱")),React.createElement("div",{style:{color:"white",width:"100%","text-align":"center"}},"An error occurred",this.props.error?': "'+(this.props.error.message||this.props.error)+'"':"",". Please ",React.createElement("a",{href:"javascript:;",onClick:function(){return window.location.reload()}},"refresh")," the page."))}});var GovernanceController=function(t){var n=this;n.view=t};var Governance=React.createClass({displayName:"Governance",requiredModules:["spa/proposals"],getInitialState:function(){return{section:"Proposals"}},onClick:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.sectionChange(t.target.innerHTML)},sectionChange:function(t,n){this.domRoot.children().find("a").each(function(e,n){((n=$(n).removeClass("selected")).html()===t||n.data("alternatives")&&n.data("alternatives").indexOf(t)!==-1)&&n.addClass("selected")});var r=t.split(" ").join(""),i=this;ReactModuleLoader.load({modules:["spa/"+r.firstLetterToLowerCase()],callback:function(){return i.setState({section:r,props:n||null})}})},render:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.section=t.subSection||t.section,React.createElement("section",{className:"DFOOpened"},React.createElement("ul",{className:"DFONavigator DFOSubNavigator DFONavigatorAfter"},React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.onClick},"Rules")),React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.onClick,className:"selected"},"Proposals")),React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.onClick},"New Proposal"))),React.createElement(window[t.section],t))}});var IndexController=function(t){var n=this;n.view=t,n.tryLoadDFO=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(isEthereumAddress(e)){r.next=2;break}throw"Insert a valid DFO Address";case 2:return t=window.newContract(window.context.proxyAbi,e),r.next=5,window.blockchainCall(t.methods.getFunctionalitiesAmount);case 5:r.t0=r.sent;if(r.t0!==0){r.next=8;break}return r.abrupt("return","This Address is not a DFO");case 8:return r.abrupt("return",t);case 9:case"end":return r.stop()}},n,this)}));return t}(),n.tryLoadStaking=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.addressBarParams.staking){t.next=2;break}return t.abrupt("return");case 2:n.view.setState({optionalPage:{component:NoWeb3Loader}},_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=window.newContract(window.context.StakeAbi,window.web3.utils.toChecksumAddress(window.addressBarParams.staking)),delete window.addressBarParams.staking,a.t0=window,a.t1=window.context.DoubleProxyAbi,a.next=6,window.blockchainCall(e.methods.doubleProxy);case 6:return a.t2=a.sent,t=a.t0.newContract.call(a.t0,a.t1,a.t2),a.t3=t.options.address,a.t4=window,a.next=12,window.blockchainCall(t.methods.proxy);case 12:return a.t5=a.sent,a.next=15,a.t4.loadDFO.call(a.t4,a.t5);case 15:return a.t6=a.sent,a.t7=window.getNetworkElement("deploySearchStart"),i={key:a.t3,dFO:a.t6,startBlock:a.t7},a.next=20,window.updateInfo(undefined,i);case 20:a.t8=i.logo||i.logoURI||i.logoUri;if(a.t8){a.next=25;break}return a.next=24,window.loadLogo(i.token.options.address);case 24:a.t8=a.sent;case 25:return i.logo=a.t8,a.next=28,window.blockchainCall(i.stateHolder.methods.getBool,"staking.transfer.authorized."+e.options.address.toLowerCase());case 28:return s=a.sent,o={},Object.keys(window.context.blockTiers).splice(2,Object.keys(window.context.blockTiers).length).forEach(function(e){return o[e]=window.context.blockTiers[e]}),a.t9=i,a.next=34,window.setStakingManagerData(e,o,s);case 34:a.t10=a.sent,u={element:a.t9,stakingData:a.t10},ReactModuleLoader.load({modules:["spa/stake"],callback:function(){n.view.setState({optionalPage:{component:window.Stake,props:u}})}});case 37:case"end":return a.stop()}},r,this)})));case 3:case"end":return t.stop()}},r,this)}));return t}()};var Index=React.createClass({displayName:"Index",requiredModules:["spa/deploy","spa/dFOList"],requiredScripts:["spa/messages.jsx","spa/loader.jsx","spa/walletEnablerButton.jsx","spa/noWeb3Loader.jsx"],getDefaultSubscriptions:function(){var t=this;return{"dfo/deploy":this.onDFO,"dfo/deploy/cancel":function(){return t.setState({deploy:null})},"ethereum/ping":function(){return t.forceUpdate()},"index/fullscreen":this.onFullscreen,"stake/close":function(){return t.state&&t.state.optionalPage&&t.setState({optionalPage:null})}}},onFullscreen:function(t){this.header.removeClass("HeaderTop"),t&&this.header.addClass("HeaderTop"),window.onScrollFunction&&window.onScrollFunction()},onDFO:function(t){var n=this;n.setState({dFO:t,deploy:null},function(){n.address&&(n.address.value=t.options.address)&&this.load({target:{dataset:{timeout:"0"}}}),window.history.pushState({},"",window.location.protocol+"//"+window.location.hostname+(window.location.port&&window.location.port!=="443"&&window.location.port!=="80"?":"+window.location.port:"")+"/?addr="+t.options.address)})},load:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.target.dataset.timeout;n=n?parseInt(n):700,this.loadTimeout&&window.clearTimeout(this.loadTimeout);var r=this;r.loadTimeout=setTimeout(function(){r.setState({dFO:null,deploy:null},function(){r.onFullscreen(),r.emit("search",r.address.value)})},n)},deploy:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=this;n.setState({dFO:null,deploy:n.state&&n.state.deploy?!1:!0},function(){return n.onFullscreen(!0)})},componentDidMount:function(){var t="";try{t=window.addressBarParams.addr}catch(n){}isEthereumAddress(t)&&(this.address.value=t)&&this.load({target:{dataset:{timeout:"700"}}}),this.controller.tryLoadStaking()},toggleLightMode:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0),$(t.target).html("&#"+(this.domRoot.toggleClass("DarkMode").hasClass("DarkMode")?"128161":"127769")+";"),window.localStorage.setItem("lightMode",this.domRoot.hasClass("DarkMode")?"false":"true")},compareGotcha:function(t){t&&setTimeout(function(){t.innerHTML='<a href="javascript:;" onclick="$(this).parent().parent().parent().hide()">Gotcha!</a>'},3e3)},render:function(){var t=this;return React.createElement("div",{className:"Main"+(window.localStorage.lightMode==="true"?"":" DarkMode")},React.createElement("section",{ref:function(n){return t.header=$(n)},className:"Explorer"},React.createElement("header",{className:"HeaderDFO"},React.createElement("ul",null,React.createElement("li",{className:"BrandLi"},React.createElement("a",{href:"javascript:;",onClick:function(){return window.location.reload()}},"👻",React.createElement("span",{className:"BODL"},"DFO"),React.createElement("span",null,"hub"))," ",React.createElement("a",{className:"BrandLiInfo",href:"https://dfohub.com",target:"_blank"}," ℹ")),React.createElement("li",{className:"SearchLi"},React.createElement("input",{ref:function(n){return t.address=n},placeholder:"Search by Name or Address",onChange:this.load}),React.createElement("a",{href:"javascript:;",type:"button","data-timeout":"0",onClick:this.load},React.createElement("div",{className:"search"},React.createElement("div",{className:"search__circle"}),React.createElement("div",{"class":"search__rectangle"})))),React.createElement("li",{className:"DeployLi"},React.createElement(WalletEnablerButton,{className:"LinkVisualButton LinkVisualButtonB"+(this.state&&this.state.deploy?" Editing":""),onClick:this.deploy},this.state&&this.state.deploy?"Back":"New"),React.createElement("a",{className:"ChangeViewDtoW",href:"javascript:;",onClick:this.toggleLightMode,ref:function(t){return t&&(t.innerHTML="&#"+(window.localStorage.lightMode==="true"?"127769":"128161")+";")}},"🌙")))),(!this.state||!this.state.optionalPage)&&React.createElement("div",{className:"BETABANNER"},React.createElement("section",null,React.createElement("h1",null,"👻"),React.createElement("h2",null,"Welcome to the DFOhub ",React.createElement("span",null,window.context.dappVersion)),React.createElement("p",null,"To follow our Developing and Bug Fixing: ",React.createElement("a",{href:"https://www.notion.so/dfohub/DFOhub-Project-05787c6c7e2f49c5bd3a767c020583e8",target:"_blank"},"DevStatus")," If you want to be an active part of our Developing, we scheduled some fancy rewards! Read the ",React.createElement("a",{href:"https://www.notion.so/dfohub/Community-Guidelines-a03ceeab28254eb3944ab85320be70de",target:"_blank"},"Community Guidelines")," and join our ",React.createElement("a",{href:"https://discord.gg/B9V9CM4",target:"_blank"},"Discord Server")),React.createElement("section",{className:"BugUpdateBunner TheDappInfoX"},React.createElement("h2",null,"🛎 Dev Notes:"),React.createElement("p",null,"ENS Integration is working! But due to the early state of ENS, we're discussing an ",React.createElement("a",{href:"https://github.com/MetaMask/metamask-extension/pull/7740",target:"_blank"},"Improvement Proposal")," with the Metamask team, to manage DFO's ENS in a decentralized way. In the meantime, Metamask can't redirect the ENS properly.")),React.createElement("section",{className:"BugUpdateBunner TheDappInfoXYZ"},React.createElement("h2",null,"Simple View"),React.createElement("p",null,"During the R&D for the new DFOhub front-end V2, you can use this simplified front-end experience. Here you can use every DFOhub features (farming, voting etc), but to propose updates, you need to use a desktop.")),React.createElement("section",{ref:this.compareGotcha},React.createElement("span",{className:"loaderMinimino"})))),this.state&&this.state.deploy&&React.createElement(Deploy,null),(!this.state||!this.state.deploy)&&React.createElement(DFOList,null)),this.state&&this.state.optionalPage&&React.createElement(this.state.optionalPage.component,this.state.optionalPage.props),React.createElement(Messages,null),React.createElement(Loader,null))}});var Loader=React.createClass({displayName:"Loader",requiredScripts:["spa/sequentialOps.jsx"],getDefaultSubscriptions:function(){return{"loader/toggle":this.onToggle}},onToggle:function(t,n,r){this.setState({sequentialOps:n,initialContext:r,visible:t===!0||t===!1?t:this.state&&this.state.visible?!this.state.visible:!0})},render:function(){return React.createElement("div",{className:"MainLoader",style:{display:this.state&&this.state.visible?"block":"none"}},React.createElement("article",{className:"MainLoaderAll"},this.state&&this.state.sequentialOps&&React.createElement(SequentialOps,{auto:"true",start:"true",showCancelButton:"true",initialContext:this.state.initialContext},this.state.sequentialOps)))}});var LoaderMini=React.createClass({displayName:"LoaderMini",render:function(){return React.createElement("div",{className:"LoaderChainPull"},React.createElement("div",{className:"lds-ellipsis"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null)),this.props.message&&React.createElement("h5",null,this.props.message))}});var LoaderMinimino=React.createClass({displayName:"LoaderMinimino",render:function(){return React.createElement("section",{className:"loaderMinimino"})}});var Messages=React.createClass({displayName:"Messages",getDefaultSubscriptions:function(){return{message:this.onMessage}},onMessage:function(t,n){this.setState({message:t,className:n})},clear:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0),this.onMessage()},render:function(){var t=this;return React.createElement("div",{className:"MainMsg"+(this.state&&this.state.className?" MainMsg_"+this.state.className:""),style:{display:this.state&&this.state.message?"block":"none"}},this.state&&this.state.message&&typeof this.state.message=="string"&&React.createElement("p",{ref:function(n){return n&&(n.innerHTML=t.state.message)}}),this.state&&this.state.message&&typeof this.state.message!="string"&&this.state.message.message&&React.createElement("p",{ref:function(n){return n&&(n.innerHTML=t.state.message.message)}}),this.state&&this.state.message&&typeof this.state.message!="string"&&this.state.message.map&&this.state.message.map(function(e){return React.createElement("p",{key:e,ref:function(n){return n&&(n.innerHTML=e)}})}),React.createElement("a",{href:"javascript:;",onClick:this.clear},"Close"))}});var NewProposalController=function(t){var n=this;n.view=t,n.publish=function(){var t=n.checkData();if(!t)return;t.functionalitySourceId=n.view.editor.contentTokenValue,t.functionalityAddress=n.view.editor.functionalityAddressValue,t.editor=n.view.editor,t.element=n.view.props.element,t.title="New Proposal",window.showProposalLoader(t)},n.checkData=function(){n.view.emit("message","");var t=[],r=window.getData(n.view.domRoot);try{r.sourceCode=n.view.editor.editor.getValue().trim()}catch(i){}try{r.functionalityMethodSignature=r.functionalityMethodSignature.split("_"),r.functionalityMethodSignature.splice(0,1),r.functionalityOutputParameters=r.functionalityMethodSignature.splice(r.functionalityMethodSignature.length-1,1)[0],r.functionalityMethodSignature=r.functionalityMethodSignature.join("_")}catch(i){}r.selectedContract=n.view.selectedContract;var s=r.functionalityMethodSignature&&window.checkMandatoryFunctionalityProposalConstraints(r.selectedContract.abi,r.functionalityMethodSignature==="callOneTime(address)");s&&t.push.apply(t,s),!r.functionalityReplace&&!r.functionalityName&&r.functionalityMethodSignature!=="callOneTime(address)"&&t.push("Functionality name is mandatory"),r.functionalityName&&!r.selectedContract&&t.push("You need to insert a valid SmartCotract code and choose a method."),r.selectedContract&&r.selectedContract.bytecode==="0x"&&t.push("You need to insert a valid SmartCotract code and choose a method."),(r.functionalityName||!r.functionalityName&&!r.functionalityReplace)&&!r.functionalityDescription&&t.push("Description is mandatory"),(r.functionalityName||!r.functionalityName&&!r.functionalityReplace)&&!(new RegExp(window.urlRegex)).test(r.functionalityLink)&&t.push("Link must be a mandatory URL"),r.functionalityName&&r.functionalityReplace&&!r.functionalityDescriptionUpdate&&t.push("Update description is mandatory");try{r.constructorArguments=window.getData(n.view.constructorArguments,!0)}catch(i){t.push("Constructor arguments are mandatory")}if(t.length>0)throw t.join("\n");if(!n.view.needsSender.disabled&&!n.view.needsSender.checked&&!confirm("The 'Needs Sender' check is useful to preserve the original msg.sender of the Transaction, are you sure you want to continue without flagging it?"))return;return r},n.loadStandardTemplate=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.SolidityUtilities.getCompilers();case 2:return e=s.sent,t=Object.keys(e.releases)[0],s.next=6,window.AJAXRequest("data/MicroserviceTemplate.sol");case 6:i=s.sent,i=i.format(t);try{n.view.editor.editor.setValue(i)}catch(o){};case 9:case"end":return s.stop()}},r,this)}));return t}()};var NewProposal=React.createClass({displayName:"NewProposal",requiredModules:["spa/editor"],getDefaultSubscriptions:function(){var t=this;return{"smartContract/compilation":this.onCompilation,"smartContract/compiling":this.onCompiling,"comment/changed":function(n,r){return t[r.toLowerCase()].value=n.trim()}}},onCompiling:function(){$(this.compileButton).addClass("disabled"),$(this.publishButton).addClass("disabled")},compile:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),!$(t.currentTarget).hasClass("disabled")&&(this.editor.functionalityAddressValue=this.functionalityAddress&&this.functionalityAddress.value),!$(t.currentTarget).hasClass("disabled")&&this.editor.tryCompile()},onType:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=t.target,r=n.dataset.type,i=this,s="onTypeTimeout_"+r;i[s]&&clearTimeout(i[s]),i[s]=setTimeout(function(){i.editor.commentChanged(n.value.trim(),r)},900)},onCompilation:function(t){var n=this;$(this.compileButton).removeClass("disabled");try{if(JSON.stringify(this.contracts.name?[this.contracts.abi]:Object.keys(this.contracts).map(function(e){return n.contracts[e].abi}))===JSON.stringify(t.name?[t.abi]:Object.keys(t).map(function(e){return t[e].abi})))return}catch(r){}delete this.selectedContract,delete this.contractConstructor,this.contracts=t;var i=this.functionalityContracts.value;this.functionalityContracts.innerHTML="";if(!this.contracts){this.functionalityContractMethods.innerHTML="",this.onMethod();return}$(this.publishButton).removeClass("disabled"),t.name?this.functionalityContracts.innerHTML='<option value="'+t.name+'">'+t.name+"</option>":this.functionalityContracts.innerHTML=Object.keys(t).map(function(e){return t[e].bytecode!=="0x"&&'<option value="'+e+'">'+e+"</option>"}).join(""),i&&t[i]&&(this.functionalityContracts.value=i),this.onContract(),this.onMethod()},onContract:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=this;delete n.contractConstructor;if(this.functionalityContracts.innerHTML==="")return;var r=parseInt(this.functionalityContractMethods.value),i="";try{i=this.functionalityContractMethods.children[r].innerHTML}catch(t){}this.functionalityContractMethods.innerHTML="",this.selectedContract=this.contracts.name?this.contracts:this.contracts[this.functionalityContracts.value];if(!this.selectedContract)return;var s=this.selectedContract.abi;this.functionalityContractMethods.innerHTML=s.map(function(e,t){var s=!1;try{s=t===r&&e.name===i}catch(o){}if(e.type==="constructor")return;if(e.name==="onStart"&&e.stateMutability!=="view"&&e.stateMutability!=="pure"&&e.inputs.length===2&&e.inputs[0].type==="address"&&e.inputs[1].type==="address")return;if(e.name==="onStop"&&e.stateMutability!=="view"&&e.stateMutability!=="pure"&&e.inputs.length===1&&e.inputs[0].type==="address")return;if(e.name==="getMetadataLink"&&e.stateMutability==="view"&&e.inputs.length===0&&e.outputs.length===1&&e.outputs[0].type==="string")return;var u=(e.type==="function"?e.name+"("+e.inputs.map(function(e){return e.type}).join(",").trim()+")":"").split(" ").join("").split(",)").join(")"),a=(e.type!=="function"?"[]":JSON.stringify(e.outputs.map(function(e){return e.type}))).split(" ").join("");return e.type==="constructor"&&(n.contractConstructor=e),e.type!=="function"?"":"<option value='"+t+"_"+u+"_"+a+"'"+(s?" selected":"")+">"+u+"</option>"}).join(""),this.functionalityContractMethods.innerHTML||(delete this.selectedContract,delete this.contractConstructor),this.onMethod(),this.contracts.name&&delete this.contractConstructor,this.forceUpdate()},onMethod:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0),this.submitable.checked=!1,this.internal.checked=!1,this.needsSender.checked=!1,this.internal.disabled=!0,this.needsSender.disabled=!0;if(this.functionalityContractMethods.innerHTML==="")return;var n=this.functionalityContractMethods.value.split("_")[1];this.internal.disabled=n==="callOneTime(address)";var r=(this.contracts.name?this.contracts:this.contracts[this.functionalityContracts.value]).abi[this.functionalityContractMethods.value.split("_")[0]];this.submitable.checked=r.stateMutability!=="view"&&r.stateMutability!=="pure",this.submitable.checked&&r.inputs.length>=2&&(this.needsSender.disabled=r.inputs[0].type!=="address"||r.inputs[1].type!=="uint256"),!this.submitable.checked&&r.inputs.length>=1&&(this.needsSender.disabled=r.inputs[0].type!=="address")},publish:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);if($(this.publishButton).hasClass("disabled"))return;try{this.controller.publish()}catch(t){this.emit("message",t.message||t,"error")}},componentDidMount:function(){var t=this;t.onReplace(),window.loadFunctionalities(t.props.element,undefined,!0);try{blockchainCall(t.props.element.functionalitiesManager.methods.functionalityNames).then(JSON.parse).then(function(e){return t.props.element.functionalityNames=e}).then(function(){return t.forceUpdate()}).catch(function(e){})}catch(n){}},onReplace:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=this.functionalityReplace.value,r=$(this.updateDescriptionLabel).hide(),i=$(this.update).hide();n&&r.show()&&i.show();try{!n&&this.editor.commentChanged(this.update.value="","Update")}catch(t){}},getFunctionality:function(){try{for(var t in this.props.element.functionalities){var n=this.props.element.functionalities[t];if(n.codeName===this.props.codeName)return n}}catch(r){}},onEditor:function(t){var n=this,r=this;this.editor=t;if(!this.editor||this.props.delete)return;try{var i=this.getFunctionality();i&&this.enqueue(function(){return n.editor.loadContent(i.sourceLocationId,i.sourceLocation)})}catch(s){}r.props.oneTimeProposal&&window.SolidityUtilities.getCompilers().then(function(e){return Object.keys(e.releases)[0]}).then(function(e){var t=JSON.parse(JSON.stringify(window.context.oneTimeProposalTemplate));t.unshift(""),t.unshift("pragma solidity ^"+e+";"),r.enqueue(function(){return r.editor.editor.setValue(t.join("\n"))},300)}),setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.editor.editor.getValue().trim()===""){t.next=2;break}return t.abrupt("return");case 2:r.controller.loadStandardTemplate();case 3:case"end":return t.stop()}},o,this)})),600)},render:function(){var t=this,n=this,r=this.getFunctionality();return React.createElement("section",{className:"NewProposalIndex"},React.createElement("section",{className:"TheDappInfoXYZ"},React.createElement("section",{className:"AllertBanner"},React.createElement("p",null,"To propose changes, open this website with a desktop or a tablet"))),React.createElement("section",{className:"AllertBanner TheDappInfoX"},React.createElement("p",null,"If you're deploying a new perpetual functionality, be sure to add both onStart(address,address) and onStop(address) into the Smart Contract.")),React.createElement("section",{className:"SideViewCode TheDappInfoX"},React.createElement(Editor,{ref:this.onEditor,className:"NewProposalCode",readonly:this.props.delete||this.props.oneTimeCode,sourceLocation:this.props.sourceLocation,sourceLocationId:this.props.sourceLocationId,firstCode:this.props.oneTimeCode,compileAtStart:this.props.oneTimeCode!==undefined&&this.props.oneTimeCode!==null})),React.createElement("section",{className:"DFOItOptions TheDappInfoX"},React.createElement("p",null,"Name"),React.createElement("input",{className:"ProposeTitle",id:"functionalityName",type:"text",ref:function(n){return n&&(n.disabled=r||t.props.delete||t.props.oneTimeCode||t.props.oneTimeProposal?!0:!1)&&(n.value=!t.props.delete&&r&&r.codeName||"")}}),React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ProposeLink",id:"functionalityLink","data-type":"Discussion",type:"text",ref:function(n){return t.discussion=n},onChange:this.onType}),React.createElement("p",null,"Function Description"),React.createElement("textarea",{id:"functionalityDescription","data-type":"Description",ref:function(n){return(t.description=n)&&(n.disabled=t.props.oneTimeCode!==undefined&&t.props.oneTimeCode!==null)},onChange:this.onType}),React.createElement("p",{ref:function(n){return t.updateDescriptionLabel=n}},"Update Description"),React.createElement("textarea",{id:"functionalityDescriptionUpdate","data-type":"Update",ref:function(n){return t.update=n},onChange:this.onType}),React.createElement("select",{id:"contractName",ref:function(n){return t.functionalityContracts=n},onChange:this.onContract}),React.createElement("select",{id:"functionalityMethodSignature",ref:function(n){return t.functionalityContractMethods=n},onChange:this.onMethod}),React.createElement("label",{htmlFor:"functionalitySubmitable"},"Submitable"),React.createElement("input",{id:"functionalitySubmitable",type:"checkbox",ref:function(n){return t.submitable=n},disabled:!0}),React.createElement("label",{htmlFor:"functionalityInternal"},"Internal"),React.createElement("input",{id:"functionalityInternal",type:"checkbox",ref:function(n){return t.internal=n},disabled:!0}),React.createElement("label",{htmlFor:"functionalityNeedsSender"},"Needs Sender"),React.createElement("input",{id:"functionalityNeedsSender",type:"checkbox",ref:function(n){return t.needsSender=n},disabled:!0}),React.createElement("label",{htmlFor:"replacesCheck"},"Function replacing"),React.createElement("input",{id:"replacesCheck",type:"checkbox",ref:function(n){return n&&(n.checked=n.disabled=r||t.props.delete||t.props.oneTimeCode||t.props.oneTimeProposal?!0:!1)&&(n.checked=t.props.oneTimeProposal?!1:n.checked)},onChange:function(n){t.functionalityReplace.value="",t.functionalityReplace.disabled=!n.currentTarget.checked,n.currentTarget.checked?$(t.functionalityReplace).show():$(t.functionalityReplace).hide()}}),React.createElement("select",{id:"functionalityReplace",onChange:this.onReplace,ref:function(n){t.functionalityReplace=n,n&&(n.value=r&&r.codeName||""),n&&r&&r.codeName?$(n).show():$(n).hide()},disabled:!0},React.createElement("option",{value:""},"Replacing Functionality"),this.props.element.functionalityNames&&this.props.element.functionalityNames.map(function(e){return React.createElement("option",{key:e,value:e},e)})),this.contractConstructor&&this.contractConstructor.inputs.length>0&&React.createElement("div",null,React.createElement("p",null,"Constructor arguments"),React.createElement("ul",{ref:function(n){return t.constructorArguments=$(n)}},this.contractConstructor.inputs.map(function(e){return React.createElement("li",{key:e.name},(e.type==="bytes32"||e.type==="address"||e.type==="string"||e.type.indexOf("uint")==0)&&React.createElement("input",{type:e.type.indexOf("uint")==0?"number":"text",min:"0",placeholder:e.name}),e.type==="bool"&&React.createElement("select",null,React.createElement("option",{value:"false",selected:!0},"false"),React.createElement("option",{value:"true"},"true")))}))),React.createElement("div",null,React.createElement("a",{ref:function(n){return t.compileButton=n},className:"LinkVisualButton"+(this.props.delete?" disabled":""),href:"javascript:;",onClick:this.compile},"Compile"),React.createElement(WalletEnablerButton,{inactiveClassName:"LinkVisualButtonPre",className:this.props.delete?"":"disabled",onClick:this.publish,ref:function(n){return t.publishButton=n&&n.domRoot[0]||undefined}},"Publish")),React.createElement("h4",null,"Advanced"),React.createElement("label",{htmlFor:"emergency"},"Emergency"),React.createElement("input",{id:"emergency",type:"checkbox",onChange:function(){return $(t.publishButton).toggleClass("emergency")}}),React.createElement("label",{htmlFor:"deployed"},"Deployed Contract?"),React.createElement("input",{id:"deployed",type:"checkbox",ref:function(n){return t.deployedCheckbox=n},onChange:function(){t.deployed.toggle(),t.editor&&(t.editor.functionalityAddressValue=""),t.functionalityAddress&&(t.functionalityAddress.value="")}}),React.createElement("section",{ref:function(n){return(t.deployed=$(n))&&n&&(!t.deployedCheckbox||!t.deployedCheckbox.checked)&&t.deployed.hide()}},React.createElement("input",{id:"functionalityAddress",placeholder:"Smart Contract Address",type:"text",ref:function(n){return t.functionalityAddress=n},onChange:function(){t.onCompilation(),t.editor.functionalityAddressValue=""}}),React.createElement("a",{onClick:this.compile},"Load"))))}});var NoWeb3Loader=React.createClass({displayName:"NoWeb3Loader",render:function(){return React.createElement("article",{className:"NoWeb3",style:{position:"fixed","z-index":"300000",top:"0",width:"100%",height:"100%",background:"white","margin-top":"0"}},React.createElement("h1",null,React.createElement("img",{src:"assets/img/ghostload.gif"})),React.createElement("section",{className:"DisclamerWeb3"},React.createElement("h2",null,"DFOhub")))}});var OkBoomer=React.createClass({displayName:"OkBoomer",render:function(){return this.props.okBoomer?React.createElement("p",{className:"OkBoomer"},this.props.okBoomer&&this.props.children,React.createElement("div",{className:"BoomerTriangle"})):React.createElement("span",{style:{display:"none"}})}});var OverviewController=function(t){var n=this;n.view=t,n.indexChange=function(t){t.index=t.index||0,t.link=t.link||"";if(!t.indexFile&&!t.link)return n.view.emit("message","You must specify an index or a Link to proceed","error");if(t.index===n.view.props.element.index&&t.link===n.view.props.element.link)return;t.linkCheck&&n.changeDistributed(t),t.indexCheck&&n.changeDecentralized(t)},n.changeDistributed=function(t){if(t.link!==n.view.props.element.link&&!(new RegExp(window.urlRegex)).test(t.link))return n.view.emit("message","Inserted link is not a valid URL","error");var r=["DFO Hub - Utilities - Get Distributed Index","This functionality provides the link page which locates the DFO"],i=["Setting Distributed Index value to "+t.link];!n.view.props.element.link&&r.push(i[0]),t.link||(i=["Clearing Distributed Index"]);var s=t.link?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("string memory").split("value").join('\\"'+t.link+'\\"')):undefined;window.sendGeneratedProposal(n.view.props.element,{title:i[0],functionalityName:t.link?"getLink":"",functionalityMethodSignature:t.link?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:t.link&&n.view.props.element.link?"getLink":"",functionalityOutputParameters:t.link?'["string"]':""},s,undefined,r,i)},n.changeDecentralized=function(t){var r=["DFO Hub - Utilities - Get Decentralized Index","This functionality provides the Base64 index containing the Decentralized Index page representing this DFO"],i=["Setting Decentralized Index value"];t.index||(i=["Clearing Decentralized Index"]);var s=t.index?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("uint256")):undefined,o=isNaN(t.index)?window.split(t.index):undefined;window.sendGeneratedProposal(n.view.props.element,{title:i[0],functionalityName:t.index?"getIndex":"",functionalityMethodSignature:t.index?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:!t.index||n.view.props.element.index?"getIndex":"",functionalityOutputParameters:t.index?'["uint256"]':"",sequentialOps:o&&[{name:"Minting Index page ("+o.length+" Txns)",call:function(t){var s=this;return _asyncToGenerator(regeneratorRuntime.mark(function u(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.mint(o);case 2:t.index=s.sent,t.updates=["Setting Decentralized Index value to "+t.index],!n.view.props.element.index&&r.push(i[0]),t.template=JSON.parse(JSON.stringify(t.template).split("value").join(window.numberToString(t.index)));case 6:case"end":return s.stop()}},u,s)}))()}}]},s,undefined,r,i)},n.proposalLengthChange=function(t){if(t.proposalLength===parseInt(n.view.props.element.blocks))return;if(!t.proposalLength||isNaN(t.proposalLength)||t.proposalLength<1)return n.view.emit("message","You must specify a number greater than 0 to proceed","error");var r=JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getMinimumBlockNumberForSurvey()").split("type").join("uint256").split("value").join(t.proposalLength));window.sendGeneratedProposal(n.view.props.element,{title:"Updating Proposal Length",functionalityName:"getMinimumBlockNumberForSurvey",functionalitySubmitable:!1,functionalityMethodSignature:"getMinimumBlockNumberForSurvey()",functionalityReplace:"getMinimumBlockNumberForSurvey",functionalityOutputParameters:'["uint256"]'},r,undefined,["Survey Length"],["Survey Length updated to "+t.proposalLength+" blocks"])},n.emergencyLengthChange=function(t){if(t.minimumBlockNumberForEmergencySurvey===parseInt(n.view.props.element.minimumBlockNumberForEmergencySurvey))return;if(!t.minimumBlockNumberForEmergencySurvey||isNaN(t.minimumBlockNumberForEmergencySurvey)||t.minimumBlockNumberForEmergencySurvey<1)return n.view.emit("message","You must specify a number greater than 0 to proceed","error");var r=JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getMinimumBlockNumberForEmergencySurvey()").split("type").join("uint256").split("value").join(t.minimumBlockNumberForEmergencySurvey));window.sendGeneratedProposal(n.view.props.element,{title:"Updating Emergency Proposal Length",functionalityName:"getMinimumBlockNumberForEmergencySurvey",functionalitySubmitable:!1,functionalityMethodSignature:"getMinimumBlockNumberForEmergencySurvey()",functionalityReplace:"getMinimumBlockNumberForEmergencySurvey",functionalityOutputParameters:'["uint256"]'},r,undefined,["Emergency Survey Length"],["Emergency Survey Length updated to "+t.minimumBlockNumberForEmergencySurvey+" blocks"])},n.emergencyPenaltyChange=function(t){var r=window.toDecimals(t.emergencySurveyStaking,n.view.props.element.decimals);t.emergencySurveyStaking=parseInt(r);if(t.emergencySurveyStaking===parseInt(n.view.props.element.emergencySurveyStaking))return;if(isNaN(t.emergencySurveyStaking)||t.emergencySurveyStaking<0)return n.view.emit("message","You must specify a number greater or equal to 0 to proceed","error");if(t.emergencySurveyStaking>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var i=JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getEmergencySurveyStaking()").split("type").join("uint256").split("value").join(r));window.sendGeneratedProposal(n.view.props.element,{title:"Updating Emergency Proposal Stake",functionalityName:"getEmergencySurveyStaking",functionalitySubmitable:!1,functionalityMethodSignature:"getEmergencySurveyStaking()",functionalityReplace:"getEmergencySurveyStaking",functionalityOutputParameters:'["uint256"]'},i,undefined,["Emergency Survey Staking"],["Emergency Survey Staking updated to "+window.fromDecimals(t.emergencySurveyStaking,n.view.props.element.decimals)+" Voting Tokens"])},n.quorumChange=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=window.numberToString(e.quorum),i=window.toDecimals(e.quorum,n.view.props.element.decimals),e.quorum=parseInt(i);if(e.quorum!==parseInt(n.view.props.element.quorum)){a.next=5;break}return a.abrupt("return");case 5:if(!(isNaN(e.quorum)||e.quorum<0)){a.next=7;break}return a.abrupt("return",n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error"));case 7:if(!(e.quorum>parseInt(n.view.props.element.totalSupply))){a.next=9;break}return a.abrupt("return",n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error"));case 9:s=["DFO Hub - Utilities - Get Quorum","This functionality returns the quorum value needed to accept a Survey"],o=["Setting quorum value to "+t+" "+n.view.props.element.symbol],!n.view.props.element.quorum&&s.push(o[0]),e.quorum===0&&(o=["Clearing quorum"]),u=e.quorum?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("uint256").split("value").join(i)):undefined,window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:e.quorum?"getQuorum":"",functionalityMethodSignature:e.quorum?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:e.quorum===0||parseInt(n.view.props.element.quorum)?"getQuorum":"",functionalityOutputParameters:e.quorum?'["uint256"]':""},u,undefined,s,o);case 15:case"end":return a.stop()}},r,this)}));return t}(),n.proposalStakeChange=function(t){var r=window.numberToString(t.minimumStaking),i=window.toDecimals(t.minimumStaking,n.view.props.element.decimals);t.minimumStaking=parseInt(i);if(t.minimumStaking===parseInt(n.view.props.element.minimumStaking))return;if(isNaN(t.minimumStaking)||t.minimumStaking<0)return n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error");if(t.minimumStaking>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var s=["DFO Hub - Utilities - Get Proposal Stake","This functionality provides the amount of voting tokens needed to be staked to make a new proposal"],o=["Setting Proposal Stake value to "+r+" "+n.view.props.element.symbol];!n.view.props.element.minimumStaking&&s.push(o[0]),t.minimumStaking===0&&(o=["Clearing Proposal Stake"]);var u=t.minimumStaking?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("uint256").split("value").join(i)):undefined;window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:t.minimumStaking?"getMinimumStaking":"",functionalityMethodSignature:t.minimumStaking?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:t.minimumStaking===0||parseInt(n.view.props.element.minimumStaking)?"getMinimumStaking":"",functionalityOutputParameters:t.minimumStaking?'["uint256"]':""},u,undefined,s,o)},n.surveySingleRewardChange=function(t){var r=window.numberToString(t.surveySingleReward),i=window.toDecimals(t.surveySingleReward,n.view.props.element.decimals);t.surveySingleReward=parseInt(i);if(t.surveySingleReward===parseInt(n.view.props.element.surveySingleReward))return;if(isNaN(t.surveySingleReward)||t.surveySingleReward<0)return n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error");if(t.surveySingleReward>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var s=["DFO Hub - Utilities - Get Dev Incentives","This functionality provides the amount of voting tokens needed to be staked to make a new proposal"],o=["Setting Dev Incentives value to "+r+" "+n.view.props.element.symbol];!n.view.props.element.surveySingleReward&&s.push(o[0]),t.surveySingleReward===0&&(o=["Clearing Dev Incentives"]);var u=t.surveySingleReward?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("uint256").split("value").join(i)):undefined;window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:t.surveySingleReward?"getSurveySingleReward":"",functionalityMethodSignature:t.surveySingleReward?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:t.surveySingleReward===0||parseInt(n.view.props.element.surveySingleReward)?"getSurveySingleReward":"",functionalityOutputParameters:t.surveySingleReward?'["uint256"]':""},u,undefined,s,o)},n.votesHardCapChange=function(t){var r=window.numberToString(t.votesHardCap),i=window.toDecimals(t.votesHardCap,n.view.props.element.decimals);t.votesHardCap=parseInt(i);if(t.votesHardCap===parseInt(n.view.props.element.votesHardCap))return;if(isNaN(t.votesHardCap)||t.votesHardCap<0)return n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error");if(t.votesHardCap>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var s=["DFO Hub - Utilities - Get Votes Hard Cap",'If a proposal reaches a fixed number of voting tokens (example the 90% of the total Token supply) for "Approve" or "Disapprove" it, the proposal automatically ends, independently from the duration rule.'],o=["Setting Votes Hard Cap value to "+r+" "+n.view.props.element.symbol];!n.view.props.element.votesHardCap&&s.push(o[0]),t.votesHardCap===0&&(o=["Clearing Votes Hard Cap"]);var u=t.votesHardCap?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getVotesHardCap()").split("type").join("uint256").split("value").join(i)):undefined;window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:t.votesHardCap?"getVotesHardCap":"",functionalityMethodSignature:t.votesHardCap?"getVotesHardCap()":"",functionalitySubmitable:!1,functionalityReplace:t.votesHardCap===0||parseInt(n.view.props.element.votesHardCap)?"getVotesHardCap":"",functionalityOutputParameters:t.votesHardCap?'["uint256"]':""},u,undefined,s,o)},n.votesHardCapChange=function(t){var r=window.numberToString(t.votesHardCap),i=window.toDecimals(t.votesHardCap,n.view.props.element.decimals);t.votesHardCap=parseInt(i);if(t.votesHardCap===parseInt(n.view.props.element.votesHardCap))return;if(isNaN(t.votesHardCap)||t.votesHardCap<0)return n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error");if(t.votesHardCap>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var s=["DFO Hub - Utilities - Get Votes Hard Cap",'If a proposal reaches a fixed number of voting tokens (example the 90% of the total Token supply) for "Approve" or "Disapprove" it, the proposal automatically ends, independently from the duration rule.'],o=["Setting Votes Hard Cap value to "+r+" "+n.view.props.element.symbol];!n.view.props.element.votesHardCap&&s.push(o[0]),t.votesHardCap===0&&(o=["Clearing Votes Hard Cap"]);var u=t.votesHardCap?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getVotesHardCap()").split("type").join("uint256").split("value").join(i)):undefined;window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:t.votesHardCap?"getVotesHardCap":"",functionalityMethodSignature:t.votesHardCap?"getVotesHardCap()":"",functionalitySubmitable:!1,functionalityReplace:t.votesHardCap===0||parseInt(n.view.props.element.votesHardCap)?"getVotesHardCap":"",functionalityOutputParameters:t.votesHardCap?'["uint256"]':""},u,undefined,s,o)},n.checkStakingAndFixedInflaction=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u,a;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e=e||n.view;if(e.mounted){f.next=3;break}return f.abrupt("return");case 3:if(e.props.element.stateHolder){f.next=5;break}return f.abrupt("return",setTimeout(function(){return n.checkStakingAndFixedInflaction(e)},300));case 5:return f.next=7,window.blockchainCall(e.props.element.stateHolder.methods.getUint256,"fixedInflation.transfers.length");case 7:f.t0=f.sent;if(!(f.t0>0)){f.next=12;break}f.t1="active",f.next=13;break;case 12:f.t1="unset";case 13:return t=f.t1,i="loading",e.setState({fixedInflationStatus:t,liquidityMiningStatus:i}),f.prev=16,f.next=19,window.blockchainCall(e.props.element.stateHolder.methods.toJSON);case 19:s=f.sent;if(e.mounted){f.next=22;break}return f.abrupt("return");case 22:s=JSON.parse(s.endsWith(",]")?s.substring(0,s.lastIndexOf(",]"))+"]":s),f.t2=regeneratorRuntime.keys(s);case 24:if((f.t3=f.t2()).done){f.next=38;break}return o=f.t3.value,u=s[o],a="get"+u.type.substring(0,1).toUpperCase()+u.type.substring(1),f.next=30,window.blockchainCall(e.props.element.stateHolder.methods[a],u.name);case 30:u.value=f.sent,u.name.indexOf("staking.transfer.authorized.")===0&&u.value&&(i="active");if(e.mounted){f.next=34;break}return f.abrupt("return");case 34:if(t!=="active"||i!=="active"){f.next=36;break}return f.abrupt("break",38);case 36:f.next=24;break;case 38:f.next=42;break;case 40:f.prev=40,f.t4=f["catch"](16);case 42:e.setState({fixedInflationStatus:t==="loading"?"unset":t,liquidityMiningStatus:i==="loading"?"unset":i});case 43:case"end":return f.stop()}},r,this,[[16,40]])}));return t}()};var Overview=React.createClass({displayName:"Overview",requiredModules:["spa/editor","spa/dFOMetadata"],requiredScripts:["spa/loaderMini.jsx","spa/okBoomer.jsx","spa/loaderMinimino.jsx"],uploadFile:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.currentTarget.files[0],r=this,i=new FileReader;i.addEventListener("load",function(){r.indexValue.value=i.result},!1),i.readAsDataURL(n)},changeElementInfo:function(t){if(!t)return;t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=window.getData($($(t.currentTarget).parent()).parent());this.controller[this.state.change+"Change"](n)},componentDidMount:function(){var t=this;window.blockchainCall(t.props.element.dFO.methods.read,"getMinimumBlockNumberForSurvey","0x").then(function(e){t.props.element.blocks=window.web3.eth.abi.decodeParameters(["uint256"],e)[0],t.forceUpdate()}),this.controller.checkStakingAndFixedInflaction()},renderChangeButton:function(t){var n=this;if(!n.props.edit)return;return React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB"+(n.state&&n.state.change===t?" Editing":""),href:"javascript:;",onClick:function(){return n.setState({change:n.state&&n.state.change===t?null:t})}},"Change")},renderChanger:function(t){var n=this;if(!n.props.edit||!n.state||!n.state.change)return;for(var r in t){var i=t[r];if(n.state.change===i){var s=n["render"+i.substring(0,1).toUpperCase()+i.substring(1)+"Changer"];return React.createElement("section",{className:"DFOFunctionIndexIcon"},s&&s(),React.createElement("aside",null,React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualButtonB",onClick:n.changeElementInfo},"Propose")))}}},renderIndexChanger:function(){var t=this;return React.createElement("ul",null,React.createElement("li",null,React.createElement("p",{className:"GIGIMIO"},'DFOs Front-End is designed to work in two layers, the "Distributed Layer" and the "Decentralized Layer." The Distributed Layer is a version of the Front-End deployed via IPFS or Swarn, for fast and free updates. The Decentralized Layer is a version of the Front-End via On-Chain files, expensive but critical to making a DFO Censorship Resistant. The ENS automatically redirects users to the Distributed Layer and if it\'s Censored to the Decentralized Layer.')),React.createElement("li",null,React.createElement("section",null,React.createElement("a",{href:this.props.element.link?"javascript:;":undefined,className:this.props.element.link?"LinkVisualButton"+(this.state&&this.state.indexShow==="link"?" Editing":""):undefined,onClick:function(){return t.props.element.link&&t.setState({indexShow:t.state&&t.state.indexShow==="link"?null:"link"})}},"Code"),React.createElement("input",{id:"linkCheck",type:"checkbox",className:"DFOFunctionIndexIconSelector",ref:function(n){return t.linkCheck=n},onChange:function(n){t.linkValue.value=t.props.element.link||"",t.linkValue.disabled=!n.currentTarget.checked,t.indexCheck.checked=!1,t.indexFile.disabled=!0}}),React.createElement("label",{htmlFor:"linkCheck"},"Distributed Layer"),React.createElement("input",{className:"DFOFunctionIndexIconText",id:"link",type:"text",placeholder:"Link IPFS Swarm",ref:function(n){return(t.linkValue=n)&&(n.value=t.props.element.link||"")},disabled:!0})),React.createElement("section",null,React.createElement("a",{href:this.props.element.index?"javascript:;":undefined,className:this.props.element.index?"LinkVisualButton"+(this.state&&this.state.indexShow==="index"?" Editing":""):undefined,onClick:function(){return t.props.element.index&&t.props.element.index!=="0"&&t.setState({indexShow:t.state&&t.state.indexShow==="index"?null:"index"})}},"Code"),React.createElement("input",{type:"hidden",id:"index",ref:function(n){return(t.indexValue=n)&&(n.value=t.props.element.index)}}),React.createElement("input",{id:"indexCheck",type:"checkbox",className:"DFOFunctionIndexIconSelector",ref:function(n){return t.indexCheck=n},onChange:function(n){t.indexValue.value=t.props.element.index,t.indexFile.value="",t.indexFile.disabled=!n.currentTarget.checked,t.linkCheck.checked=!1,t.linkValue.disabled=!0}}),React.createElement("label",{htmlFor:"indexCheck"},"Decentralized Layer"),React.createElement("input",{className:"DFOFunctionIndexIconUpload",id:"indexFile",type:"file",accept:".html,.htm",ref:function(n){return t.indexFile=n},disabled:!0,onChange:this.uploadFile}))),this.state&&this.state.indexShow&&React.createElement("section",null,this.state.indexShow==="index"&&React.createElement(Editor,{lang:"html",readonly:"true",first:this.state.indexShow==="index"?this.props.element.index:undefined}),this.state.indexShow==="link"&&React.createElement(Editor,{lang:"html",readonly:"true",link:this.state.indexShow==="link"?this.props.element.link:undefined})))},renderSurveySingleRewardChanger:function(){return this.renderDefaultChanger("The number of Voting Tokens as a reward to the issuer for every single Successful Proposal.","Dev Incentives","surveySingleReward",window.fromDecimals(this.props.element.surveySingleReward,this.props.element.decimals))},renderProposalLengthChanger:function(){return this.renderDefaultChanger("Every survey has a length expressed in Blocks. Here you can set the duration of Surveys for this DFO.","Proposal Length","proposalLength",this.props.element.blocks)},renderEmergencyLengthChanger:function(){return this.renderDefaultChanger("The length in Blocks for Emergency Surveys.","Emergency Length","minimumBlockNumberForEmergencySurvey",this.props.element.minimumBlockNumberForEmergencySurvey)},renderEmergencyPenaltyChanger:function(){return this.renderDefaultChanger("The Fee that Emergency Proposal Issuer must stake to propose it. This stake will be lost if the Proposal fails.","Emergency Penalty","emergencySurveyStaking",window.fromDecimals(this.props.element.emergencySurveyStaking,this.props.element.decimals))},renderQuorumChanger:function(){return this.renderDefaultChanger("The Quorum is a minimum number of Voting Tokens staked in a survey to reach the success status.","Quorum","quorum",window.fromDecimals(this.props.element.quorum,this.props.element.decimals))},renderProposalStakeChanger:function(){return this.renderDefaultChanger("The minimum of Token Stacked needed to create a new Proposal.","Proposal Stake","minimumStaking",window.fromDecimals(this.props.element.minimumStaking,this.props.element.decimals))},renderVotesHardCapChanger:function(){return this.renderDefaultChanger('If a proposal reaches a fixed number of voting tokens (example the 90% of the total Token supply) for "Approve" or "Disapprove" it, the proposal automatically ends, independently from the duration rule.',"Hard Cap","votesHardCap",window.fromDecimals(this.props.element.votesHardCap,this.props.element.decimals))},renderDefaultChanger:function(t,n,r,i){return React.createElement("ul",null,React.createElement("li",null,React.createElement("p",{ref:function(n){return n&&(n.innerHTML=t)}},t)),React.createElement("li",null,React.createElement("section",null,React.createElement("label",{htmlFor:r,ref:function(t){return t&&(t.innerHTML=n)}},n),React.createElement("input",{className:"DFOFunctionIndexIconText",id:r,type:"number",min:"0",ref:function(t){return t&&(t.value=i)}}))))},render:function(){var t=this,n=this;return n.props.element.token?React.createElement("section",{className:"DFOOverview"},React.createElement(DFOMetadata,{element:n.props.element,edit:n.props.edit}),React.createElement("ul",{className:"DFOHosting TheDappInfoX"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Decentralized Application")),React.createElement("li",{className:"TheDappInfo1"},React.createElement("h5",{className:"DFOHostingTitle"},"🙋 Voting Token"),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,n.props.element.symbol&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Ticker: ",React.createElement("b",null,n.props.element.symbol))),React.createElement(AsyncValue,null,n.props.element.name&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Name: ",React.createElement("b",null,n.props.element.name)))),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,n.props.element.symbol&&n.props.element.totalSupply&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Supply: ",React.createElement("b",null,window.fromDecimals(n.props.element.totalSupply,n.props.element.decimals))))),React.createElement("section",{className:"DFOTitleSection"},React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",href:"javascript:;",onClick:function(){return n.emit("section/change","Token")}},"View"),React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"token/"+n.props.element.token.options.address,target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"💎 Etherscan"),React.createElement("a",{href:window.context.uniSwapInfoURL+this.props.element.token.options.address,target:"_blank",className:"LinkVisualButton LinkVisualUni"},"🦄 Info"),React.createElement("a",{href:window.context.uniSwapSwapURLTemplate.format(this.props.element.token.options.address),target:"_blank",className:"LinkVisualButton LinkVisualUni"},"🦄 Swap"))),React.createElement("li",{className:"TheDappInfo05"},React.createElement("h5",{className:"DFOHostingTitle"},"🤖 Core:"),React.createElement("section",{className:"DFOTitleSection"},React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+n.props.element.dFO.options.address},"💎 Etherscan")),React.createElement("br",null),React.createElement("h5",{className:"DFOHostingTitle"},"👨🏻‍💻 Wallet:"),React.createElement("section",{className:"DFOTitleSection"},React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",href:"javascript:;",onClick:function(){return n.emit("section/change","Wallet")}},"View"),React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",target:"_blank",href:window.getNetworkElement("etherscanURL")+"tokenHoldings?a="+n.props.element.walletAddress},"💎 Etherscan"))),React.createElement("li",{className:"TheDappInfo1 TheDappInfoX"},React.createElement("h5",{className:"DFOHostingTitle"},"🔮 ENS: "),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,n.props.element.ens!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},React.createElement("a",{className:"LinkVisualStandard",target:"_blank",href:"https://"+(n.props.element.ens&&n.props.element.ens.toLowerCase()+"."||"")+"dfohub.eth?ensd="+(n.props.element.ens&&n.props.element.ens.toLowerCase()+"."||"")+"dfohub.eth"},n.props.element.ens&&n.props.element.ens.toLowerCase()+"."||"","dfohub.eth")))),React.createElement("br",null),React.createElement("h5",{className:"DFOHostingTitle"},"📲 Front-end: "),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,React.createElement("a",{className:"LinkVisualButton",href:"javascript:;",onClick:function(){return(n.props.element.link||n.props.element.index)&&t.setState({change:t.state&&t.state.change==="showCode"?null:"showCode"})}},"Code")),n.renderChangeButton("index"))),React.createElement("li",{className:"TheDappInfo05 TheDappInfoX"},React.createElement("h5",{className:"DFOHostingTitle DFOHostingTitle2"},"🛠 DFO Link: "),React.createElement("section",{className:"DFOTitleSection"},React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",target:"_blank",href:window.getHomepageLink("?addr="+this.props.element.dFO.options.address)},"Navigate")),React.createElement("h5",{className:"DFOHostingTitle DFOHostingTitle2"},"🛠 Functions: "),React.createElement("section",{className:"DFOTitleSection"},React.createElement("p",{className:"LinkVisualStandard MiiiiFunctionalities"},React.createElement(AsyncValue,null,n.props.element.functionalitiesAmount)),React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",onClick:function(){return n.emit("section/change","Functions")},href:"javascript:;"},"View All"))),n.renderChanger(["index"]),this.state&&this.state.change==="showCode"&&React.createElement("section",{className:"IndexShowCode"},React.createElement("section",{className:"IndexShowCodeEditorBox"},React.createElement("h5",null,"Distributed Layer"),React.createElement(Editor,{lang:"html",readonly:"true",link:n.props.element.link,firstCode:n.props.element.link?undefined:"Distributed Index is actually unset"})),React.createElement("section",{className:"IndexShowCodeEditorBox"},React.createElement("h5",null,"Decentralized Layer"),React.createElement(Editor,{lang:"html",readonly:"true",first:n.props.element.index,firstCode:n.props.element.index?undefined:"Decentralized Index is actually unset"})))),React.createElement("ul",{className:"DFOHosting TheDappInfoX"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Rules and funds")),React.createElement("li",{className:"TheDappInfo1"},React.createElement("h5",{className:"DFOHostingTitle"},"🏰 Regular Proposals: "),React.createElement("section",{className:"DFOTitleSection"},n.props.element.blocks===undefined&&React.createElement(LoaderMinimino,null),n.props.element.blocks!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Length: ",React.createElement("b",null,n.props.element.blocks),React.createElement("aside",null," Blocks "))),React.createElement("h5",{className:"DFOHostingTitle"},"🚨 Emergency Proposals: "),React.createElement("section",{className:"DFOTitleSection"},n.props.element.minimumBlockNumberForEmergencySurvey===undefined&&React.createElement(LoaderMinimino,null),n.props.element.minimumBlockNumberForEmergencySurvey!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Length: ",React.createElement("b",null,n.props.element.minimumBlockNumberForEmergencySurvey)," ",React.createElement("aside",null,"Blocks")),React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",onClick:function(){return n.emit("section/change","Rules")},href:"javascript:;"},"View All"))),React.createElement("li",{className:"TheDappInfo1"},React.createElement("h5",{className:"DFOHostingTitle"},"🧮 Assets: "),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,n.props.element.symbol&&n.props.element.totalSupply&&n.props.element.communityTokens&&React.createElement("p",{className:"DFOLabelTitleInfo DFOLabelTitleInfoS"},React.createElement("b",null,window.tokenPercentage(n.props.element.communityTokens,n.props.element.totalSupply)),React.createElement("aside",null," (",React.createElement("b",null,window.fromDecimals(n.props.element.communityTokens,n.props.element.decimals))," ",n.props.element.symbol,")")))),React.createElement("section",{className:"DFOTitleSection"},React.createElement("p",{className:"DFOLabelTitleInfo DFOLabelTitleInfoS"},React.createElement("b",null,window.fromDecimals(n.props.element.walletETH,18)),React.createElement("aside",null," ETH"))),React.createElement("section",{className:"DFOTitleSection"},React.createElement("p",{className:"DFOLabelTitleInfo DFOLabelTitleInfoS"},React.createElement("b",null,window.fromDecimals(n.props.element.walletUSDC,6)),React.createElement("aside",null," USDC"))),React.createElement("section",{className:"DFOTitleSection"},React.createElement("p",{className:"DFOLabelTitleInfo DFOLabelTitleInfoS"},React.createElement("b",null,window.fromDecimals(n.props.element.walletDAI,18)),React.createElement("aside",null," DAI"))),n.props.element!==window.dfoHub&&React.createElement("section",{className:"DFOTitleSection"},React.createElement("p",{className:"DFOLabelTitleInfo DFOLabelTitleInfoS"},React.createElement("b",null,window.fromDecimals(n.props.element.walletBUIDL,window.dfoHub.decimals)),React.createElement("aside",null," BUIDL"))),React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",onClick:function(){return n.emit("section/change","Wallet")},href:"javascript:;"},"View All")),React.createElement("li",{className:"TheDappInfo1"},React.createElement("h5",{className:"DFOHostingTitle"},"🖨 Fixed Inflation:"),React.createElement("section",{className:"DFOTitleSection"},this.state&&this.state.fixedInflationStatus==="loading"&&React.createElement(LoaderMinimino,null),this.state&&this.state.fixedInflationStatus==="active"&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Active"),this.state&&this.state.fixedInflationStatus==="unset"&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Not set"),React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",onClick:function(){return n.emit("section/change","Farming")},href:"javascript:;"},"More")),React.createElement("h5",{className:"DFOHostingTitle"},"🦄 Liquidity Mining:"),React.createElement("section",{className:"DFOTitleSection"},this.state&&this.state.liquidityMiningStatus==="loading"&&React.createElement(LoaderMinimino,null),this.state&&this.state.liquidityMiningStatus==="active"&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Active"),this.state&&this.state.liquidityMiningStatus==="unset"&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Not set"),React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",onClick:function(){return n.emit("section/change","Farming")},href:"javascript:;"},"More"))))):React.createElement(LoaderMini,null)}});var ProposalController=function(t){var n=this;n.view=t,n.transferTopic=window.web3.utils.sha3("Transfer(address,address,uint256)"),n.functionalitySetTopic=window.web3.utils.sha3("FunctionalitySet(string,address,string,address,uint256,address,bool,string,bool,bool,address)"),n.refreshVotes=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=this.state.survey;if(window.walletAddress){i.next=5;break}i.t0=["0","0"],i.next=8;break;case 5:return i.next=7,window.blockchainCall(e.contract.methods.getVote,window.walletAddress);case 7:i.t0=i.sent;case 8:t=i.t0,e.myAccepts=window.web3.utils.toBN(t[0]).toString(),e.myRefuses=window.web3.utils.toBN(t[1]).toString(),e.myVotes=window.web3.utils.toBN(t[0]).add(window.web3.utils.toBN(t[1])).toString(),n.view.setState({survey:e});case 13:case"end":return i.stop()}},r,this)}));return t}(),n.loadSurvey=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e=n.view.props.element;if(!!n.view&&!!n.view.mountDate&&e===n.view.props.element){f.next=3;break}return f.abrupt("return");case 3:t=n.view.mountDate,i={},Object.keys(n.view.state.survey).forEach(function(e){return i[e]=n.view.state.survey[e]}),delete i.withdrawed,f.prev=7;if(i.contract){f.next=18;break}return i.contract=window.newContract(window.context.propsalAbi,i.address),i.contract.data=i,f.next=13,window.blockchainCall(i.contract.methods.toJSON);case 13:s=f.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=16;break}return f.abrupt("return");case 16:s=JSON.parse(s.split('"returnAbiParametersArray":,').join('"returnAbiParametersArray":[],')),Object.keys(s).forEach(function(e){return i[e]=s[e]});case 18:return f.prev=18,f.t0=window,f.next=22,window.blockchainCall(window.newContract(window.context.IFunctionalityAbi,i.location).methods.getMetadataLink);case 22:f.t1=f.sent,i.metadataLink=f.t0.formatLink.call(f.t0,f.t1);if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=26;break}return f.abrupt("return");case 26:return f.next=28,window.AJAXRequest(i.metadataLink);case 28:i.metadata=f.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=31;break}return f.abrupt("return");case 31:Object.entries(i.metadata).forEach(function(e){return i[e[0]]=e[1]}),i.description=window.extractHTMLDescription(i.description||i.code,!0),f.next=37;break;case 35:f.prev=35,f.t2=f["catch"](18);case 37:return i.surveyEnd=i.endBlock<=n.view.props.currentBlock+1,f.next=40,window.blockchainCall(i.contract.methods.getVotes);case 40:o=f.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=43;break}return f.abrupt("return");case 43:i.accepted=window.web3.utils.toBN(o[0]).toString(),i.refused=window.web3.utils.toBN(o[1]).toString(),i.allVotes=window.web3.utils.toBN(o[0]).add(window.web3.utils.toBN(o[1])).toString();if(window.walletAddress){f.next=50;break}f.t3=["0","0"],f.next=53;break;case 50:return f.next=52,window.blockchainCall(i.contract.methods.getVote,window.walletAddress);case 52:f.t3=f.sent;case 53:u=f.t3;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=56;break}return f.abrupt("return");case 56:i.myAccepts=window.web3.utils.toBN(u[0]).toString(),i.myRefuses=window.web3.utils.toBN(u[1]).toString(),i.myVotes=window.web3.utils.toBN(u[0]).add(window.web3.utils.toBN(u[1])).toString();if(!!i.surveyEnd&&!!i.terminationData){f.next=75;break}return i.leading=!1,f.prev=61,f.next=64,window.blockchainCall(e.dFO.methods.read,"checkSurveyResult",window.web3.eth.abi.encodeParameter("address",i.address));case 64:i.leading=f.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=67;break}return f.abrupt("return");case 67:return i.leading=window.web3.eth.abi.decodeParameter("bool",i.leading),f.next=70,window.blockchainCall(i.contract.methods.isVotesHardCapReached);case 70:i.hardCapReached=f.sent,f.next=75;break;case 73:f.prev=73,f.t4=f["catch"](61);case 75:if(!(i.checkedTimes>0)){f.next=88;break}i.terminationData&&(i.terminationTransactionHash=i.terminationData.transactionHash),i.terminationData&&(i.result=window.web3.eth.abi.decodeParameter("bool",i.terminationData.data)),i.terminationData&&(i.resultBlock=i.terminationData.blockNumber);if(!(i.withdrawed===undefined&&parseInt(i.myVotes)>0)){f.next=88;break}i.withdrawed=!0;if(!window.walletAddress||i.raisedBy!==e.dFO.options.address.toLowerCase()){f.next=88;break}return f.next=84,window.getLogs({address:e.token.options.address,topics:[n.transferTopic,window.web3.eth.abi.encodeParameter("address",i.address),window.web3.eth.abi.encodeParameter("address",window.walletAddress)],fromBlock:i.startBlock});case 84:a=f.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=87;break}return f.abrupt("return");case 87:i.withdrawed=a.length>0;case 88:n.view.setState({survey:i});if(!i.codeName&&!!i.replaces||!!i.code){f.next=103;break}return f.prev=90,f.next=93,window.loadContent(i.sourceLocationId,i.sourceLocation);case 93:i.code=f.sent,i.codeName!=="getEmergencySurveyStaking"&&i.sourceLocationId===0&&delete i.code,f.next=99;break;case 97:f.prev=97,f.t5=f["catch"](90);case 99:if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=101;break}return f.abrupt("return");case 101:i.description=window.extractHTMLDescription(i.code,!0),n.view.setState({survey:i});case 103:if(i.compareErrors){f.next=116;break}return f.next=106,window.searchForCodeErrors(i.location,i.code,i.codeName,i.methodSignature,i.replaces,!0);case 106:i.compareErrors=f.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=109;break}return f.abrupt("return");case 109:return n.view.setState({survey:i}),f.next=112,window.searchForCodeErrors(i.location,i.code,i.codeName,i.methodSignature,i.replaces);case 112:i.compareErrors=f.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){f.next=115;break}return f.abrupt("return");case 115:n.view.setState({survey:i});case 116:f.next=121;break;case 118:f.prev=118,f.t6=f["catch"](7),console.error(f.t6);case 121:case"end":return f.stop()}},r,this,[[7,118],[18,35],[61,73],[90,97]])}));return t}(),n.tryLoadDiff=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:e=n.view.props.element;if(!!n.view&&!!n.view.mountDate&&e===n.view.props.element){v.next=3;break}return v.abrupt("return");case 3:t=n.view.mountDate,i={},Object.keys(n.view.state.survey).forEach(function(e){return i[e]=n.view.state.survey[e]});if(!!i.replaces&&i.replacesCode===undefined){v.next=8;break}return v.abrupt("return");case 8:v.prev=8,s=i.replacedCodeSourceLocationId,o=i.replacedCodeSourceLocation;if(i.terminated){v.next=21;break}return v.next=14,window.blockchainCall(n.view.props.element.functionalitiesManager.methods.getFunctionalityData,i.replaces);case 14:u=v.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){v.next=17;break}return v.abrupt("return");case 17:o=u[3],s=u[4],v.next=46;break;case 21:return v.next=23,window.web3.eth.getTransactionReceipt(i.terminationTransactionHash);case 23:a=v.sent;if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){v.next=26;break}return v.abrupt("return");case 26:f=a.logs,l=Array.isArray(f),c=0,f=l?f:f[Symbol.iterator]();case 27:if(!l){v.next=33;break}if(!(c>=f.length)){v.next=30;break}return v.abrupt("break",46);case 30:h=f[c++],v.next=37;break;case 33:c=f.next();if(!c.done){v.next=36;break}return v.abrupt("break",46);case 36:h=c.value;case 37:p=h;if(p.topics[0].toLowerCase()===n.functionalitySetTopic.toLowerCase()){v.next=40;break}return v.abrupt("continue",44);case 40:return d=window.web3.eth.abi.decodeParameters(["string","string","address","uint256","bool","string","bool","bool"],p.data),o=d[2],s=d[3],v.abrupt("break",46);case 44:v.next=27;break;case 46:return v.prev=46,v.next=49,window.loadContent(s,o);case 49:i.replacesCode=v.sent,v.next=55;break;case 52:v.prev=52,v.t0=v["catch"](46),i.replacesCode=null;case 55:if(!!n.view&&n.view.mountDate===t&&e===n.view.props.element){v.next=57;break}return v.abrupt("return");case 57:n.view.setState({survey:i}),v.next=63;break;case 60:v.prev=60,v.t1=v["catch"](8),console.error(v.t1);case 63:case"end":return v.stop()}},r,this,[[8,60],[46,52]])}));return t}(),n.interact=function(){function t(t,n,r,i){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i,s){var o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:o=e.contract.methods[t==="Withdraw All"?"retireAll":t==="Vote"?i.toLowerCase():t.toLowerCase().split("switch").join("moveTo").split("withdraw").join("retire")+i],n.view.emit("message","Performing "+t+"...");if(t!=="Withdraw All"){u.next=7;break}return u.next=5,window.blockchainCall(o);case 5:u.next=9;break;case 7:return u.next=9,window.blockchainCall(o,s);case 9:n.view.emit("message","Operation completed!"),n.view.emit("element/update",n.view.props.element),n.loadSurvey(),n.view.emit("surveys/refresh"),n.view.emit("balances/refresh",n.view.props.element);case 14:case"end":return u.stop()}},r,this)}));return t}(),n.finalize=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,i=$(e.currentTarget),s=$('<section class="loaderMinimino"/>').insertAfter(i.hide()),n.view.emit("message","Finalizing Survey..."),o.next=6,window.blockchainCall(t.contract.methods.terminate);case 6:n.view.emit("message","Survey Finalized! Enjoy Your Brand new Functionality! &#128526;"),n.view.emit("element/update",n.view.props.element),n.loadSurvey(),n.view.emit("surveys/refresh"),n.view.emit("balances/refresh",n.view.props.element),o.next=16;break;case 13:o.prev=13,o.t0=o["catch"](0),n.view.emit("message",o.t0.message||o.t0,"error");case 16:s.remove(),i.show();case 18:case"end":return o.stop()}},r,this,[[0,13]])}));return t}(),n.withdraw=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o,u,a;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(window.walletAddress){f.next=2;break}return f.abrupt("return");case 2:i=n.view.props.element,s=!1;if(!t.raisedBy!==i.dFO.options.address.toLowerCase()){f.next=6;break}return f.abrupt("return",alert("This proposal was made using an older version of this DFO's core and cannot be withdrawn any more"));case 6:return f.prev=6,f.next=9,window.getLogs({address:i.token.options.address,topics:[n.transferTopic,window.web3.eth.abi.encodeParameter("address",t.address),window.web3.eth.abi.encodeParameter("address",window.walletAddress)],fromBlock:t.startBlock});case 9:o=f.sent,s=o.length>0,f.next=15;break;case 13:f.prev=13,f.t0=f["catch"](6);case 15:if(!s){f.next=17;break}return f.abrupt("return",alert("You already withdrawn your tokens"));case 17:return f.prev=17,u=$(e.currentTarget),a=$('<section class="loaderMinimino"/>').insertAfter(u.hide()),n.view.emit("message","Withdrawing..."),f.next=23,window.blockchainCall(t.contract.methods.withdraw);case 23:n.view.emit("message","Operation completed!"),n.view.emit("element/update",n.view.props.element),n.loadSurvey(),n.view.emit("surveys/refresh"),n.view.emit("balances/refresh",n.view.props.element),f.next=33;break;case 30:f.prev=30,f.t1=f["catch"](17),n.view.emit("message",f.t1.message||f.t1,"error");case 33:a.remove(),u.show();case 35:case"end":return f.stop()}},r,this,[[6,13],[17,30]])}));return t}()};var Proposal=React.createClass({displayName:"Proposal",requiredModules:["spa/editor"],requiredScripts:["spa/loaderMinimino.jsx"],getInitialState:function(){return{survey:this.props.survey}},getDefaultSubscriptions:function(){return{"ethereum/ping":this.componentDidMount}},switchRef:function(t){this.switch=t;var n=this;n.switch&&(n.switch.onchange=function(e){e&&e.preventDefault(!0)&&e.stopPropagation(!0),n.switchFrom.innerHTML="&#99"+(n.switch.value==="Refuse"?"89":"40")+";"})},componentDidMount:function(){this.mountDate=(new Date).getTime()+"_"+Math.random(),this.controller.loadSurvey()},componentWillUnmount:function(){delete this.mountDate},interact:function(t,n){this.emit("message",""),t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var r=$(t.currentTarget),i=$('<section class="loaderMinimino"/>').insertAfter(r.hide()),s=r.html(),o=r.parents("section"),u=undefined,a=undefined,f=function(){return i.remove(),r.show(),!0};try{if(o.children("input").length>0){u=parseFloat(o.children("input").val()),a=o.children("select").val();if(isNaN(u)||u<=0)return f()&&this.emit("message","Insert a valid amount greater than zero to proceed","error")}}catch(t){}var l=this;this.controller.interact(n,s,a,window.toDecimals(u,this.props.element.decimals)).then(f).catch(function(e){return f()&&l.emit("message",e.message||e,"error")})},renderTerminated:function(t,n){var r=this,i=r.state.survey,s=[React.createElement("section",{className:"ProposalPool"},React.createElement("h6",null,(i.result||i.leading)&&React.createElement("span",null,"✅ Accepted")," ",!i.result&&!i.leading&&React.createElement("span",null,"⛔ Refused")),React.createElement("p",null,!i.resultBlock&&"Last Checked ","Block: ",React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"block/"+(i.resultBlock||i.lastCheckedBlock),target:"_blank"},i.resultBlock||i.lastCheckedBlock)),React.createElement("p",null,"Total Votes: ",window.fromDecimals(i.allVotes,r.props.element.decimals)," ",r.props.element.symbol),!i.withdrawed&&React.createElement("p",{className:"AllRed"},"To Withdraw: ",window.fromDecimals(i.myVotes,r.props.element.decimals)," ",r.props.element.symbol),React.createElement("section",null,(i.surveyEnd||i.hardCapReached)&&!i.terminationData&&React.createElement("section",{className:"MutoStai"},React.createElement("p",null,"Sometime Web 3 providers can't estimate correctly the Max Gas needed for complex transactions. Finalizing a Proposal, you execute the code in the EVM, be sure to add the right Max Gas required for its execution. Do it at your own risk. ",React.createElement("a",{href:"https://blockgeeks.com/guides/ethereum-gas/"},"More")),React.createElement(WalletEnablerButton,{className:"LinkVisualButton LinkVisualButtonB ProposalPoolWithdraw",onClick:function(t){return r.controller.finalize(t,i)}},"Finalize")),i.terminationData&&parseInt(i.myVotes)>0&&React.createElement(WalletEnablerButton,{className:"LinkVisualButton ProposalPoolWithdraw",onClick:function(t){return r.controller.withdraw(t,i)}},"Withdraw All"),React.createElement("a",{className:"LinkVisualButton"+(r.props.toggle==="info_"+i.key?" Editing":""),href:"javascript:;",onClick:function(){return r.emit("toggle",r.props.toggle==="info_"+i.key?null:"info_"+i.key)}},"Info"),(i.code||i.replacesCode)&&React.createElement("a",{className:"LinkVisualButton"+(r.props.toggle==="code_"+i.key?" Editing":""),href:"javascript:;",onClick:function(){return r.controller.tryLoadDiff().then(function(){return r.emit("toggle",r.props.toggle==="code_"+i.key?null:"code_"+i.key)})}},"Code")),React.createElement("a",{className:"LinkVisualStandard",href:window.getNetworkElement("etherscanURL")+"address/"+i.address,target:"_blank"},"Proposal"),React.createElement("a",{className:"LinkVisualStandard",href:window.getNetworkElement("etherscanURL")+"address/"+i.location,target:"_blank"},"Contract"))];return r.props.toggle==="info_"+i.key&&s.push(React.createElement("section",{className:"ProposalVote"},React.createElement("section",{className:"ProposalVoteINFO"},React.createElement("section",{className:"ProposalVoteToken"},React.createElement("h6",null,"Results by Token:"),React.createElement("section",{className:"ProposalPoolReview"},React.createElement("section",{className:"ProposalPoolReviewEm"},React.createElement("p",null,"✅")),React.createElement("section",{className:"ProposalPoolReviewPercentage"},React.createElement("p",{className:"ProposalPoolReviewPercentageY",style:{width:t}},t))),React.createElement("p",null,window.fromDecimals(i.accepted,r.props.element.decimals)," ",r.props.element.symbol),React.createElement("section",{className:"ProposalPoolReview"},React.createElement("section",{className:"ProposalPoolReviewEm"},React.createElement("p",null,"⛔")),React.createElement("section",{className:"ProposalPoolReviewPercentage"},React.createElement("p",{className:"ProposalPoolReviewPercentageN",style:{width:n}},n))),React.createElement("p",null,window.fromDecimals(i.refused,r.props.element.decimals)," ",r.props.element.symbol))))),s},renderRunning:function(t,n){var r=this,i=r.state.survey,s=[React.createElement("section",{className:"ProposalAction ProposalPool"},React.createElement("p",null,"Leading: ",i.leading&&React.createElement("span",null,"✅"),!i.leading&&React.createElement("span",null,"⛔")),React.createElement("p",null,"End Block:",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"block/"+i.endBlock},i.endBlock)),!i.surveyEnd&&React.createElement(WalletEnablerButton,{className:"LinkVisualButton LinkVisualButtonB"+(r.state&&r.state.toggle==="vote_"+i.key?" Editing":""),onClick:function(){return r.emit("toggle",r.props.toggle==="vote_"+i.key?null:"vote_"+i.key)}},"Vote"),(i.code||i.replacesCode)&&React.createElement("a",{className:"LinkVisualButton"+(r.props.toggle==="code_"+i.key?" Editing":""),href:"javascript:;",onClick:function(){return r.controller.tryLoadDiff().then(function(){return r.emit("toggle",r.props.toggle==="code_"+i.key?null:"code_"+i.key)})}},"Code"),React.createElement("br",null),React.createElement("br",null),React.createElement("a",{className:"LinkVisualStandard",href:window.getNetworkElement("etherscanURL")+"address/"+i.address,target:"_blank"},"Proposal"),React.createElement("a",{className:"LinkVisualStandard",href:window.getNetworkElement("etherscanURL")+"address/"+i.location,target:"_blank"},"Contract"),i.surveyEnd&&!i.terminated&&React.createElement("section",{className:"MutoStai"},React.createElement("p",null,"Sometime Web 3 providers can't estimate correctly the Max Gas needed for complex transactions. Finalizing a Proposal, you execute the code in the EVM, be sure to add the right Max Gas required for its execution. Do it at your own risk. ",React.createElement("a",{href:"https://blockgeeks.com/guides/ethereum-gas/"},"More")),React.createElement(WalletEnablerButton,{className:"LinkVisualButton LinkVisualButtonB ProposalPoolWithdraw",onClick:function(t){return r.controller.finalize(t,i)}},"Finalize")))];return r.props.toggle==="vote_"+i.key&&s.push(React.createElement("section",{className:"ProposalVote"},React.createElement("section",{className:"ProposalVoteINFO"},React.createElement("section",{className:"ProposalVoteToken"},React.createElement("h6",null,"Status by Token:"),React.createElement("section",{className:"ProposalPoolReview"},React.createElement("section",{className:"ProposalPoolReviewEm"},React.createElement("p",null,"✅")),React.createElement("section",{className:"ProposalPoolReviewPercentage"},React.createElement("p",{className:"ProposalPoolReviewPercentageY",style:{width:t}},t))),React.createElement("p",null,window.fromDecimals(i.accepted,r.props.element.decimals)," ",r.props.element.symbol),React.createElement("section",{className:"ProposalPoolReview"},React.createElement("section",{className:"ProposalPoolReviewEm"},React.createElement("p",null,"⛔")),React.createElement("section",{className:"ProposalPoolReviewPercentage"},React.createElement("p",{className:"ProposalPoolReviewPercentageN",style:{width:n}},n))),React.createElement("p",null,window.fromDecimals(i.refused,r.props.element.decimals)," ",r.props.element.symbol)),React.createElement("section",{className:"ProposalVoteBalances"},React.createElement("h6",null,"Available Balance"),React.createElement("p",null,window.fromDecimals(r.props.myBalance,r.props.element.decimals)," ",r.props.element.symbol),React.createElement("h6",null,"Staked Balance"),React.createElement("p",null,"✅ | ",window.fromDecimals(i.myAccepts,r.props.element.decimals)," ",r.props.element.symbol),React.createElement("p",null,"⛔ | ",window.fromDecimals(i.myRefuses,r.props.element.decimals)," ",r.props.element.symbol))),React.createElement("section",{className:"ProposalVoteVoting"},React.createElement("section",{className:"ProposalVoteVotingNew"},React.createElement("p",null,"Vote to"),React.createElement("select",null,React.createElement("option",{value:"Accept"},"✅ Accept"),React.createElement("option",{value:"Refuse"},"⛔ Refuse")),React.createElement("input",{type:"number",min:"1",placeholder:"Amount"}),React.createElement("a",{className:"LinkVisualButton",href:"javascript:;",onClick:function(t){return r.interact(t,i)}},"Vote")),React.createElement("section",{className:"ProposalVoteVotingExit"},React.createElement("p",null,"Withdraw From"),React.createElement("select",null,React.createElement("option",{value:"Accept"},"✅"),React.createElement("option",{value:"Refuse"},"⛔")),React.createElement("input",{type:"number",min:"1",placeholder:"Amount"}),React.createElement("a",{className:"LinkVisualButton",href:"javascript:;",onClick:function(t){return r.interact(t,i)}},"Withdraw")),React.createElement("section",{className:"ProposalVoteVotingExit"},React.createElement("a",{className:"LinkVisualButton",href:"javascript:;",onClick:function(t){return r.interact(t,i)}},"Withdraw All")),React.createElement("section",{className:"ProposalVoteVotingExit TheDappInfoX"},React.createElement("p",null,"Switch To"),React.createElement("select",{ref:r.switchRef},React.createElement("option",{value:"Accept"},"✅"),React.createElement("option",{value:"Refuse"},"⛔")),React.createElement("p",null,"from ",React.createElement("span",{ref:function(t){return r.switchFrom=t}},"⛔")),React.createElement("input",{type:"number",min:"1",placeholder:"Amount"}),React.createElement("a",{className:"LinkVisualButton",href:"javascript:;",onClick:function(t){return r.interact(t,i)}},"Switch"))))),s},render:function(){if(!this.state.survey.hasOwnProperty("codeName"))return React.createElement("span",{style:{display:"none"}});var t=this,n=t.state.survey,r=n.description||"",i=r.length>window.descriptionWordLimit?window.descriptionWordLimit:r.length,s=t.props.toggle==="more_"+n.key,o=parseInt(n.accepted)/n.allVotes*100;o=(isNaN(o)?0:o)+"%";var u=parseInt(n.refused)/n.allVotes*100;u=(isNaN(u)?0:u)+"%";var a=[React.createElement("section",{className:"ProposalBio"},React.createElement("h5",null,n.emergency&&React.createElement("span",null,"🚨"," "),n.compareErrors===undefined&&React.createElement(LoaderMinimino,null),n.compareErrors&&n.compareErrors.length>0&&React.createElement("span",{title:(n.compareErrors[0].indexOf("data not available")!==-1?"":"There are some problems in this proposal:\n")+n.compareErrors.join(";\n").trim()},"☣️")," ",n.codeName?n.replaces?"Edit":"Add New":n.replaces?"Kill":"One Time",(n.codeName||n.replaces)&&[React.createElement("span",null," | "),React.createElement("span",null,n.codeName||n.replaces)]),React.createElement("p",null,React.createElement("span",{ref:function(t){return t&&(t.innerHTML=r.substring(0,s?r.length:i))}}),!s&&i<r.length&&["... ",React.createElement("a",{href:"javascript:;",onClick:function(){return t.emit("toggle","more_"+n.key)}},"More")],s&&i<r.length&&[" ",React.createElement("a",{href:"javascript:;",onClick:function(){return t.emit("toggle",null)}},"Less")]))];return a.push((n.checkedTimes>0?this.renderTerminated:this.renderRunning)(o,u)),t.props.toggle==="code_"+n.key&&a.push(React.createElement("section",{className:"AllViewCode"},React.createElement("section",{className:"AllViewCodeEditor"},React.createElement(Editor,{className:"AllViewCode",firstCode:n.replacesCode||n.code,secondCode:n.replacesCode&&n.code||undefined})))),a}});var ProposalsController=function(t){var n=this;n.view=t,n.proposalTopic=window.web3.utils.sha3("Proposal(address)"),n.proposalCheckedTopic=window.web3.utils.sha3("ProposalCheck(address)"),n.proposalSetTopic=window.web3.utils.sha3("ProposalSet(address,bool)"),n.blockLimit=4e4,n.updateBalance=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.view;if(window.walletAddress){t.next=5;break}t.t1="0",t.next=8;break;case 5:return t.next=7,window.blockchainCall(n.view.props.element.token.methods.balanceOf,window.walletAddress);case 7:t.t1=t.sent;case 8:t.t2=t.t1,t.t3={myBalance:t.t2},t.t0.setState.call(t.t0,t.t3);case 11:case"end":return t.stop()}},r,this)}));return t}(),n.loadSurveys=function(){function t(t,n,r,i,s,o){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i,s,o,u){var a,f,l,c;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!!n.view&&!!n.view.mountDate){h.next=2;break}return h.abrupt("return");case 2:a=n.view.mountDate,e||(n.loading=!0,n.view.setState({surveys:null,terminatedSurveys:null})),e=e||n.view.props.element;if(e===n.view.props.element){h.next=7;break}return h.abrupt("return");case 7:if(!!s&&!!o){h.next=29;break}if(!s&&!!window.walletAddress){h.next=12;break}h.t0="0",h.next=15;break;case 12:return h.next=14,window.blockchainCall(e.token.methods.balanceOf,window.walletAddress);case 14:h.t0=h.sent;case 15:s=h.t0;if(!!n.view&&n.view.mountDate===a&&e===n.view.props.element){h.next=18;break}return h.abrupt("return");case 18:h.t1=o;if(h.t1){h.next=25;break}return h.t2=parseInt,h.next=23,window.web3.eth.getBlockNumber();case 23:h.t3=h.sent,h.t1=(0,h.t2)(h.t3);case 25:o=h.t1;if(!!n.view&&n.view.mountDate===a&&e===n.view.props.element){h.next=28;break}return h.abrupt("return");case 28:n.view.setState({myBalance:s,currentBlock:o});case 29:t=t||{},i=i||{},u=u||o;if(!(u<=e.startBlock)){h.next=35;break}return delete n.loading,h.abrupt("return",n.view.setState({surveys:t,terminatedSurveys:i}));case 35:return h.prev=35,f=u-n.blockLimit,f=f<e.startBlock?e.startBlock:f,h.next=40,window.getLogs({address:e.dFO.options.allAddresses,topics:[n.proposalTopic],fromBlock:f,toBlock:u});case 40:l=h.sent;if(!!n.view&&n.view.mountDate===a&&e===n.view.props.element){h.next=43;break}return h.abrupt("return");case 43:c=l.length-1;case 44:if(!(c>=0)){h.next=53;break}return h.next=47,n.loadSurvey(e,l[c],o,t,i,a);case 47:if(!!n.view&&n.view.mountDate===a&&e===n.view.props.element){h.next=49;break}return h.abrupt("return");case 49:n.view.setState({surveys:n.loading&&(!t||Object.keys(t).length===0)?null:t,terminatedSurveys:n.loading&&(!i||Object.keys(i).length===0)?null:i});case 50:c--,h.next=44;break;case 53:return h.abrupt("return",n.loadSurveys(e,t,i,s,o,f));case 56:h.prev=56,h.t4=h["catch"](35),n.view.emit("message",h.t4.message||h.t4,"error");case 59:case"end":return h.stop()}},r,this,[[35,56]])}));return t}(),n.loadSurvey=function(){function t(t,n,r,i,s,o){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i,s,o,u){var a,f,l,c,h;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:p.prev=0;if(!!n.view&&n.view.mountDate===u&&e===n.view.props.element){p.next=3;break}return p.abrupt("return");case 3:a=window.web3.eth.abi.decodeParameter("address",t.data);if(!!a&&a!==window.voidEthereumAddress){p.next=6;break}return p.abrupt("return");case 6:return f=t.blockNumber+"_"+t.id,l=s[f]||o[f]||{},delete s[f],delete o[f],l.key=f,l.id=t.id,l.raisedBy=t.address.toLowerCase(),l.address=a,l.startBlock=t.blockNumber,p.next=17,window.getLogs({address:e.dFO.options.allAddresses,topics:[n.proposalSetTopic,window.web3.eth.abi.encodeParameter("address",l.address)],fromBlock:e.startBlock,toBlock:i});case 17:c=p.sent;if(!!n.view&&n.view.mountDate===u&&e===n.view.props.element){p.next=20;break}return p.abrupt("return");case 20:return l.terminated=(l.checkedTimes=c.length)>0,c.length>0&&(l.terminationData=c[0]),p.next=24,window.getLogs({address:e.dFO.options.allAddresses,topics:[n.proposalCheckedTopic,window.web3.eth.abi.encodeParameter("address",l.address)],fromBlock:e.startBlock,toBlock:i});case 24:h=p.sent;if(!!n.view&&n.view.mountDate===u&&e===n.view.props.element){p.next=27;break}return p.abrupt("return");case 27:return l.checkedTimes=h.length,h.length>0&&(l.lastCheckedBlock=h[h.length-1].blockNumber),!l.checkedTimes&&l.terminated&&(l.checkedTimes=1),p.abrupt("return",(l.checkedTimes?o:s)[f]=l);case 33:p.prev=33,p.t0=p["catch"](0),console.error(p.t0);case 36:case"end":return p.stop()}},r,this,[[0,33]])}));return t}()};var Proposals=React.createClass({displayName:"Proposals",requiredModules:["spa/proposal"],requiredScripts:["spa/loaderMini.jsx"],getDefaultSubscriptions:function(){var t=this;return{"surveys/refresh":function(){return t.controller.loadSurveys(t.props.element,t.state.surveys,t.state.terminatedSurveys)},toggle:function(n){return t.setState({toggle:n})},"ethereum/ping":this.controller.updateBalance}},componentDidMount:function(){this.mountDate=(new Date).getTime()+"_"+Math.random(),this.controller.loadSurveys()},componentWillUnmount:function(){delete this.controller.loading,delete this.mountDate},sortSurveys:function(t){return Object.values(t).sort(function(e,t){var n=parseInt(e.key.substring(0,e.key.indexOf("_"))),r=t?parseInt(t.key.substring(0,t.key.indexOf("_"))):0;return n<r?1:n>r?-1:0})},render:function(){var t=this;return React.createElement("section",{className:"ProposalsIndex"},React.createElement("section",{className:"ProposalsActiveIndex"},React.createElement("h2",null,"Active Proposals"),t.state&&t.state.surveys&&Object.keys(t.state.surveys).length===0&&React.createElement("span",null,"No active proposals right now"),React.createElement("ul",null,t.state&&t.state.surveys&&t.sortSurveys(t.state.surveys).map(function(e){return React.createElement("li",{key:e.key},React.createElement(Proposal,{toggle:t.state.toggle,newController:!0,element:t.props.element,survey:e,myBalance:t.state.myBalance,currentBlock:t.state.currentBlock}))})),(!t.controller||t.controller.loading)&&React.createElement(LoaderMini,{message:"Loading Active Proposals"})),React.createElement("section",{className:"ProposalsOldIndex"},React.createElement("h2",null,"Proposals History"),t.state&&t.state.terminatedSurveys&&Object.keys(t.state.terminatedSurveys).length===0&&React.createElement("span",null,"No Proposal History right now"),React.createElement("ul",null,t.state&&t.state.terminatedSurveys&&t.sortSurveys(t.state.terminatedSurveys).map(function(e){return React.createElement("li",{key:e.key},React.createElement(Proposal,{toggle:t.state.toggle,newController:!0,element:t.props.element,survey:e,myBalance:t.state.myBalance,currentBlock:t.state.currentBlock}))})),(!t.controller||t.controller.loading)&&React.createElement(LoaderMini,{message:"Loading Proposals History"})))}});var RulesController=function(t){var n=this;n.view=t,n.indexChange=function(t){t.index=t.index||0,t.link=t.link||"";if(!t.indexFile&&!t.link)return n.view.emit("message","You must specify an index or a Link to proceed","error");if(t.index===n.view.props.element.index&&t.link===n.view.props.element.link)return;t.linkCheck&&n.changeDistributed(t),t.indexCheck&&n.changeDecentralized(t)},n.changeDistributed=function(t){if(t.link!==n.view.props.element.link&&!(new RegExp(window.urlRegex)).test(t.link))return n.view.emit("message","Inserted link is not a valid URL","error");var r=["DFO Hub - Utilities - Get Distributed Index","This functionality provides the link page which locates the DFO"],i=["Setting Distributed Index value to "+t.link];!n.view.props.element.link&&r.push(i[0]),t.link||(i=["Clearing Distributed Index"]);var s=t.link?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("string memory").split("value").join('\\"'+t.link+'\\"')):undefined;window.sendGeneratedProposal(n.view.props.element,{title:i[0],functionalityName:t.link?"getLink":"",functionalityMethodSignature:t.link?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:t.link&&n.view.props.element.link?"getLink":"",functionalityOutputParameters:t.link?'["string"]':""},s,undefined,r,i)},n.changeDecentralized=function(t){var r=["DFO Hub - Utilities - Get Decentralized Index","This functionality provides the Base64 index containing the Decentralized Index page representing this DFO"],i=["Setting Decentralized Index value"];t.index||(i=["Clearing Decentralized Index"]);var s=t.index?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("uint256")):undefined,o=isNaN(t.index)?window.split(t.index):undefined;window.sendGeneratedProposal(n.view.props.element,{title:i[0],functionalityName:t.index?"getIndex":"",functionalityMethodSignature:t.index?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:!t.index||n.view.props.element.index?"getIndex":"",functionalityOutputParameters:t.index?'["uint256"]':"",sequentialOps:o&&[{name:"Minting Index page ("+o.length+" Txns)",call:function(t){var s=this;return _asyncToGenerator(regeneratorRuntime.mark(function u(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.mint(o);case 2:t.index=s.sent,t.updates=["Setting Decentralized Index value to "+t.index],!n.view.props.element.index&&r.push(i[0]),t.template=JSON.parse(JSON.stringify(t.template).split("value").join(window.numberToString(t.index)));case 6:case"end":return s.stop()}},u,s)}))()}}]},s,undefined,r,i)},n.proposalLengthChange=function(t){if(t.proposalLength===parseInt(n.view.props.element.blocks))return;if(!t.proposalLength||isNaN(t.proposalLength)||t.proposalLength<1)return n.view.emit("message","You must specify a number greater than 0 to proceed","error");var r=JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getMinimumBlockNumberForSurvey()").split("type").join("uint256").split("value").join(t.proposalLength));window.sendGeneratedProposal(n.view.props.element,{title:"Updating Proposal Length",functionalityName:"getMinimumBlockNumberForSurvey",functionalitySubmitable:!1,functionalityMethodSignature:"getMinimumBlockNumberForSurvey()",functionalityReplace:"getMinimumBlockNumberForSurvey",functionalityOutputParameters:'["uint256"]'},r,undefined,["Survey Length"],["Survey Length updated to "+t.proposalLength+" blocks"])},n.emergencyLengthChange=function(t){if(t.minimumBlockNumberForEmergencySurvey===parseInt(n.view.props.element.minimumBlockNumberForEmergencySurvey))return;if(!t.minimumBlockNumberForEmergencySurvey||isNaN(t.minimumBlockNumberForEmergencySurvey)||t.minimumBlockNumberForEmergencySurvey<1)return n.view.emit("message","You must specify a number greater than 0 to proceed","error");var r=JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getMinimumBlockNumberForEmergencySurvey()").split("type").join("uint256").split("value").join(t.minimumBlockNumberForEmergencySurvey));window.sendGeneratedProposal(n.view.props.element,{title:"Updating Emergency Proposal Length",functionalityName:"getMinimumBlockNumberForEmergencySurvey",functionalitySubmitable:!1,functionalityMethodSignature:"getMinimumBlockNumberForEmergencySurvey()",functionalityReplace:"getMinimumBlockNumberForEmergencySurvey",functionalityOutputParameters:'["uint256"]'},r,undefined,["Emergency Survey Length"],["Emergency Survey Length updated to "+t.minimumBlockNumberForEmergencySurvey+" blocks"])},n.emergencyPenaltyChange=function(t){var r=window.toDecimals(t.emergencySurveyStaking,n.view.props.element.decimals);t.emergencySurveyStaking=parseInt(r);if(t.emergencySurveyStaking===parseInt(n.view.props.element.emergencySurveyStaking))return;if(isNaN(t.emergencySurveyStaking)||t.emergencySurveyStaking<0)return n.view.emit("message","You must specify a number greater or equal to 0 to proceed","error");if(t.emergencySurveyStaking>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var i=JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getEmergencySurveyStaking()").split("type").join("uint256").split("value").join(r));window.sendGeneratedProposal(n.view.props.element,{title:"Updating Emergency Proposal Stake",functionalityName:"getEmergencySurveyStaking",functionalitySubmitable:!1,functionalityMethodSignature:"getEmergencySurveyStaking()",functionalityReplace:"getEmergencySurveyStaking",functionalityOutputParameters:'["uint256"]'},i,undefined,["Emergency Survey Staking"],["Emergency Survey Staking updated to "+window.fromDecimals(t.emergencySurveyStaking,n.view.props.element.decimals)+" Voting Tokens"])},n.quorumChange=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=window.numberToString(e.quorum),i=window.toDecimals(e.quorum,n.view.props.element.decimals),e.quorum=parseInt(i);if(e.quorum!==parseInt(n.view.props.element.quorum)){a.next=5;break}return a.abrupt("return");case 5:if(!(isNaN(e.quorum)||e.quorum<0)){a.next=7;break}return a.abrupt("return",n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error"));case 7:if(!(e.quorum>parseInt(n.view.props.element.totalSupply))){a.next=9;break}return a.abrupt("return",n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error"));case 9:s=["DFO Hub - Utilities - Get Quorum","This functionality returns the quorum value needed to accept a Survey"],o=["Setting quorum value to "+t+" "+n.view.props.element.symbol],!n.view.props.element.quorum&&s.push(o[0]),e.quorum===0&&(o=["Clearing quorum"]),u=e.quorum?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("uint256").split("value").join(i)):undefined,window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:e.quorum?"getQuorum":"",functionalityMethodSignature:e.quorum?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:e.quorum===0||parseInt(n.view.props.element.quorum)?"getQuorum":"",functionalityOutputParameters:e.quorum?'["uint256"]':""},u,undefined,s,o);case 15:case"end":return a.stop()}},r,this)}));return t}(),n.proposalStakeChange=function(t){var r=window.numberToString(t.minimumStaking),i=window.toDecimals(t.minimumStaking,n.view.props.element.decimals);t.minimumStaking=parseInt(i);if(t.minimumStaking===parseInt(n.view.props.element.minimumStaking))return;if(isNaN(t.minimumStaking)||t.minimumStaking<0)return n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error");if(t.minimumStaking>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var s=["DFO Hub - Utilities - Get Proposal Stake","This functionality provides the amount of voting tokens needed to be staked to make a new proposal"],o=["Setting Proposal Stake value to "+r+" "+n.view.props.element.symbol];!n.view.props.element.minimumStaking&&s.push(o[0]),t.minimumStaking===0&&(o=["Clearing Proposal Stake"]);var u=t.minimumStaking?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("uint256").split("value").join(i)):undefined;window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:t.minimumStaking?"getMinimumStaking":"",functionalityMethodSignature:t.minimumStaking?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:t.minimumStaking===0||parseInt(n.view.props.element.minimumStaking)?"getMinimumStaking":"",functionalityOutputParameters:t.minimumStaking?'["uint256"]':""},u,undefined,s,o)},n.surveySingleRewardChange=function(t){var r=window.numberToString(t.surveySingleReward),i=window.toDecimals(t.surveySingleReward,n.view.props.element.decimals);t.surveySingleReward=parseInt(i);if(t.surveySingleReward===parseInt(n.view.props.element.surveySingleReward))return;if(isNaN(t.surveySingleReward)||t.surveySingleReward<0)return n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error");if(t.surveySingleReward>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var s=["DFO Hub - Utilities - Get Dev Incentives","This functionality provides the amount of voting tokens needed to be staked to make a new proposal"],o=["Setting Dev Incentives value to "+r+" "+n.view.props.element.symbol];!n.view.props.element.surveySingleReward&&s.push(o[0]),t.surveySingleReward===0&&(o=["Clearing Dev Incentives"]);var u=t.surveySingleReward?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("type").join("uint256").split("value").join(i)):undefined;window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:t.surveySingleReward?"getSurveySingleReward":"",functionalityMethodSignature:t.surveySingleReward?"getValue()":"",functionalitySubmitable:!1,functionalityReplace:t.surveySingleReward===0||parseInt(n.view.props.element.surveySingleReward)?"getSurveySingleReward":"",functionalityOutputParameters:t.surveySingleReward?'["uint256"]':""},u,undefined,s,o)},n.votesHardCapChange=function(t){var r=window.numberToString(t.votesHardCap),i=window.toDecimals(t.votesHardCap,n.view.props.element.decimals);t.votesHardCap=parseInt(i);if(t.votesHardCap===parseInt(n.view.props.element.votesHardCap))return;if(isNaN(t.votesHardCap)||t.votesHardCap<0)return n.view.emit("message","You must specify a number greater than or equal to 0 to proceed","error");if(t.votesHardCap>parseInt(n.view.props.element.totalSupply))return n.view.emit("message","Specified amount exceedes Total Voting Token Supply","error");var s=["DFO Hub - Utilities - Get Votes Hard Cap",'If a proposal reaches a fixed number of voting tokens (example the 90% of the total Token supply) for "Approve" or "Disapprove" it, the proposal automatically ends, independently from the duration rule.'],o=["Setting Votes Hard Cap value to "+r+" "+n.view.props.element.symbol];!n.view.props.element.votesHardCap&&s.push(o[0]),t.votesHardCap===0&&(o=["Clearing Votes Hard Cap"]);var u=t.votesHardCap?JSON.parse(JSON.stringify(window.context.simpleValueProposalTemplate).split("getValue()").join("getVotesHardCap()").split("type").join("uint256").split("value").join(i)):undefined;window.sendGeneratedProposal(n.view.props.element,{title:o[0],functionalityName:t.votesHardCap?"getVotesHardCap":"",functionalityMethodSignature:t.votesHardCap?"getVotesHardCap()":"",functionalitySubmitable:!1,functionalityReplace:t.votesHardCap===0||parseInt(n.view.props.element.votesHardCap)?"getVotesHardCap":"",functionalityOutputParameters:t.votesHardCap?'["uint256"]':""},u,undefined,s,o)}};var Rules=React.createClass({displayName:"Rules",requiredModules:["spa/editor"],requiredScripts:["spa/loaderMini.jsx","spa/okBoomer.jsx","spa/loaderMinimino"],uploadFile:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.currentTarget.files[0],r=this,i=new FileReader;i.addEventListener("load",function(){r.indexValue.value=i.result},!1),i.readAsDataURL(n)},changeElementInfo:function(t){if(!t)return;t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=window.getData($($(t.currentTarget).parent()).parent());this.controller[this.state.change+"Change"](n)},componentDidMount:function(){var t=this;window.blockchainCall(t.props.element.dFO.methods.read,"getMinimumBlockNumberForSurvey","0x").then(function(e){t.props.element.blocks=window.web3.eth.abi.decodeParameters(["uint256"],e)[0],t.forceUpdate()})},renderChangeButton:function(t){var n=this;if(!n.props.edit)return;return React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB"+(n.state&&n.state.change===t?" Editing":""),href:"javascript:;",onClick:function(){return n.setState({change:n.state&&n.state.change===t?null:t})}},"Change")},renderChanger:function(t){var n=this;if(!n.props.edit||!n.state||!n.state.change)return;for(var r in t){var i=t[r];if(n.state.change===i){var s=n["render"+i.substring(0,1).toUpperCase()+i.substring(1)+"Changer"];return React.createElement("section",{className:"DFOFunctionIndexIcon"},s&&s(),React.createElement("aside",null,React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualButtonB",onClick:n.changeElementInfo},"Propose")))}}},renderIndexChanger:function(){var t=this;return React.createElement("ul",null,React.createElement("li",null,React.createElement("p",null,'DFOs Front-End is designed to work in two layers, the "Distributed Layer" and the "Decentralized Layer." The Distributed Layer is a version of the Front-End deployed via IPFS or Swarn, for fast and free updates. The Decentralized Layer is a version of the Front-End via On-Chain files, expensive but critical to making a DFO Censorship Resistant. The ENS automatically redirects users to the Distributed Layer and if it\'s Censored to the Decentralized Layer.')),React.createElement("li",null,React.createElement("section",null,React.createElement("a",{href:this.props.element.link?"javascript:;":undefined,className:this.props.element.link?"LinkVisualButton"+(this.state&&this.state.indexShow==="link"?" Editing":""):undefined,onClick:function(){return t.props.element.link&&t.setState({indexShow:t.state&&t.state.indexShow==="link"?null:"link"})}},"Code"),React.createElement("input",{id:"linkCheck",type:"checkbox",className:"DFOFunctionIndexIconSelector",ref:function(n){return t.linkCheck=n},onChange:function(n){t.linkValue.value=t.props.element.link||"",t.linkValue.disabled=!n.currentTarget.checked,t.indexCheck.checked=!1,t.indexFile.disabled=!0}}),React.createElement("label",{htmlFor:"linkCheck"},"Distributed Layer"),React.createElement("input",{className:"DFOFunctionIndexIconText",id:"link",type:"text",placeholder:"Link IPFS Swarm",ref:function(n){return(t.linkValue=n)&&(n.value=t.props.element.link||"")},disabled:!0})),React.createElement("section",null,React.createElement("a",{href:this.props.element.index?"javascript:;":undefined,className:this.props.element.index?"LinkVisualButton"+(this.state&&this.state.indexShow==="index"?" Editing":""):undefined,onClick:function(){return t.props.element.index&&t.props.element.index!=="0"&&t.setState({indexShow:t.state&&t.state.indexShow==="index"?null:"index"})}},"Code"),React.createElement("input",{type:"hidden",id:"index",ref:function(n){return(t.indexValue=n)&&(n.value=t.props.element.index)}}),React.createElement("input",{id:"indexCheck",type:"checkbox",className:"DFOFunctionIndexIconSelector",ref:function(n){return t.indexCheck=n},onChange:function(n){t.indexValue.value=t.props.element.index,t.indexFile.value="",t.indexFile.disabled=!n.currentTarget.checked,t.linkCheck.checked=!1,t.linkValue.disabled=!0}}),React.createElement("label",{htmlFor:"indexCheck"},"Decentralized Layer"),React.createElement("input",{className:"DFOFunctionIndexIconUpload",id:"indexFile",type:"file",accept:".html,.htm",ref:function(n){return t.indexFile=n},disabled:!0,onChange:this.uploadFile}))),this.state&&this.state.indexShow&&React.createElement("section",null,this.state.indexShow==="index"&&React.createElement(Editor,{lang:"html",readonly:"true",first:this.state.indexShow==="index"?this.props.element.index:undefined}),this.state.indexShow==="link"&&React.createElement(Editor,{lang:"html",readonly:"true",link:this.state.indexShow==="link"?this.props.element.link:undefined})))},renderSurveySingleRewardChanger:function(){return this.renderDefaultChanger("The number of Voting Tokens as a reward to the issuer for every single Successful Proposal.","Dev Incentives","surveySingleReward",window.fromDecimals(this.props.element.surveySingleReward,this.props.element.decimals))},renderProposalLengthChanger:function(){return this.renderDefaultChanger("Every survey has a length expressed in Blocks. Here you can set the duration of Surveys for this DFO.","Proposal Length","proposalLength",this.props.element.blocks)},renderEmergencyLengthChanger:function(){return this.renderDefaultChanger("The length in Blocks for Emergency Surveys.","Emergency Length","minimumBlockNumberForEmergencySurvey",this.props.element.minimumBlockNumberForEmergencySurvey)},renderEmergencyPenaltyChanger:function(){return this.renderDefaultChanger("The Fee that Emergency Proposal Issuer must stake to propose it. This stake will be lost if the Proposal fails.","Emergency Penalty","emergencySurveyStaking",window.fromDecimals(this.props.element.emergencySurveyStaking,this.props.element.decimals))},renderQuorumChanger:function(){return this.renderDefaultChanger("The Quorum is a minimum number of Voting Tokens staked in a survey to reach the success status.","Quorum","quorum",window.fromDecimals(this.props.element.quorum,this.props.element.decimals))},renderProposalStakeChanger:function(){return this.renderDefaultChanger("The minimum of Token Stacked needed to create a new Proposal.","Proposal Stake","minimumStaking",window.fromDecimals(this.props.element.minimumStaking,this.props.element.decimals))},renderVotesHardCapChanger:function(){return this.renderDefaultChanger('If a proposal reaches a fixed number of voting tokens (example the 90% of the total Token supply) for "Approve" or "Disapprove" it, the proposal automatically ends, independently from the duration rule.',"Hard Cap","votesHardCap",window.fromDecimals(this.props.element.votesHardCap,this.props.element.decimals))},renderDefaultChanger:function(t,n,r,i){return React.createElement("ul",null,React.createElement("li",null,React.createElement("p",{ref:function(n){return n&&(n.innerHTML=t)}},t)),React.createElement("li",null,React.createElement("section",null,React.createElement("label",{htmlFor:r,ref:function(t){return t&&(t.innerHTML=n)}},n),React.createElement("input",{className:"DFOFunctionIndexIconText",id:r,type:"number",min:"0",ref:function(t){return t&&(t.value=i)}}))))},render:function(){var t=this;return React.createElement("section",{className:"DFOOverview"},React.createElement("ul",{className:"DFOHosting"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Governance Rules")),React.createElement("li",{className:"TheDappInfo2"},React.createElement("h5",{className:"DFOHostingTitle"},"🏰 Regular Proposals: ",React.createElement("a",{className:"EditDFOYoYO"+(t.dfoElement&&t.dfoElement.state&&t.dfoElement.state.okBoomer?" Editing":""),href:"javascript:;",onClick:function(){return t.emit("okBommer/toggle")}},"i")),React.createElement("section",{className:"DFOTitleSection"},t.props.element.blocks===undefined&&React.createElement(LoaderMinimino,null),t.props.element.blocks!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Length: ",React.createElement("b",null,t.props.element.blocks),React.createElement("aside",null," Blocks ")," ",t.renderChangeButton("proposalLength"))),React.createElement(OkBoomer,{okBoomer:t.props.okBoomer},"The duration of a Proposal"),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,t.props.element.symbol&&t.props.element.totalSupply&&t.props.element.quorum!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Quorum: ",React.createElement("b",null,window.tokenPercentage(t.props.element.quorum,t.props.element.totalSupply)),React.createElement("aside",null,React.createElement("b",null," (",window.fromDecimals(t.props.element.quorum,t.props.element.decimals))," ",t.props.element.symbol,")")," ",t.renderChangeButton("quorum")))),React.createElement(OkBoomer,{okBoomer:t.props.okBoomer},"The minimum number of Voting Tokens staked by voters to reach the a positive result."),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,t.props.element.symbol&&t.props.element.totalSupply&&t.props.element.minimumStaking!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Generation Stake: ",React.createElement("b",null,window.tokenPercentage(t.props.element.minimumStaking,t.props.element.totalSupply)),React.createElement("aside",null,React.createElement("b",null," (",window.fromDecimals(t.props.element.minimumStaking,t.props.element.decimals))," ",t.props.element.symbol,")")," ",t.renderChangeButton("proposalStake")))),React.createElement(OkBoomer,{okBoomer:t.props.okBoomer},"The minimum number of Voting Tokens staked to create a Proposal."),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,t.props.element.symbol&&t.props.element.totalSupply&&t.props.element.votesHardCap!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},"Hard Cap: ",React.createElement("b",null,window.tokenPercentage(t.props.element.votesHardCap,t.props.element.totalSupply)),React.createElement("aside",null,React.createElement("b",null," (",window.fromDecimals(t.props.element.votesHardCap,t.props.element.decimals))," ",t.props.element.symbol,")")," ",t.renderChangeButton("votesHardCap")))),React.createElement(OkBoomer,{okBoomer:t.props.okBoomer},"If a proposal reaches a fixed number of voting tokens (example the 90% of the total Token supply) for “Approve” or “Disapprove” it, the proposal automatically ends, independently from the duration rule."),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,t.props.element.symbol&&t.props.element.totalSupply&&t.props.element.surveySingleReward!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"}," Proposal Reward: ",React.createElement("b",null,window.fromDecimals(t.props.element.surveySingleReward,t.props.element.decimals))," ",React.createElement("aside",{className:"DFOOverviewPerch"},t.props.element.symbol)," ",t.renderChangeButton("surveySingleReward")))),React.createElement(OkBoomer,{okBoomer:t.props.okBoomer},"The number of Voting Tokens as a reward to the issuer for every single Successful Proposal.")),React.createElement("li",{className:"TheDappInfo2"},React.createElement("h5",{className:"DFOHostingTitle"},"🚨 Emergency Proposals: ",React.createElement("a",{className:"EditDFOYoYO"+(t.dfoElement&&t.dfoElement.state&&t.dfoElement.state.okBoomer?" Editing":""),href:"javascript:;",onClick:function(){return t.emit("okBommer/toggle")}},"i")),React.createElement("section",{className:"DFOTitleSection"},t.props.element.minimumBlockNumberForEmergencySurvey===undefined&&React.createElement(LoaderMinimino,null),t.props.element.minimumBlockNumberForEmergencySurvey!==undefined&&React.createElement("p",{className:"DFOLabelTitleInfo"},t.renderChangeButton("emergencyLength")," Length: ",React.createElement("b",null,t.props.element.minimumBlockNumberForEmergencySurvey)," ",React.createElement("aside",null,"Blocks"))),React.createElement(OkBoomer,{okBoomer:t.props.okBoomer},"The duration of an Emergency Proposal"),React.createElement("section",{className:"DFOTitleSection"},React.createElement(AsyncValue,null,t.props.element.symbol&&t.props.element.totalSupply&&t.props.element.emergencySurveyStaking&&React.createElement("p",{className:"DFOLabelTitleInfo"},t.renderChangeButton("emergencyPenalty")," Penalty fee: ",React.createElement("b",null,window.tokenPercentage(t.props.element.emergencySurveyStaking,t.props.element.totalSupply)),React.createElement("aside",null," (",React.createElement("b",null,window.fromDecimals(t.props.element.emergencySurveyStaking,t.props.element.decimals))," ",t.props.element.symbol,")")))),React.createElement(OkBoomer,{okBoomer:t.props.okBoomer},"The Fee that Emergency Proposal Issuer must stake to propose it. This stake will be lost if the Proposal fails.")),t.renderChanger(["proposalStake","emergencyLength","emergencyPenalty","quorum","proposalLength","votesHardCap","surveySingleReward"])))}});var SequentialOps=React.createClass({displayName:"SequentialOps",requiredScripts:["spa/loaderMini.jsx"],go:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this.goButton;if($(n).hasClass("disabled"))return;$(n).addClass("disabled"),this.cancelButton&&$(this.cancelButton).addClass("disabled");var r=this;for(var i in r.children){var s=r.children[i];delete s.loading,delete s.ko}var o=this.getIndex(),u=r.children[o];u.loading=!0,r.emit("message"),r.forceUpdate(function(){var e=function s(){r.unsubscribe("transaction/start",s),u.transacting=!0,r.forceUpdate()};r.subscribe("transaction/start",e);var t=$(r.list.children("li.child-"+o)[0]).children().find('input.include[type="checkbox"]')[0];t&&(t.disabled=!0);var i=$('input.transactionHash[type="text"][data-i="'+o+'"]')[0];i&&(i.disabled=!0),u.transactionHash=u.bypass===!0?undefined:u.transactionHash,(u.transactionHash?window.web3.eth.getTransactionReceipt(u.transactionHash).then(function(e){return u.onTransaction(r.ctx,e)}):u.call(r.ctx,u.bypass)).then(function(){r.unsubscribe("transaction/start",e),delete u.loading,delete u.transacting,n&&$(n).removeClass("disabled"),r.cancelButton&&$(r.cancelButton).removeClass("disabled"),u.ok=!0,r.forceUpdate(function(){r.props.onCallback&&r.props.onCallback(o,o===r.children.length-1)})}).catch(function(s){r.unsubscribe("transaction/start",e),delete u.loading,delete u.transacting,t&&(t.disabled=!1),i&&(i.disabled=!1),n&&$(n).removeClass("disabled"),r.cancelButton&&$(r.cancelButton).removeClass("disabled"),u.ko=(s.message||s)!=="stopped"&&(s.message||s).toLowerCase().indexOf("user denied")===-1,u.ko&&r.emit("message",s.message||s,"error"),r.forceUpdate()})})},stop:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.emit("transaction/stop"),this.cancelButton&&$(this.cancelButton).removeClass("disabled"),this.goButton&&$(this.goButton).removeClass("disabled");var n=this.getIndex();n=isNaN(n)?this.children.length-1:n,delete this.children[n].loading,delete this.children[n].transacting,this.forceUpdate()},onCancel:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if($(this.cancelButton).hasClass("disabled"))return;this.emit("message"),this.emit("loader/toggle",!1)},onBypassChange:function(t){this.children[t.currentTarget.dataset.i].bypass=!t.currentTarget.checked;var n=$('input.transactionHash[type="text"][data-i="'+t.currentTarget.dataset.i+'"]')[0];n&&(n.disabled=!t.currentTarget.checked),n&&(n.value=""),n&&delete this.children[t.currentTarget.dataset.i].transactionHash},onTransactionHash:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.children[t.currentTarget.dataset.i].transactionHash=t.currentTarget.value},getIndex:function(){var t;for(var n in this.children){var r=this.children[n];if(!r.ok){t=n;break}}return parseInt(t)},onRecovery:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this;if(n.children){var r=this.getIndex();r=isNaN(r)?n.children.length-1:r,(n.children[r].loading||n.children[r].transacting)&&this.stop(t)}if($(t.currentTarget).hasClass("disabled"))return;this.setState({advanced:!this.state||!this.state.advanced},function(){if(this.state.advanced)return;for(var e=0;e<n.children.length;e++){var t=n.children[e];t.ok||delete t.transactionHash}})},render:function(){var t=this,n=this,r=undefined,i=undefined;n.props.initialContext&&(r=n.props.initialContext.element,delete n.props.initialContext.element,i=n.props.initialContext.editor,delete n.props.initialContext.editor),n.ctx=n.ctx||(n.props.initialContext?JSON.parse(JSON.stringify(n.props.initialContext)):{}),r&&(n.ctx.element=r),r&&n.props.initialContext&&(n.props.initialContext.element=r),i&&(n.ctx.editor=i),i&&n.props.initialContext&&(n.props.initialContext.editor=i),n.children=n.children||n.props.children;var s=this.getIndex();s=isNaN(s)?n.children.length-1:s;var o=n.children[s].actionName||(s==0?"Start":s===n.children.length-1?"Finish":"Next");return React.createElement("div",null,React.createElement("aside",null,"Before leaving this page, make all the transactions listed. Otherwise the entire operation will not be completed successfully"),n.ctx.title&&React.createElement("h3",null,n.ctx.title),React.createElement("ol",{ref:function(t){return n.list=$(t)}},n.children.map(function(e,n){return React.createElement("li",{key:n,className:"child-"+n},React.createElement("label",null,e.bypassable&&React.createElement("input",{type:"checkbox",className:"include",ref:function(n){return n&&(n.checked=!e.bypass)},disabled:e.ok,"data-i":n,onChange:t.onBypassChange}),React.createElement("p",null,React.createElement("b",null,e.name)),e.onTransaction&&(t.state&&t.state.advanced&&!e.ok||e.ok&&e.transactionHash)&&[React.createElement("p",{className:"Pistombrillo"},React.createElement("label",null,"If you have already deployed this Smart Contract, you can paste here the transaction hash, to proceed without needs re-deploy it and pay additional ETH fees."),React.createElement("input",{type:"text",className:"transactionHash",ref:function(n){return n&&(n.value=e.transactionHash||"")},disabled:e.ok,"data-i":n,placeholder:"Transaction Hash",onKeyUp:t.onTransactionHash,onChange:t.onTransactionHash}))],React.createElement("span",{className:e.loading?"loaderMinimino":""},e.ok&&React.createElement("span",null,"✅"),e.ko&&React.createElement("span",null,"⛔")),!1,e.description&&React.createElement("span",{className:"Pistombrillo"},e.description)))})),n.props.hideGoButton+""!="true"&&React.createElement("div",{className:"LetsGoPika"},n.props.showCancelButton+""=="true"&&React.createElement("a",{href:"javascript:;",ref:function(n){return t.cancelButton=n},onClick:this.onCancel},"Cancel"),React.createElement("a",{href:"javascript:;",className:"LinkVisualButtonB",ref:function(n){return t.goButton=n},onClick:this.go},o),React.createElement("a",{href:"javascript:;",className:"LinkVisualButtonB LLinkVisualButtonSpecial"+(this.state&&this.state.advanced?" Edited":""),onClick:this.onRecovery,ref:function(n){return t.recoveryButton=n}},"Recovery")))}});var StakeController=function(t){var n=this;n.view=t,n.slippage=new UniswapFraction(window.context.slippageNumerator,window.context.slippageDenominator),n.calculateBalance=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.blockchainCall(n.view.props.element.token.methods.balanceOf,window.walletAddress);case 2:return t=s.sent,s.next=5,n.getSecondTokenData(e===undefined?n.pool.value.split("_")[0]:e);case 5:i=s.sent.balance,n.view.setState({firstBalance:t,secondBalance:i});case 7:case"end":return s.stop()}},r,this)}));return t}(),n.calculateApprove=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u,a,f;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=parseInt,l.next=3,window.blockchainCall(n.view.props.element.token.methods.balanceOf,window.walletAddress);case 3:return l.t1=l.sent,t=(0,l.t0)(l.t1),l.t2=parseInt,l.next=8,window.blockchainCall(n.view.props.element.token.methods.allowance,window.walletAddress,n.view.props.stakingData.stakingManager.options.address);case 8:l.t3=l.sent,i=(0,l.t2)(l.t3),s=i===0||i<t,o=!1,u=n.view.props.stakingData.pairs[e];if(u.symbol==="ETH"){l.next=25;break}return l.t4=parseInt,l.next=17,n.getSecondTokenData(e);case 17:return l.t5=l.sent.balance,a=(0,l.t4)(l.t5),l.t6=parseInt,l.next=22,window.blockchainCall(u.token.methods.allowance,window.walletAddress,n.view.props.stakingData.stakingManager.options.address);case 22:l.t7=l.sent,f=(0,l.t6)(l.t7),o=f===0||f<a?u.symbol:!1;case 25:n.view.setState({approveFirst:s,approveSecond:o}),n.calculateBalance(e);case 27:case"end":return l.stop()}},r,this)}));return t}(),n.approve=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n.view.setState({loadingStake:!1,loadingApprove:!0}),i.prev=1,t=e==="mine"?n.view.props.element.token:n.view.props.stakingData.pairs[n.view.pool.value.split("_")[0]].token,i.t0=window,i.t1=t.methods.approve,i.t2=n.view.props.stakingData.stakingManager.options.address,i.next=8,window.blockchainCall(t.methods.totalSupply);case 8:return i.t3=i.sent,i.next=11,i.t0.blockchainCall.call(i.t0,i.t1,i.t2,i.t3);case 11:n.calculateApprove(parseInt(n.view.pool.value.split("_")[0])),i.next=16;break;case 14:i.prev=14,i.t4=i["catch"](1);case 16:n.view.setState({loadingStake:!1,loadingApprove:!1});case 17:case"end":return i.stop()}},r,this,[[1,14]])}));return t}(),n.max=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.blockchainCall(n.view.props.element.token.methods.balanceOf,window.walletAddress);case 2:s=a.sent;if(e!=="firstAmount"){a.next=8;break}return a.next=6,window.blockchainCall(n.view.props.stakingData.stakingManager.methods.getStakingInfo,i);case 6:o=a.sent[1],parseInt(s)>parseInt(o)&&(s=o);case 8:return s=(new UniswapFraction(s,1)).divide(Math.pow(10,18)).toSignificant(6),a.t0=UniswapFraction,a.next=12,n.getSecondTokenData(t=t||0);case 12:a.t1=a.sent.balance,a.t2=Math.pow(10,t)===1?6:18,u=(new a.t0(a.t1,1)).divide(a.t2).toSignificant(6),n.view[e].value=e==="firstAmount"?s:u,e==="firstAmount"&&n.calculateReward(i),n.calculateOther(e,t,i);case 18:case"end":return a.stop()}},r,this)}));return t}(),n.calculateOther=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=n,a.next=3,n.getSecondTokenData(t,!0);case 3:return a.t1=a.sent.token,a.t2=t,a.next=7,a.t0.calculateReserves.call(a.t0,a.t1,a.t2);case 7:return s=a.sent,o=s[e==="firstAmount"?"secondPerBuidl":"buidlPerSecond"].multiply(window.toDecimals(n.view[e].value.split(",").join("")||"0",t===1?n.view.props.stakingData.pairs[t].decimals:n.view.props.element.decimals)),o=new UniswapFraction(o.toSignificant(100).split(".")[0]),u=(e!=="firstAmount"?o:o.divide(Math.pow(10,n.view.props.stakingData.pairs[t].decimals))).toSignificant(6),n.view[e==="firstAmount"?"secondAmount":"firstAmount"].value=window.formatMoney(u,u.split(".")[1]&&u.split(".")[1].length),e==="firstAmount"&&n.calculateReward(i),a.abrupt("return",o);case 14:case"end":return a.stop()}},r,this)}));return t}(),n.calculateReserves=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o,u,a,f,l,c,h,p;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.t0=window,d.t1=window.context.uniSwapV2PairAbi,d.next=4,window.blockchainCall(window.uniswapV2Factory.methods.getPair,n.view.props.element.token.options.address,e.options.address);case 4:return d.t2=d.sent,i=d.t0.newContract.call(d.t0,d.t1,d.t2),d.next=8,window.blockchainCall(i.methods.token0);case 8:d.t3=d.sent.toLowerCase(),d.t4=n.view.props.element.token.options.address.toLowerCase();if(d.t3!==d.t4){d.next=14;break}d.t5=0,d.next=15;break;case 14:d.t5=1;case 15:return s=d.t5,o=s==0?1:0,d.next=19,window.blockchainCall(i.methods.getReserves);case 19:return u=d.sent,d.t6=parseInt,d.next=23,window.blockchainCall(n.view.props.element.token.methods.decimals);case 23:d.t7=d.sent,a=(0,d.t6)(d.t7);if(t!==0){d.next=29;break}d.t8=18,d.next=34;break;case 29:return d.t9=parseInt,d.next=32,window.blockchainCall(e.methods.decimals);case 32:d.t10=d.sent,d.t8=(0,d.t9)(d.t10);case 34:f=d.t8;if(a>f){l=a-f,c=(new UniswapFraction(u[s],1)).divide(Math.pow(10,l)).toSignificant(6);while(c.indexOf(".")!==-1)l--,c=(new UniswapFraction(u[s],1)).divide(Math.pow(10,l)).toSignificant(6);u[s]=c}return h=new UniswapFraction(u[s],u[o]),p=new UniswapFraction(u[o],u[s]),d.abrupt("return",{buidlPerSecond:h,secondPerBuidl:p});case 39:case"end":return d.stop()}},r,this)}));return t}(),n.calculateReward=function(t){setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n.getTierData();case 3:e=o.sent,e=[e[1][t],e[2][t],e[3][t]],i=window.web3.utils.toBN(window.toDecimals(n.view.firstAmount.value.split(",").join(""),18)).mul(window.web3.utils.toBN(e[0])).div(window.web3.utils.toBN(e[1])).toString(),n.view.reward.innerText=window.formatMoney(window.fromDecimals(i,n.view.props.element.decimals,!0),18),s=window.web3.utils.toBN(i).div(window.web3.utils.toBN(e[2])),n.view.splittedReward.innerText=window.formatMoney(window.fromDecimals(s,n.view.props.element.decimals,!0),18),o.next=13;break;case 11:o.prev=11,o.t0=o["catch"](0);case 13:case"end":return o.stop()}},r,this,[[0,11]])})))},n.getSecondTokenData=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:i=n.view.props.stakingData.pairs[e],o.t0=i.token;if(t!==!0){o.next=6;break}o.t1="0",o.next=9;break;case 6:return o.next=8,i.symbol==="ETH"?window.web3.eth.getBalance(window.walletAddress):window.blockchainCall(i.token.methods.balanceOf,window.walletAddress);case 8:o.t1=o.sent;case 9:return o.t2=o.t1,s={token:o.t0,balance:o.t2},isNaN(parseInt(s.balance))&&(s.balance="0"),o.abrupt("return",s);case 13:case"end":return o.stop()}},r,this)}));return t}(),n.getTierData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;if(n.tierData){t.next=5;break}return t.next=4,window.blockchainCall(n.view.props.stakingData.stakingManager.methods.tierData);case 4:n.tierData=t.sent;case 5:return t.abrupt("return",JSON.parse(JSON.stringify(n.tierData)));case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return",[]);case 11:case"end":return t.stop()}},r,this,[[0,8]])}));return t}(),n.stake=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o,u,a,f,l,c,h;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=window.toDecimals(n.view.firstAmount.value.split(",").join(""),n.view.props.element.decimals),p.next=3,window.blockchainCall(n.view.props.stakingData.stakingManager.methods.getStakingInfo,t);case 3:return s=p.sent,p.next=6,window.blockchainCall(n.view.props.element.token.methods.balanceOf,window.walletAddress);case 6:o=p.sent;if(!(parseInt(i)<parseInt(s[0]))){p.next=9;break}return p.abrupt("return",alert("Amount to stake is less than the current min cap"));case 9:if(!(parseInt(i)>parseInt(s[2]))){p.next=11;break}return p.abrupt("return",alert("Amount to stake must be less than the current remaining one"));case 11:if(!(parseInt(i)>parseInt(o))){p.next=13;break}return p.abrupt("return",alert("You don't have enough "+n.view.props.element.symbol+" balance to stake!"));case 13:return n.view.setState({staked:null,loadingStake:!0,loadingApprove:!1}),i=new UniswapFraction(i,1),p.next=17,n.calculateOther("firstAmount",e,t);case 17:return u=p.sent,a=i.subtract(i.multiply(n.slippage)).toSignificant(100).split(".")[0],f=u.subtract(u.multiply(n.slippage)).toSignificant(100).split(".")[0],i=i.toSignificant(100).split(".")[0],u=u.toSignificant(100).split(".")[0],p.t0=parseInt(u),p.t1=parseInt,p.next=26,n.getSecondTokenData(e);case 26:p.t2=p.sent,p.t3=(0,p.t1)(p.t2).balance;if(!(p.t0>p.t3)){p.next=30;break}return p.abrupt("return",alert("You don't have enough "+n.view.props.stakingData.pairs[e].symbol+" balance to stake!"));case 30:return p.t4=window.web3.utils,p.next=33,window.blockchainCall(n.view.props.stakingData.stakingManager.methods.tokens);case 33:return p.t5=e,p.t6=p.sent[p.t5],l=p.t4.toChecksumAddress.call(p.t4,p.t6),c=l===window.wethAddress?u:undefined,h=l===window.wethAddress?"0":u,p.prev=38,p.next=41,window.blockchainCall(c,n.view.props.stakingData.stakingManager.methods.stake,t,e+"",i,a,h,f);case 41:n.view.setState({staked:{amount:n.view.firstAmount.value,period:n.view.props.stakingData.tiers[t].tierKey}},function(){n.view.emit("ethereum/ping"),n.view.emit("staking/refresh")}),p.next=47;break;case 44:p.prev=44,p.t7=p["catch"](38),(p.t7.message||p.t7).toLowerCase().indexOf("user denied")===-1&&alert(p.t7.message||p.t7);case 47:n.view.setState({loadingStake:!1,loadingApprove:!1});case 48:case"end":return p.stop()}},r,this,[[38,44]])}));return t}(),n.load=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(window.walletAddress){d.next=2;break}return d.abrupt("return");case 2:n.view.setState({loadingPosition:!0}),d.t0=n.view.pool;if(!d.t0){d.next=7;break}return d.next=7,n.calculateApprove(parseInt(n.view.pool.value.split("_")[0]));case 7:return d.next=9,window.web3.eth.getBlockNumber();case 9:e=d.sent,t=[],i=0;case 12:if(!(i<n.view.props.stakingData.tiers.length)){d.next=58;break}return d.t1=parseInt,d.next=16,window.blockchainCall(n.view.props.stakingData.stakingManager.methods.length,i);case 16:d.t2=d.sent,s=(0,d.t1)(d.t2),o=0;case 19:if(!(o<s)){d.next=55;break}return d.next=22,window.blockchainCall(n.view.props.stakingData.stakingManager.methods.stakeInfo,i,o);case 22:u=d.sent;if(window.walletAddress.toLowerCase()===u[0].toLowerCase()){d.next=25;break}return d.abrupt("continue",52);case 25:a={position:o,tier:i,sender:u[0],poolPosition:u[1],firstAmount:u[2],secondAmount:u[3],poolAmount:u[4],reward:u[5],endBlock:u[6],partialRewardBlockTimes:u[7],splittedReward:u[8],cumulativeReward:"0"},a.poolAmountFromDecimals=(new UniswapFraction(a.poolAmount,1)).divide(Math.pow(10,18)).toSignificant(6),a.canWithdraw=e>=parseInt(a.endBlock),f=a.partialRewardBlockTimes,l=Array.isArray(f),c=0,f=l?f:f[Symbol.iterator]();case 29:if(!l){d.next=35;break}if(!(c>=f.length)){d.next=32;break}return d.abrupt("break",48);case 32:h=f[c++],d.next=39;break;case 35:c=f.next();if(!c.done){d.next=38;break}return d.abrupt("break",48);case 38:h=c.value;case 39:p=h;if(p!=="0"){d.next=42;break}return d.abrupt("continue",46);case 42:a.nextPartialReward=a.nextPartialReward||p;if(!(e<parseInt(p))){d.next=45;break}return d.abrupt("continue",46);case 45:a.cumulativeReward=window.web3.utils.toBN(a.cumulativeReward).add(window.web3.utils.toBN(a.splittedReward)).toString();case 46:d.next=29;break;case 48:return a.cumulativeReward=parseInt(a.cumulativeReward)>parseInt(a.reward)?a.reward:a.cumulativeReward,d.next=51,n.loadUniswapPoolAmounts(a);case 51:t.push(a);case 52:o++,d.next=19;break;case 55:i++,d.next=12;break;case 58:n.view.setState({loadingPosition:!1,stakingPositions:t});case 59:case"end":return d.stop()}},r,this)}));return t}(),n.loadUniswapPoolAmounts=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u,a,f,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=n.view.props.stakingData.pairs[e.poolPosition].address,c.t0=window,c.t1=window.context.uniSwapV2PairAbi,c.next=5,window.blockchainCall(window.uniswapV2Factory.methods.getPair,t,n.view.props.element.token.options.address);case 5:return c.t2=c.sent,i=c.t0.newContract.call(c.t0,c.t1,c.t2),c.next=9,window.blockchainCall(i.methods.token0);case 9:return s=c.sent,c.next=12,window.blockchainCall(i.methods.getReserves);case 12:return o=c.sent,c.next=15,window.blockchainCall(i.methods.totalSupply);case 15:u=c.sent,a=parseInt(e.poolAmount)/parseInt(u),f=window.numberToString(parseInt(o[0])*a).split(",").join("").split(".")[0],l=window.numberToString(parseInt(o[1])*a).split(",").join("").split(".")[0],s===n.view.props.element.token.options.address?(e.myBalance=f,e.otherBalance=l):(e.myBalance=l,e.otherBalance=f);case 20:case"end":return c.stop()}},r,this)}));return t}(),n.redeem=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e&&e.preventDefault&&e.preventDefault(!0)&&e.stopPropagation&&e.stopPropagation(!0);if(!$(e.currentTarget).hasClass("NoRedeem")){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,window.blockchainCall(n.view.props.stakingData.stakingManager.methods.partialReward,t,i);case 5:n.load();case 6:case"end":return s.stop()}},r,this)}));return t}(),n.withdraw=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e&&e.preventDefault&&e.preventDefault(!0)&&e.stopPropagation&&e.stopPropagation(!0);if(!$(e.currentTarget).hasClass("NoRedeem")){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,window.blockchainCall(n.view.props.stakingData.stakingManager.methods.withdraw,t,i);case 5:n.load();case 6:case"end":return s.stop()}},r,this)}));return t}()};var Stake=React.createClass({displayName:"Stake",requiredScripts:["spa/loader.jsx","spa/bigLoader.jsx","spa/ghostLoader.jsx","spa/loaderMini.jsx"],requiredModules:["spa/stakingInfo"],getDefaultSubscriptions:function(){return{"ethereum/ping":this.controller.load}},getInitialState:function(){return{approveFirst:!0,approveSecond:!0}},onTier:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),$($(t.currentTarget).parent()).children("a").each(function(){$(this).removeClass("SelectedDutrationStake")}),$(t.currentTarget).addClass("SelectedDutrationStake"),this.controller.calculateReward(parseInt(t.currentTarget.dataset.tier))},changeSecond:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.currentTarget.value.split("_");this.logo.src=window.formatLink(this.props.stakingData.pairs[n[0]].logo),this.controller.calculateOther("firstAmount",parseInt(this.pool.value.split("_")[0]),this.domRoot.children().find(".TimetoStake.SelectedDutrationStake")[0].dataset.tier),this.controller.calculateApprove(parseInt(this.pool.value.split("_")[0]))},max:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.controller.max(t.currentTarget.dataset.target,parseInt(this.pool.value.split("_")[0]),this.domRoot.children().find(".TimetoStake.SelectedDutrationStake")[0].dataset.tier)},onChangeAmount:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this,r=t.currentTarget;n.changeTimeout&&clearTimeout(n.changeTimeout),n.changeTimeout=setTimeout(function(){n.controller.calculateOther(r.dataset.target,parseInt(n.pool.value.split("_")[0]),n.domRoot.children().find(".TimetoStake.SelectedDutrationStake")[0].dataset.tier)},window.context.inputChangeTimeout||300)},approve:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if(!$(t.currentTarget).hasClass("active")||this.state.loadingStake||this.state.loadingApprove)return;this.controller.approve(t.currentTarget.dataset.target)},stake:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if(!$(t.currentTarget).hasClass("active")||this.state.loadingStake||this.state.loadingApprove)return;this.controller.stake(parseInt(this.pool.value.split("_")[0]),this.domRoot.children().find(".TimetoStake.SelectedDutrationStake")[0].dataset.tier)},componentDidMount:function(){window.history.pushState({},"",window.getLink()+"?staking="+this.props.stakingData.stakingManager.options.address),this.controller.load()},firstTier:function(t){$(t).children(".SelectedDutrationStake").length===0&&$($(t).children()[0]).addClass("SelectedDutrationStake")},getTierKey:function(t){var n=this.props.stakingData.tiers[t];return n.tierKey==="Custom"?n.blockNumber+" blocks":n.tierKey},close:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),window.history.pushState({},"",window.getLink()),this.emit("stake/close")},render:function(){var t=this,n=this;return React.createElement("section",{className:"StakeBigBoss STAKEALL",style:{position:"fixed"}},React.createElement("a",{className:"NoStakeBro",href:"javascript:;",onClick:this.close},"Close"),this.state&&this.state.staked&&React.createElement("section",{className:"boxAYORT"},React.createElement("section",{className:"boxAYORTTEXT"},React.createElement("h2",null,"🎉 🥩 Staked! 🥩 🎉"),React.createElement("p",null,"You have succesfully staked ",React.createElement("b",null,this.state.staked.amount)," ",this.props.element.symbol," for ",React.createElement("b",null,this.state.staked.period,"!")," Check the ",React.createElement("a",{href:"javascript:;",onClick:function(){return t.emit("view/change","Status")}},"Status")," page to manage your Staking Position. "))),this.props.stakingData.active&&React.createElement("section",{className:"switchBox"},React.createElement("h3",null,"Stake"),React.createElement("section",{className:"switchTools"},React.createElement("a",{"data-target":"firstAmount",href:"javascript:;",className:"switchAll",onClick:this.max},"Max"),React.createElement("input",{ref:function(n){return t.firstAmount=n},type:"text",placeholder:"0.00",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$","data-target":"firstAmount",onChange:this.onChangeAmount}),React.createElement("aside",{className:"switchLink",target:"_blank"},this.props.element.symbol),React.createElement("img",{src:window.formatLink(this.props.element.logo||this.props.element.logoURI)}),this.state&&this.state.firstBalance&&[React.createElement("br",null),React.createElement("br",null),React.createElement("section",{className:"BalanceLabel"},React.createElement("span",null,"Balance:"),React.createElement("span",null,window.fromDecimals(this.state.firstBalance,this.props.element.decimals)),React.createElement("span",null,this.props.element.symbol))]),React.createElement("section",{className:"switchTools switchTools2"},!1,React.createElement("input",{className:"ETHUSDBLOW",ref:function(n){return t.secondAmount=n},type:"text",placeholder:"0.00",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$","data-target":"secondAmount",onChange:this.onChangeAmount,disabled:!0}),React.createElement("select",{ref:function(n){return t.pool=n},className:"switchLink",target:"_blank",onChange:this.changeSecond},this.props.stakingData.pairs.map(function(e,t){return React.createElement("option",{key:e.address,"data-index":t,value:t+"_"+e.symbol},e.symbol)})),React.createElement("img",{ref:function(n){return t.logo=n},src:window.formatLink(this.props.stakingData.pairs[0].logo)}),this.state&&this.state.secondBalance&&this.pool&&[React.createElement("br",null),React.createElement("br",null),React.createElement("section",{className:"BalanceLabel"},React.createElement("span",null,"Balance:"),React.createElement("span",null,window.fromDecimals(this.state.secondBalance,this.props.stakingData.pairs[this.pool.value.split("_")[0]].decimals)),React.createElement("span",null,this.props.stakingData.pairs[this.pool.value.split("_")[0]].symbol))]),React.createElement("h3",null,"⏳ Duration"),React.createElement("section",{className:"switchTools",ref:this.firstTier},this.props.stakingData.tiers.map(function(e,n){return React.createElement("a",{key:e.tierKey,"data-tier":n,className:"TimetoStake",href:"javascript:;",onClick:t.onTier},e.tierKey!=="Custom"?e.tierKey:"For "+e.blockNumber+" blocks")})),React.createElement("h3",null,"🎁 Total Reward"),React.createElement("section",{className:"switchTools"},React.createElement("span",{ref:function(n){return t.reward=n},className:"switchFinal"},window.formatMoney(0)),React.createElement("aside",{className:"switchLink"},this.props.element.symbol),React.createElement("img",{src:window.formatLink(this.props.element.logo||this.props.element.logoURI)})),React.createElement("h3",{className:"switchWeek"},"Weekly"),React.createElement("section",{className:"switchTools switchToolsWeek"},React.createElement("span",{ref:function(n){return t.splittedReward=n},className:"switchFinal"},window.formatMoney(0)),React.createElement("aside",{className:"switchLink"},this.props.element.symbol),React.createElement("img",{src:window.formatLink(this.props.element.logo||this.props.element.logoURI)})),React.createElement("section",{className:"switchActions"},window.walletAddress&&(this.state.approveFirst||!this.state.approveSecond)&&React.createElement("a",{"data-target":"mine",href:"javascript:;",className:"switchAction"+(this.state.approveFirst?" active":""),onClick:this.approve},this.state.loadingApprove&&React.createElement(GhostLoader,null),!this.state.loadingApprove&&"Approve "+this.props.element.symbol),window.walletAddress&&!this.state.approveFirst&&this.state.approveSecond&&React.createElement("a",{"data-target":"other",href:"javascript:;",className:"switchAction active",onClick:this.approve},this.state.loadingApprove&&React.createElement(GhostLoader,null),!this.state.loadingApprove&&"Approve "+this.state.approveSecond),window.walletAddress&&React.createElement("a",{href:"javascript:;",className:"switchAction"+(!this.state.approveFirst&&!this.state.approveSecond?" active":""),onClick:this.stake},this.state.loadingStake&&React.createElement(GhostLoader,null),!this.state.loadingStake&&"Stake"),!window.walletAddress&&React.createElement("a",{href:"javascript:;",onClick:function(){return window.ethereum.enable().then(function(){return window.getAddress()}).then(function(){return n.emit("ethereum/ping")})},className:"switchAction active"},"Connect")),React.createElement("p",null,"By Staking ",this.props.element.symbol," you'll earn from the Uniswap V2 Trading fees + the Staking Reward. Staking ",this.props.element.symbol," you're adding liquidity to Uniswap V2 and you'll recevie Pool Tokens."),React.createElement("p",null,"Disclamer: Staking ",this.props.element.symbol," is an irreversible action, you'll be able to redeem your locked Uniswap V2 tokens only after the selected locking period. Do it at your own risk")),React.createElement("section",null,React.createElement("section",{className:"statusBox"},React.createElement("h2",null,"Your Positions"),!window.walletAddress&&React.createElement("a",{href:"javascript:;",onClick:function(){return window.ethereum.enable().then(function(){return window.getAddress()}).then(function(){return n.emit("ethereum/ping")}).then(n.controller.load)},className:"switchAction active"},"Connect your Wallet"),window.walletAddress&&(!this.state||this.state.loadingPosition)&&React.createElement(LoaderMini,null),window.walletAddress&&(!this.state||!this.state.loadingPosition)&&this.state&&this.state.stakingPositions&&this.state.stakingPositions.map(function(e){return React.createElement("section",{className:"statusYou"},React.createElement("section",{className:"statusPosition"},React.createElement("h3",null,e.poolAmountFromDecimals),React.createElement("h6",{className:"statusUni"},"🦄 ",React.createElement("a",{href:"javascript:;"},"Uniswap-V2")),React.createElement("h6",null,React.createElement("b",null,t.props.stakingData.pairs[e.poolPosition].symbol,"-",t.props.element.symbol)),React.createElement("br",null),React.createElement("h6",null,"Locked Balance:"),React.createElement("h6",null,React.createElement("b",null,window.fromDecimals(e.myBalance,t.props.element.decimals)," ",t.props.element.symbol)),React.createElement("h6",null,React.createElement("b",null,window.fromDecimals(e.otherBalance,t.props.stakingData.pairs[e.poolPosition].decimals)," ",t.props.stakingData.pairs[e.poolPosition].symbol))),React.createElement("section",{className:"statusPosition"},React.createElement("h5",null,window.fromDecimals(e.reward,t.props.element.decimals)," ",React.createElement("img",{src:window.formatLink(t.props.element.logo)})),React.createElement("h6",null,"Locked Reward"),React.createElement("h5",null,React.createElement("b",null,window.fromDecimals(e.cumulativeReward,t.props.element.decimals))," ",React.createElement("img",{src:window.formatLink(t.props.element.logo)})),React.createElement("h6",null,"🎁 Redeemable"),React.createElement("a",{className:e.cumulativeReward!=="0"&&!e.canWithdraw?"ActiveRedeem":"NoRedeem",href:"javascript:;",onClick:function(r){return t.controller.redeem(r,e.tier,e.position)}},"Redeem")),React.createElement("section",{className:"statusPosition"},React.createElement("h4",null,"for ",React.createElement("b",null,n.getTierKey(e.tier))),React.createElement("h5",null,"⏳ ",React.createElement("a",{target:"_Bloank",href:window.getNetworkElement("etherscanURL")+"block/countdown/"+e.endBlock},e.endBlock)),React.createElement("h6",null,"Position End Block"),React.createElement("a",{className:e.canWithdraw?"ActiveRedeem":"NoRedeem",href:"javascript:;",onClick:function(r){return t.controller.withdraw(r,e.tier,e.position)}},"Withdraw Position")))}),(!this.state||!this.state.loadingPosition)&&this.state&&this.state.stakingPositions&&this.state.stakingPositions.length===0&&React.createElement("h3",null,"There are no opened staking positions for you right now")),React.createElement("section",{className:"statusBox"},React.createElement("h2",null,"🥩 Status:"),React.createElement("section",{className:"statusAll"},this.props.stakingData.tiers.map(function(e,t){return React.createElement(StakingInfo,{tier:t,title:e.tierKey,stake:n.props.stakingData.stakingManager,element:n.props.element})}))),React.createElement("section",{className:"ExpTop"},React.createElement("h1",null,"Instructions:"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"This Liquidity Mining Mechanism is designed to reward ",React.createElement("a",{className:"FancyUni",href:"https://uniswap.info/token/0x7b123f53421b1bf8533339bfbdc7c98aa94163db"},"Uniswap V2")," liquidity Providers to lock long-term liquidity in Uniswap V2 ",React.createElement("a",{className:"FancyUni",href:"https://uniswap.info/pair/0xb0fb35cc576034b01bed6f4d0333b1bd3859615c"}),".")),React.createElement("h1",null,"🎁 Reward System"),React.createElement("h2",null,"The reward system is independent from the ",this.props.element.symbol," price!"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Rewards are calculated based on how much ",this.props.element.symbol," a holder provides to a liquidity pool, without any change in or dependency from other assets.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"The reward amount is fixed, and depends on the locking period selected. The total reward of the staking position is divided and redeemable once a week!")),React.createElement("section",{className:"ExpPar"},React.createElement("h1",null,"🥩 Staking Rules"),React.createElement("p",null,"The ",this.props.element.symbol," staking reward is fixed and dependent on the lock tier selected. To ensure a fixed reward system for stakers, we have included a max ",this.props.element.symbol," cap of simultaneous staking positions that can be opened.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"There are no individual staking limitations, and there is a minimum amount of ",this.props.element.symbol," to open a staking position (view the status Section).")),React.createElement("section",{className:"ExpPar"},React.createElement("h1",null,"⏩ How to Stake"),React.createElement("p",null,"Before you stake ",this.props.element.symbol,", consider that during the staking process you're actually adding liquidity to Uniswap V2, and so you'll receive back Uniswap V2 Pool tokens at the end of the staking period. What happens in the background is that you're adding liquidity to Uniswap V2 just as you would via the Uniswap GUI, but you're also locking the Uniswap V2 Tokens to receive ",this.props.element.symbol," rewards. We kindly recommend that you read all of the Uniswap Liquidity Providers Documentation before staking, so that you can make an informed decision:"),React.createElement("p",null,React.createElement("a",{href:"https://docs.ethhub.io/guides/graphical-guide-for-understanding-uniswap/",target:"_Blank"},"Ethhub Uniswap Guide")," | ",React.createElement("a",{href:"https://uniswap.org/docs/v2/advanced-topics/understanding-returns/",target:"_Blank"},"Uniswap Returns Guide")," | ",React.createElement("a",{href:"https://medium.com/@pintail/understanding-uniswap-returns-cc593f3499ef",target:"_Blank"},"Advanced Uniswap Guide")," Keep in mind that staking buidl is an irreversible action. Do it at your own risk!")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,'To Stake Liquidity, all you have to do is to scroll up to the "Stake" Section and follow these steps:')),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,'#1 Connect you wallet, by clicking the "Connect" button'),React.createElement("p",null,"#2 Choose the quantity of ",this.props.element.symbol," you want to stake"),React.createElement("p",null,"#3 Select between the tier pool, and be sure you have the ammount required"),React.createElement("p",null,"#4 Select the lock duration"),React.createElement("p",null,'#5 If you haven’t already, click the "Approve" button'),React.createElement("p",null,"#6 Wait for the “Approval” transaction to confirm"),React.createElement("p",null,'#7 Start your staking transaction by clicking "Stake"'),React.createElement("p",null,"#8 Wait for the Staking Transaction to confirm..."),React.createElement("p",null,"... ",React.createElement("b",null,"Done!")," You have successfully Staked ",this.props.element.symbol,'. Now, you can manage your position in the "Status" page.')),React.createElement("section",{className:"ExpPar"},React.createElement("h1",null,"💰 How to reedem Staking and Rewards"),React.createElement("p",null,'Once you have successfully created a Staking Position, you can manage it on the "Your Positions" section:')),React.createElement("section",{className:"ExpPar"},React.createElement("h2",null,"Weekly Reward Withdraw"),React.createElement("p",null,"To Withdraw your weekly Reward from your position, just click the Withdraw Reward button. This button is designed to let you Withdraw all of your available unlocked rewards.")),React.createElement("section",{className:"ExpPar"},React.createElement("h2",null,"Position Withdraw"),React.createElement("p",null,'At the end of the Staking Period, you can use the "Withdraw Position" button to Withdraw all of your staked Uniswap V2 Pool Tokens, as well as your remaining rewards (if any).'),React.createElement("p",null,"To Withdraw your liquidity using your Uniswap V2 Liquidity Pool Tokens, you just have to go to the ",React.createElement("a",{href:"https://app.uniswap.org/#/pool",target:"_Blank"},"Uniswap GUI"),", select your Liquidity Pool and choose the amount to Withdraw.")))))}});var StakingInfoController=function(t){var n=this;n.view=t,n.load=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,t){var r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.setState({loading:!0}),i.next=3,window.blockchainCall(e.props.stake.methods.getStakingInfo,t);case 3:r=i.sent,e.setState({loading:!1,minCap:r[0],staked:window.web3.utils.toBN(r[1]).sub(window.web3.utils.toBN(r[2])).toString(),available:r[2]});case 5:case"end":return i.stop()}},n,this)}));return t}()};var StakingInfo=React.createClass({displayName:"StakingInfo",requiredScripts:["spa/loader.jsx","spa/bigLoader.jsx"],getDefaultSubscriptions:function(){return{"ethereum/ping":this.componentDidMount}},componentDidMount:function(){this.controller.load(this,this.props.tier)},render:function(){return!this.state||this.state.loading?React.createElement(Loader,null):React.createElement("section",{className:"statusTier"},React.createElement("h3",null,this.props.title),React.createElement("h4",{className:"TierStaked"},React.createElement("b",null,window.fromDecimals(this.state.minCap,this.props.element.decimals))," ",React.createElement("img",{src:window.formatLink(this.props.element.logo||this.props.element.logoURI)})),React.createElement("h6",{className:"TierStaked"},"Min Stake"),React.createElement("h4",{className:"TierStaked"},window.fromDecimals(this.state.staked,this.props.element.decimals)," ",React.createElement("img",{src:window.formatLink(this.props.element.logo||this.props.element.logoURI)})),React.createElement("h6",{className:"TierStaked"},"Staked"),React.createElement("h4",{className:"TierFree"},React.createElement("b",null,window.fromDecimals(this.state.available,this.props.element.decimals))," ",React.createElement("img",{src:window.formatLink(this.props.element.logo||this.props.element.logoURI)})),React.createElement("h6",{className:"TierFree"},"Available"))}});var StateController=function(t){var n=this;n.view=t,n.load=function(t){t=t||n.view,t.setState({stateElements:null,stateElementsAmount:null},_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e=[],a.t0=t,a.t1=e,a.t2=parseInt,a.next=7,window.blockchainCall(t.props.element.stateHolder.methods.getStateSize);case 7:return a.t3=a.sent,a.t4=(0,a.t2)(a.t3),a.t5={stateElements:a.t1,stateElementsAmount:a.t4},a.t0.setState.call(a.t0,a.t5),a.next=13,window.blockchainCall(t.props.element.stateHolder.methods.toJSON);case 13:i=a.sent;if(t===n.view){a.next=16;break}return a.abrupt("return");case 16:i=JSON.parse(i.endsWith(",]")?i.substring(0,i.lastIndexOf(",]"))+"]":i),a.t6=regeneratorRuntime.keys(i);case 18:if((a.t7=a.t6()).done){a.next=31;break}return s=a.t7.value,o=i[s],u="get"+o.type.substring(0,1).toUpperCase()+o.type.substring(1),a.next=24,window.blockchainCall(t.props.element.stateHolder.methods[u],o.name);case 24:o.value=a.sent;if(t===n.view){a.next=27;break}return a.abrupt("return");case 27:e.push(o),t.setState({stateElements:e}),a.next=18;break;case 31:a.next=36;break;case 33:a.prev=33,a.t8=a["catch"](0),t.setState({unsupportedRnDVersion:!0});case 36:case"end":return a.stop()}},r,this,[[0,33]])})))},n.proposeStateElement=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o,u,a;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:s=n.view;if(t!==undefined&&t!==null&&t!==""){f.next=3;break}throw"You must insert a valid value for "+e.name;case 3:if(e.value!==t){f.next=5;break}return f.abrupt("return");case 5:if(e.type!=="address"||!!window.isEthereumAddress(t)){f.next=7;break}throw"Value for "+e.name+" must be a valid Ethereum address";case 7:if(e.type!=="uint256"||!(isNaN(parseInt(t))||parseInt(t)<0)){f.next=9;break}throw"Value for "+e.name+" must be a valid number greater or equal to 0";case 9:t=e.type!=="bool"?t:t+""=="true",o=e.type==="string"?'"':"",u="holder.set"+e.type.firstLetterToUpperCase()+'("'+e.name+'", '+o+t+o+");",a="Changing "+e.name+" value from "+e.value+" to "+t;if(!i){f.next=15;break}return f.abrupt("return",{line:u,description:a});case 15:window.sendGeneratedProposal(s.props.element,{title:"Proposal for "+a.firstLetterToLowerCase()},window.context.stateHolderProposalTemplate,[u],[a]);case 16:case"end":return f.stop()}},r,this)}));return t}(),n.clearStateElement=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:i=n.view,s='holder.clear("'+e.name+'");',o="Clearing "+e.name+" value";if(t!==!0){u.next=5;break}return u.abrupt("return",{line:s,description:o});case 5:window.sendGeneratedProposal(i.props.element,{title:"Proposal for "+o.firstLetterToLowerCase()},window.context.stateHolderProposalTemplate,[s],[o]);case 6:case"end":return u.stop()}},r,this)}));return t}(),n.changeAll=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u,a,f;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=n.view,i=[],s=[],o=[],l.t0=regeneratorRuntime.keys(e);case 5:if((l.t1=l.t0()).done){l.next=20;break}return u=l.t1.value,a=e[u],l.prev=8,l.next=11,a.clear?n.clearStateElement(a.stateElement,!0):n.saveStateElement(a.stateElement,a.value,!0);case 11:f=l.sent,f&&(s.push(f.line),o.push(f.description)),l.next=18;break;case 15:l.prev=15,l.t2=l["catch"](8),i.push(l.t2.message||l.t2);case 18:l.next=5;break;case 20:if(!(i.length>0)){l.next=22;break}throw i.join("\n").trim();case 22:if(s.length!==0){l.next=24;break}return l.abrupt("return");case 24:window.sendGeneratedProposal(t.props.element,{title:o.length>1?"StateHolder change":"Proposal for "+o[0].firstLetterToLowerCase()},window.context.stateHolderProposalTemplate,s,o);case 25:case"end":return l.stop()}},r,this,[[8,15]])}));return t}(),n.addNew=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o,u,a,f;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:s=n.view;if(i!==undefined&&i!==null&&i!==""){l.next=3;break}return l.abrupt("return");case 3:e=e?e.trim():e;if(e){l.next=6;break}throw"Name is mandatory";case 6:l.t0=regeneratorRuntime.keys(s.state.stateElements);case 7:if((l.t1=l.t0()).done){l.next=13;break}o=l.t1.value;if(e!==s.state.stateElements[o].name){l.next=11;break}throw e+" is already used for another state name";case 11:l.next=7;break;case 13:if(t!=="address"||!!window.isEthereumAddress(i)){l.next=15;break}throw"Value for "+e+" must be a valid Ethereum address";case 15:if(t!=="uint256"||!(isNaN(parseInt(i))||parseInt(i)<0)){l.next=17;break}throw"Value for "+e+" must be a valid number greater or equal to 0";case 17:i=t!=="bool"?i:i+""=="true",u=t==="string"?'"':"",a="holder.set"+t.firstLetterToUpperCase()+'("'+e+'", '+u+i+u+");",f="Setting "+e+" using value "+i,window.sendGeneratedProposal(s.props.element,{title:"Proposal for "+f.firstLetterToLowerCase()},window.context.stateHolderProposalTemplate,[a],[f]);case 22:case"end":return l.stop()}},r,this)}));return t}()};var State=React.createClass({displayName:"State",componentDidMount:function(){this.controller.load()},extractData:function(t){t=$($(t).parent());var n=t.children().find("input");return n.length>1&&(n=t.children().find('input[type="radio"]:checked')),n=n.val(),{stateElement:this.state.stateElements[t[0].dataset.i],value:n,clear:this.state.changeAll&&(t.children().find(".Editing").length>0||t.children(".Editing").length>0)}},changeStateElement:function(t){t&&t.preventDefault&&t.preventDefault(!0),t&&t.stopPropagation&&t.stopPropagation(!0);var n=this;if(n.state.changeAll)return $(t.currentTarget).toggleClass("Editing");var r=n.extractData($($(t.currentTarget).parent()));n.controller[t.currentTarget.innerHTML.toLowerCase()+"StateElement"](r.stateElement,r.value).then(function(){return n.setState({change:null})}).catch(function(e){return n.emit("message",e.message||e,"error")})},changeAll:function(t){t&&t.preventDefault&&t.preventDefault(!0),t&&t.stopPropagation&&t.stopPropagation(!0);var n=this,r=[];$(t.currentTarget).parent().children().find("li").each(function(e,t){return r.push(n.extractData(t.children[0]))}),n.controller.changeAll(r).then(function(){return n.setState({changeAll:n.state&&n.state.changeAll?null:!0,change:null})}).catch(function(e){return n.emit("message",e.message||e,"error")})},onTypeChange:function(t){t&&t.preventDefault&&t.preventDefault(!0),t&&t.stopPropagation&&t.stopPropagation(!0),this.addNewInput&&this.onInputRef(this.addNewInput[0]),this.addNewRadio&&this.onRadioRef(this.addNewRadio[0])},onInputRef:function(t){this.addNewInput=$(t).show().attr("type","text");if(!t||!this.addNewType)return;if(this.addNewType.value==="bool")return this.addNewInput.hide();this.addNewType.value==="uint256"&&this.addNewInput.attr("type","number"),this.addNewType.value==="uint256"&&this.addNewInput.attr("min","0")},onRadioRef:function(t){this.addNewRadio=$(t).show();if(!t||!this.addNewType||this.addNewType.value!=="bool")return this.addNewRadio.hide()},addNew:function(t){t&&t.preventDefault&&t.preventDefault(!0),t&&t.stopPropagation&&t.stopPropagation(!0);var n=this,r=this.addNewName.value,i=this.addNewType.value,s=this.addNewInput.val(),o=this.addNewRadio.children().find('input[type="radio"]:checked').val()==="true";this.controller.addNew(r,i,i==="bool"?o:s).catch(function(e){return n.emit("message",e.message||e,"error")})},renderStateElement:function(t,n){var r=this;return React.createElement("section",{className:"DFOSingleState","data-i":n},React.createElement("div",{className:"DFOSingleStateTN"},React.createElement("h5",{className:"DFOSingleStateN"},t.name),React.createElement("aside",{className:"DFOSingleStateT"},"💾 ",t.type)),r.props.edit&&(!r.state||!r.state.changeAll)&&React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB"+(r.state&&r.state.change===t.name?" Editing":""),href:"javascript:;",onClick:function(){return r.setState({change:r.state&&r.state.change===t.name?null:t.name})}},"Change"),React.createElement("h6",{className:"DFOSingleStateV"},(!r.props.edit||!r.state||r.state.change!==t.name&&!r.state.changeAll)&&(t.type!=="address"?React.createElement("span",null,t.value===!0?"true":t.value===!1?"false":t.value):React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"address/"+t.value,target:"_blank"},t.value)),r.props.edit&&r.state&&(r.state.change===t.name||r.state.changeAll)&&t.type!=="bool"&&React.createElement("input",{type:t.type==="uint256"?"number":"text",min:"0",ref:function(n){return n&&(n.value=t.value)}}),r.props.edit&&r.state&&(r.state.change===t.name||r.state.changeAll)&&t.type==="bool"&&React.createElement("form",null,React.createElement("label",null,React.createElement("input",{name:t.name,type:"radio",value:"true",ref:function(n){return n&&(n.checked=t.value===n.value)}}),"true"),React.createElement("label",null,React.createElement("input",{name:t.name,type:"radio",value:"false",ref:function(n){return n&&(n.checked=t.value===n.value)}}),"false")),r.props.edit&&(!r.state||!r.state.changeAll)&&r.state&&r.state.change===t.name&&React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB",href:"javascript:;",onClick:r.changeStateElement},"Propose"),r.props.edit&&r.state&&(r.state.change===t.name||r.state.changeAll)&&React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB",href:"javascript:;",onClick:r.changeStateElement},"Clear")))},render:function(){var t=this;return React.createElement("section",{className:"DFOOverview"},t.state&&t.state.stateElements&&React.createElement("ul",{className:"DFOStateList"},t.state.stateElements.map(function(e,n){return React.createElement("li",{key:e.name},t.renderStateElement(e,n))})),t.state&&t.state.stateElementsAmount===0&&React.createElement("h2",null,"This DFO does not contain any State Element"),t.state&&t.state.unsupportedRnDVersion&&React.createElement("h2",null,"This R&D version is no longer supported because it is lower than 0.1."),(!t.state||!t.state.stateElements||t.state.stateElements.length!==t.state.stateElementsAmount)&&(!t.state||!t.state.unsupportedRnDVersion)&&React.createElement(LoaderMini,{message:"Loading Elements"}))}});var TokenController=function(t){var n=this;n.view=t};var Token=React.createClass({displayName:"Token",requiredModules:["spa/editor"],requiredScripts:["spa/loaderMini.jsx","spa/okBoomer.jsx","spa/loaderMinimino.jsx","assets/scripts/uniswapOps.js"],uploadFile:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.currentTarget.files[0],r=this,i=new FileReader;i.addEventListener("load",function(){r.indexValue.value=i.result},!1),i.readAsDataURL(n)},changeElementInfo:function(t){if(!t)return;t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=window.getData($($(t.currentTarget).parent()).parent());this.controller[this.state.change+"Change"](n)},componentDidMount:function(){var t=this;window.blockchainCall(t.props.element.dFO.methods.read,"getMinimumBlockNumberForSurvey","0x").then(function(e){t.props.element.blocks=window.web3.eth.abi.decodeParameters(["uint256"],e)[0],t.forceUpdate()});var n=!t.props.element.logo;t.props.element.logo=t.props.element.logo||t.props.element.logoUri||t.props.element.logoURI,t.props.element.logo&&n&&t.forceUpdate(),!t.props.element.logo&&window.loadLogo(t.props.element.token.options.address).then(function(e){t.props.element.logo=e,t.forceUpdate()}),window.loadUniswapPairs(this,t.props.element.token.options.address)},renderChangeButton:function(t){var n=this;if(!n.props.edit)return;return React.createElement("a",{className:"LinkVisualButton LinkVisualButtonB"+(n.state&&n.state.change===t?" Editing":""),href:"javascript:;",onClick:function(){return n.setState({change:n.state&&n.state.change===t?null:t})}},"Change")},renderChanger:function(t){var n=this;if(!n.props.edit||!n.state||!n.state.change)return;for(var r in t){var i=t[r];if(n.state.change===i){var s=n["render"+i.substring(0,1).toUpperCase()+i.substring(1)+"Changer"];return React.createElement("section",{className:"DFOFunctionIndexIcon"},s&&s(),React.createElement("aside",null,React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualButtonB",onClick:n.changeElementInfo},"Propose")))}}},renderDefaultChanger:function(t,n,r,i){return React.createElement("ul",null,React.createElement("li",null,React.createElement("p",{ref:function(n){return n&&(n.innerHTML=t)}},t)),React.createElement("li",null,React.createElement("section",null,React.createElement("label",{htmlFor:r,ref:function(t){return t&&(t.innerHTML=n)}},n),React.createElement("input",{className:"DFOFunctionIndexIconText",id:r,type:"number",min:"0",ref:function(t){return t&&(t.value=i)}}))))},toggleMintBurn:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.setState({mintBurnMethod:t.currentTarget.dataset.function,mintBurn:this.state&&this.state.mintBurn===t.currentTarget.innerText?null:t.currentTarget.innerText})},render:function(){var t=this,n=this;return React.createElement("section",{className:"DFOOverview"},React.createElement("ul",{className:"DFOHosting DFOHostingY"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Voting Token")),React.createElement("li",{className:"TheDappInfo05 TheDappInfoYY"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("figure",{className:"VerifiedIcon"},React.createElement("img",{src:this.props.element.logoUri?window.formatLink(this.props.element.logoUri):this.props.element.logo})))),React.createElement("li",{className:"TheDappInfo05"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle"},"Name:"),React.createElement(AsyncValue,null,n.props.element.name&&React.createElement("p",{className:"DFOLabelTitleInfo"},React.createElement("a",{className:"LinkVisualStandard",href:window.getNetworkElement("etherscanURL")+"token/"+n.props.element.token.options.address,target:"_blank"},n.props.element.name))),React.createElement("h5",{className:"DFOHostingTitle"},"Ticker:"),React.createElement(AsyncValue,null,n.props.element.symbol&&React.createElement("p",{className:"DFOLabelTitleInfo"},React.createElement("a",{className:"LinkVisualStandard",href:window.getNetworkElement("etherscanURL")+"token/"+n.props.element.token.options.address,target:"_blank"},n.props.element.symbol))))),React.createElement("li",{className:"TheDappInfo05 TheDappInfoX"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle"},"Voting Power:"),React.createElement(AsyncValue,null,"+1")),React.createElement("section",{className:"DFOTitleSection"})),React.createElement("li",{className:"TheDappInfo1 TheDappInfoX"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle"},"Existing Supply:  "),React.createElement(AsyncValue,null,n.props.element.symbol&&n.props.element.totalSupply&&React.createElement("p",{className:"DFOLabelTitleInfo"},React.createElement("a",{className:"LinkVisualStandard",href:window.getNetworkElement("etherscanURL")+"token/tokenholderchart/"+n.props.element.token.options.address,target:"_blank"},window.fromDecimals(n.props.element.totalSupply,n.props.element.decimals)))),React.createElement("h5",{className:"DFOHostingTitle"},"DFO Wallet Supply: "),React.createElement(AsyncValue,null,n.props.element.symbol&&n.props.element.balanceOf&&React.createElement("p",{className:"DFOLabelTitleInfo"}," ",React.createElement("a",{className:"LinkVisualStandard",href:window.getNetworkElement("etherscanURL")+"token/tokenholderchart/"+n.props.element.token.options.address,target:"_blank"},window.fromDecimals(n.props.element.communityTokens,n.props.element.decimals)))),this.props.edit&&React.createElement("a",{href:"javascript:;","data-function":"mintNewTokens",onClick:this.toggleMintBurn,className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"+(this.state&&this.state.mintBurn==="Mint"?"EditDFOYo Editing":"")},"Mint"),this.props.edit&&React.createElement("a",{href:"javascript:;","data-function":"burn",onClick:this.toggleMintBurn,className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"+(this.state&&this.state.mintBurn==="Burn"?"EditDFOYo Editing":"")},"Burn"),this.props.edit&&this.state&&this.state.mintBurn&&React.createElement("section",{className:"BravPicciot"},React.createElement("label",null,React.createElement("p",null,"Propose to ",this.state.mintBurn),React.createElement("input",{type:"text",placeholder:"Amount",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",min:"0",ref:function(n){return t.input=n}})),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB",onClick:function(){return window[t.state.mintBurnMethod](t,t.input.value)}},this.state.mintBurn)))),React.createElement("li",{className:"TheDappInfo025"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("a",{href:window.context.uniSwapInfoURL+this.props.element.token.options.address,target:"_blank",className:"LinkVisualButton LinkVisualUni"},"🦄 Info"),React.createElement("a",{href:window.context.uniSwapSwapURLTemplate.format(n.props.element.token.options.address,""),target:"_blank",className:"LinkVisualButton LinkVisualUni"},"🦄 Swap"),React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"token/"+n.props.element.token.options.address,target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"💎 Info"),React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"address/"+n.props.element.token.options.address+"#code",target:"_blank",className:"LinkVisualButton LinkVisualEthscan"},"💎 Contract")))),React.createElement("ul",{className:"DFOHosting"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,"Dex Liquidity")),!this.state||!this.state.uniswapPairs&&React.createElement(LoaderMinimino,null),this.state&&this.state.uniswapPairs&&this.state.uniswapPairs.length===0&&React.createElement("p",null,"No Uniswap V2 pair found"),this.state&&this.state.uniswapPairs&&this.state.uniswapPairs.map(function(e){return React.createElement("li",{key:e.pairToken.options.address,className:"TheDappInfo1 TheDappInfoY TheDappInfoSub"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("h5",{className:"DFOHostingTitle"},"🦄 V2 ",React.createElement("b",null,n.props.element.symbol," - ",e.symbol)),React.createElement("span",{className:"DFOLabelTitleInfosmall"},window.fromDecimals(e.mainReserve,n.props.element.decimals)," ",n.props.element.symbol)," ","-"," ",React.createElement("span",{className:"DFOLabelTitleInfosmall"}," ",window.fromDecimals(e.otherReserve,e.decimals)," ",e.symbol),!1,React.createElement("br",null),React.createElement("a",{href:window.context.uniSwapSwapURLTemplate.format(n.props.element.token.options.address,e.address===window.wethAddress?"":e.address),target:"_blank",className:"LinkVisualButton LinkVisualUni"},"🦄 Swap"),React.createElement("a",{href:window.context.uniSwapPoolURLTemplate.format(n.props.element.token.options.address,e.address===window.wethAddress?"":e.address),target:"_blank",className:"LinkVisualButton LinkVisualUni"},"🦄 Pool")))})))}});var TokenPickerController=function(t){var n=this;n.view=t};var TokenPicker=React.createClass({displayName:"TokenPicker",onType:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.onTypeTimeout&&clearTimeout(this.onTypeTimeout);var n=this,r=t.currentTarget;this.onTypeTimeout=setTimeout(function(){n.setState({search:r.value,selected:null})},600)},toggle:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if(t.type==="click"||t.type==="blur"&&t.relatedTarget&&t.relatedTarget.tagName==="A"&&t.relatedTarget.dataset.item){var n=this,r=JSON.parse((t.type==="click"?t.currentTarget:t.relatedTarget).dataset.item);this.input.value=r.address,this.setState({selected:r,show:null,search:null},function(){n.props.onChange&&n.props.onChange(r)});return}t.type==="blur"&&this.setState({show:null});if(this.state&&this.state.show&&(t.type==="focus"||t.relatedTarget!==undefined&&t.relatedTarget!==null))return;((!this.state||!this.state.show)&&t.type==="focus"||this.state&&this.state.show&&t.type==="blur")&&this.setState({show:t.type==="focus"})},getList:function(){if(!this.state||!this.state.uniswapPairs)return null;if(!this.state.search)return this.state.uniswapPairs;var t=[],n=this.state.search.trim().toLowerCase();for(var r=this.state.uniswapPairs,i=Array.isArray(r),s=0,r=i?r:r[Symbol.iterator]();;){var o;if(i){if(s>=r.length)break;o=r[s++]}else{s=r.next();if(s.done)break;o=s.value}var u=o;(u.address.trim().toLowerCase().indexOf(n)!==-1||u.name.trim().toLowerCase().indexOf(n)!==-1||u.symbol.trim().toLowerCase().indexOf(n)!==-1)&&t.push(u)}return t},componentDidMount:function(){this.props.tokenAddress&&window.loadUniswapPairs(this,this.props.tokenAddress);var t=this;this.props.element&&window.loadWallets(t.props.element,function(e){return t.setState({uniswapPairs:e})},!0)},renderSelection:function(){var t=this,n=this.getList();return React.createElement("section",{className:"PikaPikaYaYa",tabindex:"-1",onBlur:this.toggle},React.createElement("section",{className:"PikaPikaSearch"},React.createElement("input",{onFocus:this.toggle,ref:function(n){return t.input=n},type:"text",placeholder:"Search Name/Address",onKeyUp:this.onType,onChange:this.onType})),React.createElement("section",{className:"PikaPikaFind"},!n&&React.createElement("h4",null,"Loading tokens..."),n&&n.length===0&&React.createElement("h4",null,"No results found"),n&&n.map(function(e){return React.createElement("a",{className:"PikaPikaFindaaaaaaaaa",key:e.address,onClick:t.toggle,href:"javascript:;","data-item":JSON.stringify(e)},React.createElement("img",{src:e.logo}),React.createElement("p",null,e.name," (",e.symbol,")"))})))},render:function(){return this.state&&this.state.show?this.renderSelection():React.createElement("section",{tabindex:"-1",onFocus:this.toggle},(!this.state||!this.state.selected)&&React.createElement("section",null,React.createElement("a",{className:"tokenpickerSelector",href:"javascript:;"},"Select")),this.state&&this.state.selected&&React.createElement("section",{className:"PikaPikaSelectedBoomer"},React.createElement("img",{src:this.state.selected.logo}),React.createElement("p",null,this.state.selected.name," ",React.createElement("b",null,"(",this.state.selected.symbol,")"))))}});var UniswapTokenPicker=React.createClass({displayName:"UniswapTokenPicker",getDefaultSubscriptions:function(){var t=this;return{"ethereum/update":function(){return t.setState({key:null,selected:null})}}},onSectionChange:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.currentTarget.dataset.key,r=this;this.setState({key:n,selected:null},function(){r.props.onChange&&setTimeout(function(){return r.props.onChange(null)})})},close:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.setState({opened:null})},open:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this,r=t.currentTarget;this.setState({opened:!0},function(){n.opened&&(n.opened.onblur=n.opened.onblur||function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),t.relatedTarget&&t.relatedTarget!==r&&t.relatedTarget.click(),t.relatedTarget&&t.relatedTarget!==r&&n.opened&&n.opened.focus(),(!t.relatedTarget||t.relatedTarget!==r&&!t.relatedTarget.dataset.key)&&n.setState({opened:null})})&&n.opened.focus()})},onClick:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this;this.setState({opened:null,key:this.getKey(),selected:parseInt(t.currentTarget.dataset.index)},function(){n.props.onChange&&setTimeout(function(){return n.props.onChange(n.props.tokensList[n.state.key][n.state.selected])})})},getKey:function(){var t=null;try{t=this.state&&this.state.key||Object.keys(this.props.tokensList)[0]}catch(n){}return t},exceptFor:function(t){if(this.props.exceptFor&&this.props.exceptFor.length>0){if(typeof this.props.exceptFor=="string"&&window.web3.utils.toChecksumAddress(t)===window.web3.utils.toChecksumAddress(this.props.exceptFor))return!0;if(this.props.exceptFor instanceof Array)for(var n=this.props.exceptFor,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(i>=n.length)break;s=n[i++]}else{i=n.next();if(i.done)break;s=i.value}var o=s;if(window.web3.utils.toChecksumAddress(t)===window.web3.utils.toChecksumAddress(o))return!0}}return!1},renderOpened:function(){var t=this,n=this,r=this.getKey();return React.createElement("section",{className:"BazSelectorContainer",tabIndex:"-1",ref:function(n){return t.opened=n}},React.createElement("section",{className:"BazSelectorContainerMenu"},React.createElement("section",{className:"BazSelectorContainerMenuintern"},this.props.tokensList&&Object.keys(this.props.tokensList).map(function(e){return React.createElement("li",{key:e,className:r===e?"Selected":undefined},React.createElement("a",{href:"javascript;","data-key":e,onClick:n.onSectionChange},e))}))),r&&React.createElement("section",{className:"BazSelectorContainerObjects"},this.props.tokensList[r].map(function(e,r){if(!e||n.exceptFor(e.address))return;return React.createElement("li",{key:e.address,className:t.state.selected===r?"Selected":undefined},t.renderInput(e,t.onClick,r))})))},renderInput:function(t,n,r){var i=this.getKey();return React.createElement("a",{href:"javascript;","data-index":r,onClick:n},i!=="Indexes"&&React.createElement("img",{src:t.logo||t.logoURI||window.context.trustwalletImgURLTemplate.format(t.address)}),React.createElement("p",null,t.symbol))},renderClosed:function(){var t=undefined;try{t=this.props.tokensList[this.state.key][this.state.selected]}catch(n){}return React.createElement("section",null,t&&this.renderInput(t,this.open),!t&&React.createElement("a",{href:"javascript:;",onClick:this.open},"Select"))},render:function(){return React.createElement("section",{className:"BazTokenSelector"},this.state&&this.state.opened&&this.renderOpened(),(!this.state||!this.state.opened)&&this.renderClosed())}});var WalletController=function(t){var n=this;n.view=t,n.pairCreatedTopic=window.web3.utils.sha3("PairCreated(address,address,address,uint256)"),n.loadWallets=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n.view.setState({tokens:null,cumulativeAmountDollar:null,tokenAmounts:null,loading:!0}),i.prev=1,i.next=4,window.loadOffChainWallets();case 4:e=i.sent,t=[{i:0,address:window.voidEthereumAddress,name:"Ethereum",symbol:"ETH",decimals:"18",logo:"assets/img/eth-logo.png"}],Object.values(e).forEach(function(e){e.forEach(function(e){try{e.i=t.length,t.push(e)}catch(n){}})}),n.view.setState({tokens:t}),i.next=14;break;case 10:return i.prev=10,i.t0=i["catch"](1),i.next=14,window.loadWallets(n.view.props.element,function(e){return n.view.setState({tokens:e})});case 14:n.view.state.tokens&&n.view.setState({tokenAmounts:n.view.state.tokens.map(function(e){return{i:e.i,amount:"0",amountDollars:0}})}),n.view.state.tokens&&n.calculateAmounts();case 16:case"end":return i.stop()}},r,this,[[1,10]])}));return t}(),n.calculateAmounts=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=0,t=n.view.state&&n.view.state.tokens||[],i=n.view.state&&n.view.state.tokenAmounts||[],f.next=5,window.getEthereumPrice();case 5:s=f.sent;if(n.view.mounted){f.next=8;break}return f.abrupt("return");case 8:o=0;case 9:if(!(o<t.length)){f.next=66;break}if(n.view.mounted){f.next=12;break}return f.abrupt("return");case 12:u=t[o],a=i[o];if(u!==!0&&u!==!1){f.next=16;break}return f.abrupt("continue",63);case 16:if(u.i!==0){f.next=31;break}return f.prev=17,f.next=20,window.web3.eth.getBalance(n.view.props.element.walletAddress);case 20:a.amount=f.sent;if(n.view.mounted){f.next=23;break}return f.abrupt("return");case 23:f.next=28;break;case 25:f.prev=25,f.t0=f["catch"](17),a.amount="0";case 28:a.amountDollars=s*parseFloat(window.fromDecimals(a.amount,18)),f.next=61;break;case 31:f.prev=31;if(u.address!==window.voidEthereumAddress){f.next=38;break}return f.next=35,window.web3.eth.getBalance(n.view.props.element.walletAddress);case 35:f.t1=f.sent,f.next=41;break;case 38:return f.next=40,window.blockchainCall(u.token.methods.balanceOf,n.view.props.element.walletAddress);case 40:f.t1=f.sent;case 41:a.amount=f.t1;if(n.view.mounted){f.next=44;break}return f.abrupt("return");case 44:if(u.address!==window.voidEthereumAddress){f.next=48;break}f.t2="1",f.next=53;break;case 48:return f.t3=window,f.next=51,window.blockchainCall(window.uniswapV2Router.methods.getAmountsOut,window.toDecimals("1",u.decimals),[u.address,window.wethAddress]);case 51:f.t4=f.sent[1],f.t2=f.t3.fromDecimals.call(f.t3,f.t4,18,!0);case 53:a.amountDollars=f.t2;if(n.view.mounted){f.next=56;break}return f.abrupt("return");case 56:a.amountDollars=parseFloat(window.fromDecimals(a.amount,u.decimals,!0))*parseFloat(a.amountDollars)*s,f.next=61;break;case 59:f.prev=59,f.t5=f["catch"](31);case 61:e+=a.amountDollars,n.view.setState({cumulativeAmountDollar:e,tokenAmounts:i});case 63:o++,f.next=9;break;case 66:n.view.setState({cumulativeAmountDollar:e,tokenAmounts:i,loading:!1});case 67:case"end":return f.stop()}},r,this,[[17,25],[31,59]])}));return t}()};var Wallet=React.createClass({displayName:"Wallet",requiredScripts:["spa/loaderMinimino.jsx","assets/scripts/uniswapOps.js"],requiredModules:["spa/tokenPicker"],componentDidMount:function(){if(this.called)return;this.called=!0,this.controller.loadWallets()},toggleProposal:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this,r=t&&t.currentTarget.dataset.address,i=t&&t.currentTarget.dataset.type,s=this.state&&this.state[i+"Proposal"];this.setState({swapProposal:null,poolProposal:null,transferProposal:null},function(){if(!r||!i||s===r)return;var e={tos:[]};e[i+"Proposal"]=r,n.setState(e)})},renderSwapProposal:function(t){var n=this;return React.createElement("section",{className:"BravPicciot"},React.createElement("p",null,"Propose to swap:"),React.createElement("label",null,React.createElement("input",{ref:function(t){return n.amount=t},type:"text",placeholder:"0.0",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$"}),React.createElement("span",null,t.symbol)),React.createElement("label",null,React.createElement("p",null,"for:"),React.createElement(TokenPicker,{ref:function(t){return n.tokenPicker=t},tokenAddress:t.address})),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB LinkVisualButtonBIGGA",onClick:function(){return window.swap(n,n.amount.value,t.address,n.tokenPicker.state&&n.tokenPicker.state.selected&&n.tokenPicker.state.selected.address)}},"Swap"))},addTos:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.emit("message");var n=this.to.value;if(!window.isEthereumAddress(n))return this.emit("message","You must insert a valid ethereum address","error");var r=window.formatMoney(this.amount.value.split(",").join(""));if(parseFloat(r.split(",").join(""))<=0)return this.emit("message","Amount must be greater than zero","error");var i=this.state&&this.state.tos||[];i.push({address:n,amount:r});var s=this;s.setState({tos:i},function(){s.amount.value="",s.to.value=""})},deleteTo:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=parseInt(t.currentTarget.dataset.index),r=this.state.tos[n];this.state.tos.splice(n,1);var i=this;i.setState({tos:this.state.tos},function(){i.amount.value=r.amount,i.to.value=r.address})},transfer:function(t,n){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var r=[],i=[];this.emit("message");if(this.state.tos.length===0)return this.emit("message","You Must insert at least a recipient","error");this.state.tos.forEach(function(e){r.push(e.amount),i.push(e.address)}),window.transfer(this,n.address,r,i)},renderTransferProposal:function(t){var n=this,r=this;return React.createElement("section",{className:"BravPicciot"},React.createElement("p",null,"Propose to Transfer:"),React.createElement("section",null,React.createElement("label",null,React.createElement("input",{ref:function(t){return n.amount=t},type:"text",placeholder:"Amount",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$"}),React.createElement("span",null,t.symbol))),React.createElement("section",null,React.createElement("label",null,React.createElement("span",null,"To:"),React.createElement("input",{className:"MarioTorginiProposal",ref:function(t){return n.to=t},type:"text",placeholder:"Address"}))),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualPropose LinkVisualButtonG LinkVisualButtonBIGGA",onClick:this.addTos},"Add"),this.state&&this.state.tos&&React.createElement("section",null,this.state.tos.map(function(e,n){return React.createElement("section",{className:"DFOHostingTag",key:e.address+"_"+e.amount},React.createElement("a",{className:"ChiudiQuella ChiudiQuellaGigi",href:"javascript:;","data-index":n,onClick:r.deleteTo},"X"),React.createElement("p",null,"Send ",React.createElement("b",null,e.amount)," ",t.symbol),React.createElement("p",null,"to ",React.createElement("aside",{className:"LuiQuelloLi"},e.address)))})),React.createElement("a",{href:"javascript:;",className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB LinkVisualButtonBIGGA",onClick:function(r){return n.transfer(r,t)}},"Transfer"),!1)},render:function(){var t=this;return React.createElement("section",{className:"DFOOverview"},React.createElement("ul",{className:"DFOHosting"},React.createElement("section",{className:"HostingCategoryTitle"},React.createElement("h2",null,t.props.element.name," Balances ",!t.state||t.state.cumulativeAmountDollar===undefined||t.state.cumulativeAmountDollar===null?React.createElement(LoaderMinimino,null):React.createElement("span",null,"(Tracked: $",window.formatMoney(t.state.cumulativeAmountDollar),")")," ",React.createElement("a",{className:"LinkVisualButton LinkVisualEthscan",target:"_blank",href:window.getNetworkElement("etherscanURL")+"tokenHoldings?a="+t.props.element.walletAddress},"💎 Etherscan"))),t.state&&t.state.tokenAmounts&&t.state.tokens&&t.state.tokens.map(function(e){return t.state.tokenAmounts[e.i].amount!==undefined&&t.state.tokenAmounts[e.i].amount!=="0"&&React.createElement("li",{key:e.address,className:"TheDappInfo1 TheDappInfoY TheDappInfoSub"},React.createElement("section",{className:"DFOTitleSection"},React.createElement("section",{className:"DFOWalletBalanceSingleT"},React.createElement("img",{src:e.logo,alt:e.symbol.substring(0,1).toUpperCase()}),React.createElement("h3",null,e.symbol," ",t.state.tokenAmounts[e.i].amountDollars===undefined?React.createElement(LoaderMinimino,null):t.state.tokenAmounts[e.i].amountDollars?React.createElement("span",{className:"DFOLabelTitleInfosmall"}," ($",window.formatMoney(t.state.tokenAmounts[e.i].amountDollars),")"):undefined)),t.state.tokenAmounts[e.i].amount!==undefined&&React.createElement("h5",{className:"DFOLabelTitleInfoM"},React.createElement("b",null,window.fromDecimals(t.state.tokenAmounts[e.i].amount,e.decimals))),t.state.tokenAmounts[e.i].amount===undefined&&React.createElement(LoaderMinimino,null),React.createElement("br",null),t.props.edit&&React.createElement("a",{href:"javascript:;","data-address":e.address,"data-type":"swap",onClick:t.toggleProposal,className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"+(t.state&&t.state.swapProposal===e.address?"EditDFOYo Editing":"")},"Swap"),t.props.edit&&React.createElement("a",{href:"javascript:;","data-address":e.address,"data-type":"transfer",onClick:t.toggleProposal,className:"LinkVisualButton LinkVisualPropose LinkVisualButtonB"+(t.state&&t.state.transferProposal===e.address?"EditDFOYo Editing":"")},"Transfer"),t.state&&t.state.swapProposal===e.address&&t.renderSwapProposal(e),t.state&&t.state.poolProposal===e.address&&t.renderPoolProposal(e),t.state&&t.state.transferProposal===e.address&&t.renderTransferProposal(e)))}),this.state&&this.state.loading&&React.createElement("section",null,React.createElement("br",null),React.createElement(LoaderMinimino,null))))}});var WalletEnablerButton=React.createClass({displayName:"WalletEnablerButton",getDefaultSubscriptions:function(){return{"ethereum/ping":this.forceUpdate}},onClick:function(t){var n=t,r=t.target,i=this;if(window.walletAddress)return i.props.onClick&&i.props.onClick.apply(i.domRoot.parent().findReactComponent(),[t]);window.ethereum.enable().then(function(){n.target=r;try{var e=i.props.onUnlock?i.props.onUnlock==="false"?undefined:i.props.onUnlock:i.props.onClick;e=e&&e.apply(i.domRoot.parent().findReactComponent(),[t]);if(e&&e.then)return e.then(function(){return i.forceUpdate()}).catch(console.error);if(!e)try{n&&n.preventDefault(!0)&&n.stopPropagation(!0)}catch(t){}}catch(t){console.error(t)}i.forceUpdate()}).catch(function(){})},render:function(){var t=this;return!window.walletAddress||!this.props.childOnly?React.createElement("a",{ref:function(n){return t.props.ref&&t.props.ref(n)},className:!window.walletAddress&&this.props.inactiveClassName||this.props.className,onClick:this.onClick,href:"javascript:;",type:"button"},!window.walletAddress&&this.props.inactiveText||this.props.children):this.props.children}});!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/asyncValue.jsx','spa/bigLoader.jsx','spa/dapp/controller.jsx','spa/dapp/style.min.css','spa/dapp/view.jsx','spa/defi/controller.jsx','spa/defi/style.min.css','spa/defi/view.jsx','spa/deploy/controller.jsx','spa/deploy/deployDFO.jsx','spa/deploy/deployDFOMetadata.jsx','spa/deploy/governanceRulesData.jsx','spa/deploy/style.min.css','spa/deploy/subdomain.jsx','spa/deploy/view.jsx','spa/deploy/votingTokenData.jsx','spa/dFOElement/controller.jsx','spa/dFOElement/style.min.css','spa/dFOElement/view.jsx','spa/dFOList/controller.jsx','spa/dFOList/style.min.css','spa/dFOList/view.jsx','spa/dFOMetadata/controller.jsx','spa/dFOMetadata/edit.jsx','spa/dFOMetadata/style.min.css','spa/dFOMetadata/view.jsx','spa/drafts/controller.jsx','spa/drafts/style.min.css','spa/drafts/view.jsx','spa/editor/controller.jsx','spa/editor/style.min.css','spa/editor/view.jsx','spa/farming/controller.jsx','spa/farming/fixedInflation/edit.jsx','spa/farming/fixedInflation/view.jsx','spa/farming/staking/edit.jsx','spa/farming/staking/view.jsx','spa/farming/style.min.css','spa/farming/view.jsx','spa/functions/controller.jsx','spa/functions/style.min.css','spa/functions/view.jsx','spa/ghostLoader.jsx','spa/globalCatcher.jsx','spa/governance/controller.jsx','spa/governance/style.min.css','spa/governance/view.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/loader.jsx','spa/loaderMini.jsx','spa/loaderMinimino.jsx','spa/messages.jsx','spa/newProposal/controller.jsx','spa/newProposal/style.min.css','spa/newProposal/view.jsx','spa/noWeb3Loader.jsx','spa/okBoomer.jsx','spa/overview/controller.jsx','spa/overview/style.min.css','spa/overview/view.jsx','spa/proposal/controller.jsx','spa/proposal/style.min.css','spa/proposal/view.jsx','spa/proposals/controller.jsx','spa/proposals/style.min.css','spa/proposals/view.jsx','spa/rules/controller.jsx','spa/rules/style.min.css','spa/rules/view.jsx','spa/sequentialOps.jsx','spa/stake/controller.jsx','spa/stake/style.min.css','spa/stake/view.jsx','spa/stakingInfo/controller.jsx','spa/stakingInfo/style.min.css','spa/stakingInfo/view.jsx','spa/state/controller.jsx','spa/state/style.min.css','spa/state/view.jsx','spa/token/controller.jsx','spa/token/style.min.css','spa/token/view.jsx','spa/tokenPicker/controller.jsx','spa/tokenPicker/style.min.css','spa/tokenPicker/view.jsx','spa/uniswapTokenPicker.jsx','spa/wallet/controller.jsx','spa/wallet/style.min.css','spa/wallet/view.jsx','spa/walletEnablerButton.jsx']);